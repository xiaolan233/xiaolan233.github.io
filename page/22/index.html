<!-- build time:Tue Nov 06 2018 14:27:35 GMT+0800 (中国标准时间) --><!DOCTYPE html><html class="theme-next gemini use-motion" lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="google-site-verification" content="true"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=6.4.0" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple.png?v=6.4.0"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon32.png?v=6.4.0"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon16.png?v=6.4.0"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Gemini",version:"6.4.0",sidebar:{position:"right",display:"post",offset:12,b2t:!1,scrollpercent:!1,onmobile:!1},fancybox:!1,fastclick:!1,lazyload:!1,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><meta name="keywords" content="没有关键字"><meta property="og:type" content="website"><meta property="og:title" content="蓝生的博客"><meta property="og:url" content="https://www.lansheng.net.cn/page/22/index.html"><meta property="og:site_name" content="蓝生的博客"><meta property="og:locale" content="zh-CN"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="蓝生的博客"><link rel="alternate" href="/atom.xml" title="蓝生的博客" type="application/atom+xml"><link rel="canonical" href="https://www.lansheng.net.cn/page/22/"><script type="text/javascript" id="page.configurations">CONFIG.page={sidebar:""}</script><title>蓝生的博客</title><noscript><style type="text/css">.sidebar-inner,.use-motion .brand,.use-motion .collection-title,.use-motion .comments,.use-motion .menu-item,.use-motion .motion-element,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .logo,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN"><div class="container sidebar-position-right page-home"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">蓝生的博客</span> <span class="logo-line-after"><i></i></span></a></div></div><div class="site-nav-toggle"><button aria-label="切换导航栏"><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i> </span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"><input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><section id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://www.lansheng.net.cn/blog/9712edd/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="蓝生"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="蓝生的博客"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/blog/9712edd/" itemprop="url">String tirm()方法去不掉的空格</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-08-07 20:10:56" itemprop="dateCreated datePublished" datetime="2018-08-07T20:10:56+08:00">2018-08-07</time> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2018-11-05 17:17:07" itemprop="dateModified" datetime="2018-11-05T17:17:07+08:00">2018-11-05</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java/Java-正则表达式/" itemprop="url" rel="index"><span itemprop="name">Java 正则表达式</span></a></span> </span><span class="post-comments-count"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><a href="/blog/9712edd/#comments" itemprop="discussionUrl"><span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/blog/9712edd/" itemprop="commentCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h2><ul><li>移除掉下面代码中的空白行。</li><li>移除每行前面的多余空白符</li></ul><h3 id="要处理的文本"><a href="#要处理的文本" class="headerlink" title="要处理的文本:"></a>要处理的文本:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">　　BufferedReader in;</span><br><span class="line"></span><br><span class="line">　　Pattern pattern = Pattern.compile(&quot;//(//d&#123;3&#125;//)//s//d&#123;3&#125;-//d&#123;4&#125;&quot;);</span><br><span class="line"></span><br><span class="line">　　in = new BufferedReader(new FileReader(&quot;phone&quot;));</span><br><span class="line"></span><br><span class="line">　　String s;</span><br><span class="line"></span><br><span class="line">　　while ((s = in.readLine()) != null)</span><br><span class="line"></span><br><span class="line">　　&#123;</span><br><span class="line"></span><br><span class="line">　　Matcher matcher = pattern.matcher(s);</span><br><span class="line"></span><br><span class="line">　　if (matcher.find())</span><br><span class="line"></span><br><span class="line">　　&#123;</span><br><span class="line"></span><br><span class="line">　　System.out.println(matcher.group());</span><br><span class="line"></span><br><span class="line">　　&#125;</span><br><span class="line"></span><br><span class="line">　　&#125;</span><br><span class="line"></span><br><span class="line">　　in.close();</span><br></pre></td></tr></table></figure><h2 id="移除空白行-使用正则表达式"><a href="#移除空白行-使用正则表达式" class="headerlink" title="移除空白行:使用正则表达式"></a>移除空白行:使用正则表达式</h2><p>使用String类的replaceAll()方法可以移除空白行，只要我用正则表达式匹配到这些空白行，然后把这些空白行替换为空字符串就行了。<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">text = text.replaceAll(&quot;(?m)^\\s*$(\\n|\\r\\n)&quot;, &quot;&quot;);</span><br></pre></td></tr></table></figure><p></p><p><code>(?m)</code>表示开启多行匹配模式，<code>^</code>匹配行开头,<code>\\s*</code>0个或多个空白符,<code>$</code>匹配行结尾，<code>(\\n|\\r\\n)</code>匹配字符串中的换行符。</p><p>测试代码如下：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">String text = SysClipboardUtil.getSysClipboardText();</span><br><span class="line">System.out.println(&quot;去除无意义空白行后：&quot;);</span><br><span class="line">text = text.replaceAll(&quot;(?m)^\\s*$(\\n|\\r\\n)&quot;, &quot;&quot;);</span><br><span class="line">System.out.println(text);</span><br></pre></td></tr></table></figure><p></p><p>依赖：<a href="https://blog.csdn.net/qq_21808961/article/details/80671259" target="_blank" rel="noopener">SysClipboardUtil.getSysClipboardText();</a><br>运行结果：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">去除无意义空白行后：</span><br><span class="line">　　BufferedReader in;</span><br><span class="line">　　Pattern pattern = Pattern.compile(&quot;//(//d&#123;3&#125;//)//s//d&#123;3&#125;-//d&#123;4&#125;&quot;);</span><br><span class="line">　　in = new BufferedReader(new FileReader(&quot;phone&quot;));</span><br><span class="line">　　String s;</span><br><span class="line">　　while ((s = in.readLine()) != null)</span><br><span class="line">　　&#123;</span><br><span class="line">　　Matcher matcher = pattern.matcher(s);</span><br><span class="line">　　if (matcher.find())</span><br><span class="line">　　&#123;</span><br><span class="line">　　System.out.println(matcher.group());</span><br><span class="line">　　&#125;</span><br><span class="line">　　&#125;</span><br><span class="line">　　in.close();</span><br><span class="line">____________________________________</span><br></pre></td></tr></table></figure><p></p><p>好的，第一个需求做到了。</p><h2 id="移除每行前面的多余空白符"><a href="#移除每行前面的多余空白符" class="headerlink" title="移除每行前面的多余空白符"></a>移除每行前面的多余空白符</h2><h3 id="String-trim-方法删除不掉该空格符"><a href="#String-trim-方法删除不掉该空格符" class="headerlink" title="String.trim()方法删除不掉该空格符"></a>String.trim()方法删除不掉该空格符</h3><p>现在text字符串中，每一行的前面有两个空白符:<code></code>，因为这些空白符在行尾，很自然想到使用text.trim()方法取出掉该空白符，但是奇怪的是根本就去不掉。<br>之所以去不掉是因为这个空格不简单啊，不是普通那种空格，这里称为<code>bug空格</code>。<br><strong>bug空格：</strong><br><img src="https://i.imgur.com/o1iRowf.png" alt=""><br><strong>普通空格：</strong><br><img src="https://i.imgur.com/TZH9IE9.png" alt="">、<br>可以看到这个<code>bug空格</code>比普通的空格的宽度要宽。不过也不是没有办法。</p><h3 id="思路1：用该空格自己匹配来自己，进行替换删除"><a href="#思路1：用该空格自己匹配来自己，进行替换删除" class="headerlink" title="思路1：用该空格自己匹配来自己，进行替换删除"></a>思路1：用该空格自己匹配来自己，进行替换删除</h3><p>不过既然这个bug空格可以复制粘贴，那我就直接粘贴到程序中，用它自己来匹配自己，这样使用<code>text.replaceAll(&quot;[　]+&quot;,&quot;&quot;)</code>就可以把这个bug空格<code>&quot;　&quot;</code>全部替换成空白字符串<code>&quot;&quot;</code>，就相当于删除掉该字符串了。<br>代码如下：<br></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">String text = SysClipboardUtil.getSysClipboardText();</span><br><span class="line"><span class="comment">//删除文本中的空白行</span></span><br><span class="line">text=text.replaceAll(<span class="string">"(?m)^\\s*$(\\n|\\r\\n)"</span>, <span class="string">""</span>);</span><br><span class="line">System.out.println(<span class="string">"删除空白行之后的文本:"</span>);</span><br><span class="line">System.out.println(text);</span><br><span class="line"><span class="comment">//直接粘贴这个空格到字符组中,</span></span><br><span class="line">text=text.replaceAll(<span class="string">"[　]+"</span>, <span class="string">""</span>);</span><br><span class="line">System.out.println(<span class="string">"_______________________________"</span>);</span><br><span class="line">System.out.println(<span class="string">"去除中文全角空格后:"</span>);</span><br><span class="line">System.out.println(text);</span><br></pre></td></tr></table></figure><p></p><p>复制需要处理的文本,然后运行上面的代码。运行结果如下。<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">删除空白行之后的文本:</span><br><span class="line">　　BufferedReader in;</span><br><span class="line">　　Pattern pattern = Pattern.compile(&quot;//(//d&#123;3&#125;//)//s//d&#123;3&#125;-//d&#123;4&#125;&quot;);</span><br><span class="line">　　in = new BufferedReader(new FileReader(&quot;phone&quot;));</span><br><span class="line">　　String s;</span><br><span class="line">　　while ((s = in.readLine()) != null)</span><br><span class="line">　　&#123;</span><br><span class="line">　　Matcher matcher = pattern.matcher(s);</span><br><span class="line">　　if (matcher.find())</span><br><span class="line">　　&#123;</span><br><span class="line">　　System.out.println(matcher.group());</span><br><span class="line">　　&#125;</span><br><span class="line">　　&#125;</span><br><span class="line">　　in.close();</span><br><span class="line">_______________________________</span><br><span class="line">去除中文全角空格后:</span><br><span class="line">BufferedReader in;</span><br><span class="line">Pattern pattern = Pattern.compile(&quot;//(//d&#123;3&#125;//)//s//d&#123;3&#125;-//d&#123;4&#125;&quot;);</span><br><span class="line">in = new BufferedReader(new FileReader(&quot;phone&quot;));</span><br><span class="line">String s;</span><br><span class="line">while ((s = in.readLine()) != null)</span><br><span class="line">&#123;</span><br><span class="line">Matcher matcher = pattern.matcher(s);</span><br><span class="line">if (matcher.find())</span><br><span class="line">&#123;</span><br><span class="line">System.out.println(matcher.group());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">in.close();</span><br></pre></td></tr></table></figure><p></p><p>可以看到用了这种傻瓜式的操作就可以完成任务了。不过还是有点心有不甘，因为不知道这个bug空格是什么东西，下面来看看这个bug空格到底是什么东西。</p><h3 id="思路2：转成Unicode码然后查码表看看是什么东西"><a href="#思路2：转成Unicode码然后查码表看看是什么东西" class="headerlink" title="思路2：转成Unicode码然后查码表看看是什么东西"></a>思路2：转成Unicode码然后查码表看看是什么东西</h3><p>查了一下，其实这个空格叫做<code>中文(全角)空格</code>，我怎么知道的呢。先把这个空格转换成<code>Unicode</code>字符就知道了。<br>代码如下</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String chinese_full_width_space=&quot;　&quot;;//中文全角空格</span><br><span class="line">String urlEncoderUnicode = URLEncoder.encode(chinese_full_width_space,&quot;utf-16be&quot;);//java中的字符都用utf-16be进行编码，所以转码为utf-16be我们就知道了这个奇怪的字符在java里的编码。这样方便后面查找。</span><br><span class="line">System.out.println(urlEncoderUnicode);</span><br></pre></td></tr></table></figure><p>运行结果：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%30%00</span><br></pre></td></tr></table></figure><p></p><p><code>%30%00</code>转换成平常表示的java中的Unicode编码就是<code>\u3000</code>,然后再到网上查一下看看这个<code>\u3000</code>是什么：</p><p><img src="https://i.imgur.com/Sayko4X.png" alt=""></p><p>嗯，原来这个bug空格叫做<code>中文全角空格</code></p><p>好的，既然我们知道了这个奇怪的空格是中文全角空格，也知道对应的Unicode码为<code>\u3000</code>,java中正则表达式支持Unicode码，所以可以使用<code>text=text.replaceAll(&quot;\u3000+&quot;, &quot;&quot;);</code>把所以的中文全角空格替换成空字符，也就是移除掉所有的中文全角空格了。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">	String text = SysClipboardUtil.getSysClipboardText();</span><br><span class="line">	//删除文本中的空白行</span><br><span class="line">	text=text.replaceAll(&quot;(?m)^\\s*$(\\n|\\r\\n)&quot;, &quot;&quot;);</span><br><span class="line">	System.out.println(&quot;删除空白行之后的文本:&quot;);</span><br><span class="line">	System.out.println(text);</span><br><span class="line">	//直接粘贴这个空格到字符组中,</span><br><span class="line">//	text=text.replaceAll(&quot;[　]+&quot;, &quot;&quot;);</span><br><span class="line">//    使用Unicode码匹配中文全角空格</span><br><span class="line">	text=text.replaceAll(&quot;\u3000+&quot;, &quot;&quot;);</span><br><span class="line">	System.out.println(&quot;_______________________________&quot;);</span><br><span class="line">	System.out.println(&quot;去除中文全角空格后:&quot;);</span><br><span class="line">	System.out.println(text);</span><br></pre></td></tr></table></figure><p>运行结果：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">删除空白行之后的文本:</span><br><span class="line">　　BufferedReader in;</span><br><span class="line">　　Pattern pattern = Pattern.compile(&quot;//(//d&#123;3&#125;//)//s//d&#123;3&#125;-//d&#123;4&#125;&quot;);</span><br><span class="line">　　in = new BufferedReader(new FileReader(&quot;phone&quot;));</span><br><span class="line">　　String s;</span><br><span class="line">　　while ((s = in.readLine()) != null)</span><br><span class="line">　　&#123;</span><br><span class="line">　　Matcher matcher = pattern.matcher(s);</span><br><span class="line">　　if (matcher.find())</span><br><span class="line">　　&#123;</span><br><span class="line">　　System.out.println(matcher.group());</span><br><span class="line">　　&#125;</span><br><span class="line">　　&#125;</span><br><span class="line">　　in.close();</span><br><span class="line">_______________________________</span><br><span class="line">去除中文全角空格后:</span><br><span class="line">BufferedReader in;</span><br><span class="line">Pattern pattern = Pattern.compile(&quot;//(//d&#123;3&#125;//)//s//d&#123;3&#125;-//d&#123;4&#125;&quot;);</span><br><span class="line">in = new BufferedReader(new FileReader(&quot;phone&quot;));</span><br><span class="line">String s;</span><br><span class="line">while ((s = in.readLine()) != null)</span><br><span class="line">&#123;</span><br><span class="line">Matcher matcher = pattern.matcher(s);</span><br><span class="line">if (matcher.find())</span><br><span class="line">&#123;</span><br><span class="line">System.out.println(matcher.group());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">in.close();</span><br></pre></td></tr></table></figure><p></p><h2 id="启发"><a href="#启发" class="headerlink" title="启发"></a>启发</h2><p>遇到一个不懂的字符的时候可以先把它转为<code>Unicode</code>码，然再查码表,或者网上查。</p><p>本文链接: <a href="https://www.lansheng.net.cn/blog/9712edd/">String tirm()方法去不掉的空格</a></p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://www.lansheng.net.cn/blog/51e02fda/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="蓝生"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="蓝生的博客"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/blog/51e02fda/" itemprop="url">Java使用正则表达式是删除空行，空行可能有多个空格</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-08-07 15:56:18" itemprop="dateCreated datePublished" datetime="2018-08-07T15:56:18+08:00">2018-08-07</time> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2018-11-05 17:17:07" itemprop="dateModified" datetime="2018-11-05T17:17:07+08:00">2018-11-05</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java/Java-正则表达式/" itemprop="url" rel="index"><span itemprop="name">Java 正则表达式</span></a></span> </span><span class="post-comments-count"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><a href="/blog/51e02fda/#comments" itemprop="discussionUrl"><span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/blog/51e02fda/" itemprop="commentCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">string.replaceAll(&quot;(?m)^\\s*$(\\n|\\r\\n)&quot;, &quot;&quot;);</span><br></pre></td></tr></table></figure><p><code>(?m)</code>表示开启多行匹配模式，<code>^</code>是行开始，<code>\\s*</code>代表任意个空格，<code>$</code>代表行结束。<br>所以这句话的意思是:<br>&emsp;&emsp;&emsp;&emsp;所有空行(包括有任意空格的行)都会被替换为空字符串，即空行被从字符串中移除。</p><h1 id="移除多余的连续空格，只留下一个空格。"><a href="#移除多余的连续空格，只留下一个空格。" class="headerlink" title="移除多余的连续空格，只留下一个空格。"></a>移除多余的连续空格，只留下一个空格。</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">string.replaceAll(&quot;[ ]+&quot;, &quot; &quot;);</span><br></pre></td></tr></table></figure><p><code>[ ]+</code>表示一个或多个空格，<code>&quot; &quot;</code>表示一个空格。这句话的意思就是把多个空格替换为一个空格。<br>原文:<a href="https://blog.csdn.net/kaukiyou/article/details/46829375" target="_blank" rel="noopener">https://blog.csdn.net/kaukiyou/article/details/46829375</a></p><p>本文链接: <a href="https://www.lansheng.net.cn/blog/51e02fda/">Java使用正则表达式是删除空行，空行可能有多个空格</a></p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://www.lansheng.net.cn/blog/12fb64fe/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="蓝生"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="蓝生的博客"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/blog/12fb64fe/" itemprop="url">String类中的正则表达式</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-08-06 23:46:40" itemprop="dateCreated datePublished" datetime="2018-08-06T23:46:40+08:00">2018-08-06</time> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2018-11-05 17:17:07" itemprop="dateModified" datetime="2018-11-05T17:17:07+08:00">2018-11-05</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java/Java-正则表达式/" itemprop="url" rel="index"><span itemprop="name">Java 正则表达式</span></a></span> </span><span class="post-comments-count"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><a href="/blog/12fb64fe/#comments" itemprop="discussionUrl"><span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/blog/12fb64fe/" itemprop="commentCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="String支持正则表达式是的方法"><a href="#String支持正则表达式是的方法" class="headerlink" title="String支持正则表达式是的方法"></a>String支持正则表达式是的方法</h2><p><code>String</code> 有 4 个方法用到了正则表达式 : <code>matches()</code>，<code>split()</code>, <code>replaceFirst()</code>, <code>replaceAll(</code> ),如下表所示。</p><table><thead><tr><th>序号</th><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>1</td><td><code>boolean matches(String regex)</code></td><td>告知此字符串是否匹配给定的正则表达式。</td></tr><tr><td>2</td><td><code>String[] split(String regex)</code></td><td>根据给定正则表达式的匹配拆分此字符串。</td></tr><tr><td>3</td><td><code>String[] split(String regex, int limit)</code></td><td>根据匹配给定的正则表达式来拆分此字符串。</td></tr><tr><td>4</td><td><code>String replaceFirst(String regex, String replacement)</code></td><td>使用给定的 replacement 替换此字符串匹配给定的正则表达式的第一个子字符串。</td></tr><tr><td>5</td><td><code>String replaceAll(String regex, String replacement)</code></td><td>使用给定的 replacement 替换此字符串所有匹配给定的正则表达式的子字符串。</td></tr></tbody></table><h2 id="matches-方法"><a href="#matches-方法" class="headerlink" title="matches()方法"></a>matches()方法</h2><p><code>public boolean matches(String regex)</code></p><blockquote><p>告知此字符串是否匹配给定的正则表达式。<br>调用此方法的 <code>str.matches(regex)</code> 形式与以下表达式产生的结果完全相同：<br>&emsp;&emsp;&emsp;&emsp;<code>Pattern.matches(regex, str)</code><br>参数：<br>&emsp;&emsp;&emsp;&emsp;<code>regex</code> - 用来匹配此字符串的正则表达式<br>返回：<br>&emsp;&emsp;&emsp;&emsp;当且仅当此字符串匹配给定的正则表达式时，返回 <code>true</code><br>抛出：<br>&emsp;&emsp;&emsp;&emsp;<code>PatternSyntaxException</code> - 如果正则表达式的语法无效</p></blockquote><h3 id="实例："><a href="#实例：" class="headerlink" title="实例："></a>实例：</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	String text=<span class="string">"I keep saying no\n"</span>+</span><br><span class="line">				<span class="string">"This can't be the way we're supposed to be"</span>;</span><br><span class="line">	System.out.println(text.matches(<span class="string">".*saying.*"</span>));</span><br><span class="line">	System.out.println(text.matches(<span class="string">".*saying.*\n.*"</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行结果：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">false</span><br><span class="line">true</span><br></pre></td></tr></table></figure><p></p><h3 id="拓展：点号-能匹配-r-n之外的任意字符"><a href="#拓展：点号-能匹配-r-n之外的任意字符" class="headerlink" title="拓展：点号.能匹配\r\n之外的任意字符"></a>拓展：点号<code>.</code>能匹配<code>\r\n</code>之外的任意字符</h3><p>你如果奇怪为什么<code>text.matches(&quot;.*saying.*&quot;)</code>不返回<code>true</code>，而是返回<code>flase</code>。那你就误解了点号<code>.</code>的意思了，点号<code>.</code>匹配任意字符是没错，但是这个任意字符不包括换行符<code>\n</code>，回车符<code>\r</code>。所以点号<code>.</code>匹配的是一个除了换行符<code>\n</code>,回车符<code>\r</code>之外的其他字符。<br>实例：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">public static void testMatchersSpecialCharacter()</span><br><span class="line">&#123;</span><br><span class="line">//字符串中的转义字符有：\b  \t  \n  \f  \r  \&quot;  \&apos;  \\</span><br><span class="line">	String text;</span><br><span class="line">	//回车符</span><br><span class="line">	text=&quot;I keep saying no\r&quot;;</span><br><span class="line">	System.out.println(text.matches(&quot;.*saying.*&quot;));</span><br><span class="line">	//换行符</span><br><span class="line">	text=&quot;I keep saying no\n&quot;;</span><br><span class="line">	System.out.println(text.matches(&quot;.*saying.*&quot;));</span><br><span class="line">	//\b退格符</span><br><span class="line">	text=&quot;I keep saying no\b&quot;;</span><br><span class="line">	System.out.println(text.matches(&quot;.*saying.*&quot;));</span><br><span class="line">	//\t水平制表符</span><br><span class="line">	text=&quot;I keep saying no\t&quot;;</span><br><span class="line">	System.out.println(text.matches(&quot;.*saying.*&quot;));</span><br><span class="line">	//\f走页符</span><br><span class="line">	text=&quot;I keep saying no\f&quot;;</span><br><span class="line">	System.out.println(text.matches(&quot;.*saying.*&quot;));</span><br><span class="line">	//\&quot;双引号</span><br><span class="line">	text=&quot;I keep saying no\&quot;&quot;;</span><br><span class="line">	System.out.println(text.matches(&quot;.*saying.*&quot;));</span><br><span class="line">	//\&apos;单引号</span><br><span class="line">	text=&quot;I keep saying no\&apos;&quot;;</span><br><span class="line">	System.out.println(text.matches(&quot;.*saying.*&quot;));</span><br><span class="line">	//\\反斜线</span><br><span class="line">	text=&quot;I keep saying no\\&quot;;</span><br><span class="line">	System.out.println(text.matches(&quot;.*saying.*&quot;));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>运行结果：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">false</span><br><span class="line">false</span><br><span class="line">true</span><br><span class="line">true</span><br><span class="line">true</span><br><span class="line">true</span><br><span class="line">true</span><br><span class="line">true</span><br></pre></td></tr></table></figure><p></p><p>从运行结果中看，点号<code>.</code>可以匹配除了<code>\r</code>,<code>\n</code>之外的其他任意转义字符。</p><p>扯远了，回来继续说<code>String.matchers(regex)</code>方法，源码如下。<br></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">matches</span><span class="params">(String regex)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> Pattern.matches(regex, <span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>所以前面说，调用此方法的 <code>str.matches(regex)</code> 形式与调用<code>Pattern.matches(regex, str)</code>方法产生的结果完全相同,是因为低层还是调用了<code>Pattern.matches(regex, str)</code>方法实现的，也就少传个参数吧。</p><h2 id="split-方法"><a href="#split-方法" class="headerlink" title="split()方法"></a><code>split()</code>方法</h2><p>看源码：<br></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> String[] split(String regex) </span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> split(regex, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>可以看到<code>split(regex)</code>方法还是直接调用<code>split(regex, 0);</code>来实现的。</p><p>##split(String regex, int limit)方法##<br>源码：<br></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> String[] split(String regex, <span class="keyword">int</span> limit) </span><br><span class="line">&#123;</span><br><span class="line">  ......</span><br><span class="line">    <span class="keyword">return</span> Pattern.compile(regex).split(<span class="keyword">this</span>, limit);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>可以看到<code>String.split(regex)</code>方法最终调用了<code>Pattern.compile(regex).split(this, limit);</code>方法(这样说有点不准确)，源码太长了，先不看，去看API吧。</p><blockquote><p><code>public String[] split(String regex,int limit)</code><br>&emsp;&emsp;&emsp;&emsp;&emsp;根据匹配给定的正则表达式来拆分此字符串。</p></blockquote><p>从API中看出：</p><h3 id="返回结果"><a href="#返回结果" class="headerlink" title="返回结果"></a>返回结果</h3><ul><li>此方法返回一个<strong>String<code>数组</code></strong></li><li>数组中的内容是，该字符串的<code>子字符串</code>.</li><li>数组中的子串按什么分割呢？<strong>按另一个匹配正则表达式的子串(A)分割。</strong></li><li>返回的子串的顺序：按子串在要分割子串中的顺序排列</li><li>如果正则表达式匹配不到任何子串,也就是说找不到作为分割的子串。那就不分割，返回要分割的字符串本身，也就是数组中只有一个元素。</li></ul><h3 id="limit参数："><a href="#limit参数：" class="headerlink" title="limit参数："></a>limit参数：</h3><p>limit 参数控制正则表达式进行匹配的次数，因此影响所得数组的长度。</p><ul><li><p>如果该限制 n 大于 0，则模式将被最多应用 n - 1 次，数组的长度将不会大于 n，而且数组的最后一项将包含所有超出最后匹配的<strong>定界符(匹配正则作为分割的子串)</strong>的输入。</p></li><li><p>如果 n 为小于0，那么模式将被应用尽可能多的次数，而且返回的数组可以是任何长度。</p></li><li><p>如果 n 为 0，那么模式将被应用尽可能多的次数，返回的数组可以是任何长度，并且结尾空字符串将被丢弃。</p></li></ul><blockquote><p>调用此方法的 str.split(regex, n) 形式与以下表达式产生的结果完全相同：<br>Pattern.compile(regex).split(str, n)</p></blockquote><p>例如，字符串 “boo:and:foo” 使用这些参数可生成以下结果：</p><table><thead><tr><th>Regex</th><th>Limit</th><th>结果</th></tr></thead><tbody><tr><td><code>:</code></td><td><code>2</code></td><td><code>{ &quot;boo&quot;, &quot;and:foo&quot; }</code></td></tr><tr><td><code>:</code></td><td><code>-2</code></td><td><code>{ &quot;boo&quot;, &quot;and&quot;, &quot;foo&quot; }</code></td></tr><tr><td><code>:</code></td><td><code>0</code></td><td><code>{ &quot;boo&quot;, &quot;and&quot;, &quot;foo&quot; }</code></td></tr><tr><td><code>o</code></td><td><code>2</code></td><td><code>{ &quot;b&quot;, &quot;o:and:foo&quot; }</code></td></tr><tr><td><code>o</code></td><td><code>-2</code></td><td><code>{ &quot;b&quot;, &quot;&quot;, &quot;:and:f&quot;, &quot;&quot;, &quot;&quot; }</code></td></tr><tr><td><code>o</code></td><td><code>0</code></td><td><code>{ &quot;b&quot;, &quot;&quot;, &quot;:and:f&quot; }</code></td></tr></tbody></table><p>下面写代码验证上面的结果，分为下面两种情况。</p><h3 id="分割符不相邻的情况："><a href="#分割符不相邻的情况：" class="headerlink" title="分割符不相邻的情况："></a>分割符不相邻的情况<code>：</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">public static void testSplitLimitGreaterThan0()</span><br><span class="line">&#123;</span><br><span class="line">	String text=&quot;boo:and:foo&quot;;</span><br><span class="line">	//n=2,最多分割n-1=1次</span><br><span class="line">	String[] arr=text.split(&quot;:&quot;,2); </span><br><span class="line">	for (String string : arr)</span><br><span class="line">	&#123;</span><br><span class="line">		System.out.println(string);</span><br><span class="line">	&#125;</span><br><span class="line">	System.out.println(&quot;-------------------&quot;);</span><br><span class="line">&#125;</span><br><span class="line">public static void testSplitLimitLessThan0()</span><br><span class="line">&#123;</span><br><span class="line">	String text=&quot;boo:and:foo&quot;;</span><br><span class="line">	//n=2,分割尽可能多次</span><br><span class="line">	String[] arr=text.split(&quot;:&quot;,-2); </span><br><span class="line">	for (String string : arr)</span><br><span class="line">	&#123;</span><br><span class="line">		System.out.println(string);</span><br><span class="line">	&#125;</span><br><span class="line">	System.out.println(&quot;------------------------------&quot;);</span><br><span class="line">&#125;</span><br><span class="line">public static void testSplitLimitEqualTo0()</span><br><span class="line">&#123;</span><br><span class="line">	String text=&quot;boo:and:foo&quot;;</span><br><span class="line">	//n=2,分割尽可能多次</span><br><span class="line">	String[] arr=text.split(&quot;:&quot;,0); </span><br><span class="line">	for (String string : arr)</span><br><span class="line">	&#123;</span><br><span class="line">		System.out.println(string);</span><br><span class="line">	&#125;</span><br><span class="line">	System.out.println(&quot;------------------------------&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行结果：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">boo</span><br><span class="line">and:foo</span><br><span class="line">-------------------</span><br><span class="line">boo</span><br><span class="line">and</span><br><span class="line">foo</span><br><span class="line">------------------------------</span><br><span class="line">boo</span><br><span class="line">and</span><br><span class="line">foo</span><br><span class="line">------------------------------</span><br></pre></td></tr></table></figure><p></p><h3 id="实例1分隔符相邻的情况-o"><a href="#实例1分隔符相邻的情况-o" class="headerlink" title="实例1分隔符相邻的情况:o:"></a>实例1分隔符相邻的情况:<code>o</code>:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">public static void testSplitLimitGreaterThan0Adjacent()</span><br><span class="line">&#123;</span><br><span class="line">	String text=&quot;boo:and:foo&quot;;</span><br><span class="line">	//n=2,最多分割n-1=1次</span><br><span class="line">	String[] arr=text.split(&quot;o&quot;,2); </span><br><span class="line">	for (int i=0;i&lt;arr.length;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		System.out.println(i+&quot;--&gt;&quot;+arr[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	System.out.println(&quot;-------------------&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public static void testSplitLimitLessThan0Adjacent()</span><br><span class="line">&#123;</span><br><span class="line">	String text=&quot;boo:and:foo&quot;;</span><br><span class="line">	//n=2,分割尽可能多次</span><br><span class="line">	String[] arr=text.split(&quot;o&quot;,-2); </span><br><span class="line">	for (int i=0;i&lt;arr.length;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		System.out.println(i+&quot;--&gt;&quot;+arr[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	System.out.println(&quot;------------------------------&quot;);</span><br><span class="line">&#125;</span><br><span class="line">public static void testSplitLimitEqualTo0Adjacent()</span><br><span class="line">&#123;</span><br><span class="line">	String text=&quot;boo:and:foo&quot;;</span><br><span class="line">	//n=2,分割尽可能多次</span><br><span class="line">	String[] arr=text.split(&quot;o&quot;,0); </span><br><span class="line">	for (int i=0;i&lt;arr.length;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		System.out.println(i+&quot;--&gt;&quot;+arr[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	System.out.println(&quot;------------------------------&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行结果：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">0--&gt;b</span><br><span class="line">1--&gt;o:and:foo</span><br><span class="line">-------------------</span><br><span class="line">0--&gt;b</span><br><span class="line">1--&gt;</span><br><span class="line">2--&gt;:and:f</span><br><span class="line">3--&gt;</span><br><span class="line">4--&gt;</span><br><span class="line">------------------------------</span><br><span class="line">0--&gt;b</span><br><span class="line">1--&gt;</span><br><span class="line">2--&gt;:and:f</span><br><span class="line">------------------------------</span><br></pre></td></tr></table></figure><p></p><p>分析，</p><p>因为第一个limit参数n=2,最多分割n-1=2-1=1次，所以遇到第一个o分割成：<code>b</code>,<code>o:and:foo</code>就停止分割了。返回数组为{“b”,”o:and:foo”}<br>第二个方法limit参数是n=-2,小于0，将尽可能多的分割下去。</p><ol><li><p>“boo:and:foo”中遇到第一个<code>o</code>的时候，分割为<code>b</code>和<code>o:and:foo</code>。此时结果为<code>{&quot;b&quot;}</code>。</p></li><li><p>然后接着在后面的子串<code>o:and:foo</code>继续匹配分割，匹配到第二个o的时候<code>o</code>:and:foo,由于前面没有子串，所以用空字符串<code>&quot;&quot;</code>代替,也就是分割为<code>&quot;&quot;</code>和<code>:and:foo</code>这两个字符串。此时结果为<code>{&quot;b&quot;,&quot;&quot;}</code>。</p></li><li><p>然后在后面的子串<code>:and:foo</code>中继续匹配分割，匹配到o,”&#58;and&#58;f<code>o</code>o”,然后分割为”<code>:and:f</code>“,和<code>o</code>。此时结果为<code>{&quot;b&quot;,&quot;&quot;,&quot;:and:f&quot;}</code>.</p></li><li><p>然后继续在剩下的子串”<code>o</code>“中匹配,正则表达式<code>o</code>,匹配到<code>o</code>,把它分割为<code>“”</code>和<code>“”</code>。此时没有待匹配的子串了，结束匹配，所以结果为<code>{&quot;b&quot;,&quot;&quot;,&quot;:and:f&quot;,&quot;&quot;,&quot;&quot;}</code>。</p></li></ol><p>第三个方法，limit参数n=0,尽可能多的分割下去，</p><ul><li>前面三步和上面的三步一样，但是到最后一步的时候不一样。</li><li>在剩下的子串”<code>o</code>“中匹配,正则表达式<code>o</code>,匹配到<code>o</code>,把它分割为<code>“”</code>和<code>“”</code>，此时没有待匹配的子串了，结束匹配。因为这是最后一次分割，最后分割的到的这两个字符串是空字符串，就把这两个空字符串<strong>丢弃</strong>,而不是放入数组中。，所以结果为<code>{&quot;b&quot;,&quot;&quot;,&quot;:and:f&quot;}</code>。</li></ul><h3 id="小结："><a href="#小结：" class="headerlink" title="小结："></a>小结：</h3><p>如果作为分割的子串相邻，就会生成空字符串。例如上面的<code>boo:and</code>,如果用<code>o</code>分割，就会在第二个<code>o</code>匹配的时候，因为<code>o:and</code>中分割点<code>o</code>前面没有子串，所以分割出空字符串<code>&quot;&quot;</code>,和<code>&quot;:and:&quot;</code></p><p><code>split(String regex</code>, <code>int limit)</code>方法用法区别在<code>limit</code>的设置上</p><ul><li>如果limit&gt;0，则最多分割limit-1次</li><li>如果limit&lt;0，则尽可能的分割下去，如果结尾的子串正好匹配正则表达式，作为分割符，这样就会被分割成多个空字符串，这些无意义的空字符串同样会放入到数组中返回。</li><li>如果limit=0，则尽可能的分割下去，如果结尾的子串正好匹配正则表达式，作为分割符，这样会分割为空字符串，对于这些结尾生成的空字符串，就会丢弃掉，不放入数组中返回。</li></ul><p>我们可以夸张一点，把”<code>boo:and:foo</code>“改成<code>boo:and:fooooo</code>看看你运行结果就可以很清楚的看到<code>limit&lt;0</code>和<code>limit=0</code>的区别,代码就不贴了，运行结果如下：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">0--&gt;b</span><br><span class="line">1--&gt;</span><br><span class="line">2--&gt;:and:f</span><br><span class="line">3--&gt;</span><br><span class="line">4--&gt;</span><br><span class="line">5--&gt;</span><br><span class="line">6--&gt;</span><br><span class="line">7--&gt;</span><br><span class="line">------------------------------</span><br><span class="line">0--&gt;b</span><br><span class="line">1--&gt;</span><br><span class="line">2--&gt;:and:f</span><br><span class="line">------------------------------</span><br></pre></td></tr></table></figure><p></p><p>所以平常使用的时候为了不分割到空字符串，还是设置<code>limit=0</code>比较好，可以就是直接调用<code>String.split(regex)</code>就行了。</p><h2 id="replaceFirst-方法"><a href="#replaceFirst-方法" class="headerlink" title="replaceFirst()方法"></a>replaceFirst()方法</h2><blockquote><p>String replaceFirst(String regex, String replacement)<br>&emsp;&emsp;&emsp;&emsp;使用给定的 replacement 替换此字符串匹配给定的正则表达式的第一个子字符串。 调用此方法的 str.replaceFirst(regex, repl) 形式与以下表达式产生的结果完全相同：<br>&emsp;&emsp;&emsp;&emsp;<code>Pattern.compile(regex).matcher(str).replaceFirst(repl)</code></p></blockquote><p>源码如下：<br></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">replaceFirst</span><span class="params">(String regex, String replacement)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> Pattern.compile(regex).matcher(<span class="keyword">this</span>).replaceFirst(replacement);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>这个方法简直人如其名，我不知道该怎么详细些了。</p><h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String text=<span class="string">"aaa:hahaha..."</span>;</span><br><span class="line">System.out.println(text.replaceFirst(<span class="string">"aaa"</span>, <span class="string">"I am groot"</span>));</span><br></pre></td></tr></table></figure><p>运行结果：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">I am groot:hahaha...</span><br></pre></td></tr></table></figure><p></p><h2 id="replaceAll-方法"><a href="#replaceAll-方法" class="headerlink" title="replaceAll()方法"></a>replaceAll()方法</h2><blockquote><p><code>public String replaceAll(String regex,String replacement)</code><br>使用给定的 <code>replacement</code> 替换此字符串所有匹配给定的正则表达式的子字符串。<br>调用此方法的 <code>str.replaceAll(regex, repl)</code> 形式与以下表达式产生的结果完全相同： &emsp;&emsp;&emsp;&emsp;<code>Pattern.compile(regex).matcher(str).replaceAll(repl)</code></p></blockquote><p>源码：<br></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">replaceAll</span><span class="params">(String regex, String replacement)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> Pattern.compile(regex).matcher(<span class="keyword">this</span>).replaceAll(replacement);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><h3 id="实例-1"><a href="#实例-1" class="headerlink" title="实例"></a>实例</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String text=<span class="string">"A:你好\nGtoot:_\nA:额，听不懂\nGroot:_\nA:。。。"</span>;</span><br><span class="line">text=text.replaceAll(<span class="string">"A"</span>, <span class="string">"Tony Stark"</span>);</span><br><span class="line">System.out.println(text.replaceAll(<span class="string">"_"</span>, <span class="string">"I am groot"</span>));</span><br></pre></td></tr></table></figure><p>运行结果：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Tony Stark:你好</span><br><span class="line">Gtoot:I am groot</span><br><span class="line">Tony Stark:额，听不懂</span><br><span class="line">Groot:I am groot</span><br><span class="line">Tony Stark:。。。</span><br></pre></td></tr></table></figure><p></p><p>本文链接: <a href="https://www.lansheng.net.cn/blog/12fb64fe/">String类中的正则表达式</a></p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://www.lansheng.net.cn/blog/4ea1809c/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="蓝生"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="蓝生的博客"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/blog/4ea1809c/" itemprop="url">Java正则表达式</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-08-06 19:10:52" itemprop="dateCreated datePublished" datetime="2018-08-06T19:10:52+08:00">2018-08-06</time> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2018-11-05 17:17:07" itemprop="dateModified" datetime="2018-11-05T17:17:07+08:00">2018-11-05</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java/Java-正则表达式/" itemprop="url" rel="index"><span itemprop="name">Java 正则表达式</span></a></span> </span><span class="post-comments-count"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><a href="/blog/4ea1809c/#comments" itemprop="discussionUrl"><span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/blog/4ea1809c/" itemprop="commentCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><p>正则表达式<strong>定义了字符串的模式。</strong><br>正则表达式<strong>可以用来搜索、编辑或处理文本。</strong><br>正则表达式<strong>并不仅限于某一种语言，但是在每种语言中有细微的差别。</strong></p><h2 id="一些正则表达式的实例及描述"><a href="#一些正则表达式的实例及描述" class="headerlink" title="一些正则表达式的实例及描述"></a>一些正则表达式的实例及描述</h2><p><code>Java</code> 正则表达式和 <code>Perl</code> 的是最为相似的。<br><strong>一个字符串其实就是一个简单的正则表达式</strong>，例如 <code>Hello World</code> 正则表达式匹配 “<code>Hello World</code>“ 字符串。</p><p><code>.</code>（点号）也是一个正则表达式，它匹配任何一个字符如：”<code>a</code>“ 或 “<code>1</code>“。<br>下表列出了一些正则表达式的实例及描述：</p><table><thead><tr><th>序号</th><th>正则表达式</th><th>描述</th></tr></thead><tbody><tr><td>1</td><td><code>this is text</code></td><td>匹配字符串 “<code>this is text</code>“，字符串只能匹配它自己，如果有任何一个字符不匹配都会失败，例如不能匹配这个中间有多个空白符的情况字符串”this&emsp;&emsp;&emsp;&emsp;is&emsp;&emsp;&emsp;&emsp; text”</td></tr><tr><td>2</td><td><code>this\s+is\s+text</code></td><td>注意字符串中的 <code>\s+</code>。<br>匹配单词 “<code>this</code>“ 之后，然后后面的 \s+ 可以匹配多个空格，之后匹配 <code>is</code>字符串，再之后 <code>\s+</code> 匹配多个空格然后再跟上 <code>text</code> 字符串。<br>可以匹配这个实例：<code>this is text</code>，也可以匹配字符串”this&emsp;&emsp;&emsp;&emsp;is&emsp;&emsp;&emsp;&emsp; text”</td></tr><tr><td>3</td><td><code>^\d+(\.\d+)?</code></td><td><code>^</code> 定义了该字符串以什么开始<br><code>\d+</code>匹配一个或多个数字<br><code>?</code> 设置括号内的选项是可选的(可以匹配一次或者多次)<br><code>\.</code>匹配 “<code>.</code>“<br>可以匹配的实例：”<code>5</code>“, “<code>1.5</code>“ 和 “<code>2.21</code>“。<br></td></tr></tbody></table><h1 id="正则表达式语法"><a href="#正则表达式语法" class="headerlink" title="正则表达式语法"></a>正则表达式语法</h1><p><strong>在其他语言中</strong>，<code>\\</code> 表示：我想要在正则表达式中<strong>插入一个普通的</strong>（字面上的）<strong>反斜杠</strong>，请不要给它任何特殊的意义。</p><p>在 Java 中，<code>\\</code>表示：我要<strong>插入一个正则表达式的反斜线，所以其后的字符具有特殊的意义。</strong></p><p>所以，<strong>在其他的语言中（如Perl），一个反斜杠 <code>\</code>就足以具有转义的作用，<code>而在 Java 中正则表达式中则需要有两个反斜杠才能被解析为其他语言中的转义作用。</code></strong>也可以简单的理解在 Java 的正则表达式中，两个<code>\\</code>代表其他语言中的一个 <code>\</code>，这也就是为什么表示一位数字的正则表达式是<code>\\d</code>，而表示一个普通的反斜杠是<code>\\\\</code>。<br><strong>正则表达式的特殊字符字符序列如下</strong></p><h2 id="匹配位置"><a href="#匹配位置" class="headerlink" title="匹配位置"></a>匹配位置</h2><table><thead><tr><th>序号</th><th>字符</th><th>描述</th></tr></thead><tbody><tr><td>1</td><td><code>^</code></td><td>匹配输入字符串开始的位置。如果设置了 <code>RegExp</code> 对象的 <code>Multiline</code> 属性，<code>^</code> 还会与”<code>\n</code>“或”<code>\r</code>“之后的位置匹配。</td></tr><tr><td>2</td><td><code>$</code></td><td>匹配输入字符串结尾的位置。如果设置了 <code>RegExp</code> 对象的 <code>Multiline</code> 属性，$ 还会与”<code>\n</code>“或”<code>\r</code>“之前的位置匹配。</td></tr><tr><td>3</td><td><code>\b</code></td><td>匹配一个字边界，即字与空格间的位置。例如，”<code>er\b</code>“匹配”<code>never</code>“中的”<code>er</code>“，但不匹配”<code>verb</code>“中的”<code>er</code>“。</td></tr></tbody></table><h2 id="匹配单个字符"><a href="#匹配单个字符" class="headerlink" title="匹配单个字符"></a>匹配单个字符</h2><table><thead><tr><th>序号</th><th>匹配单个字符</th><th>描述</th></tr></thead><tbody><tr><td>1</td><td><code>.</code></td><td><strong>匹配除”<code>\r\n</code>“之外的任何单个字符</strong>。若要匹配包括”<code>\r\n</code>“在内的任意字符，请使用诸如”[<code>\s\S</code>]”之类的模式。</td></tr><tr><td>2</td><td><code>[xyz]</code></td><td><strong>字符集</strong>。<strong>匹配括号里包含的任意<code>一个</code>字符</strong>。例如，”[<code>abc</code>]”匹配”<code>plain</code>“中的”<code>a</code>“。</td></tr><tr><td>3</td><td><code>[^xyz]</code></td><td><strong>反向字符集</strong>。<strong>匹配括号里未包含的任何<code>一个</code>字符</strong>。例如，”<code>[^abc]</code>“匹配”<code>plain</code>“中”<code>p</code>“，”<code>l</code>“，”<code>i</code>“，”<code>n</code>“，但不会匹配<code>a</code></td></tr><tr><td>4</td><td><code>[a-z]</code></td><td><strong>范围字符集</strong>。<strong>匹配指定范围内的任何<code>一个</code>字符</strong>。例如，”<code>[a-z]</code>“匹配”<code>a</code>“到”<code>z</code>“范围内的任何<code>一个</code>小写字母。</td></tr><tr><td>5</td><td><code>[^a-z]</code></td><td><strong>反向范围字符集</strong>。<strong>匹配不在指定的范围内的任何一个字符</strong>。例如，”<code>[^a-z]</code>“匹配任何不在”<code>a</code>“到”<code>z</code>“范围内的任何字符。</td></tr></tbody></table><h2 id="量词"><a href="#量词" class="headerlink" title="量词"></a>量词</h2><table><thead><tr><th>序号</th><th>量词</th><th>描述</th></tr></thead><tbody><tr><td>1</td><td><code>?</code></td><td>匹配前面的子符或子表达<strong><code>1次</code>或者<code>0次</code></strong>，例如 <code>zo?</code>匹配<code>z</code>或者<code>zo</code>。<code>?</code> 等效于 <code>{0,1}</code>。</td></tr><tr><td>2</td><td><code>*</code></td><td>匹配前面的字符或子表达式<strong><code>0次</code>或者<code>多次</code></strong>。例如，<code>zo*</code> 匹配”<code>z</code>“,”<code>zoo</code>“,”<code>zooo</code>“,<code>...</code>。<code>*</code> 等效于 <code>{0,}</code>。</td></tr><tr><td>3</td><td><code>+</code></td><td>匹配前面的字符或子表达式<strong><code>1次</code>或<code>多次</code></strong>。例如，”<code>zo+</code>“与”<code>zo</code>“和”<code>zoo</code>“匹配，但与”<code>z</code>“不匹配。<code>+</code>等效于 <code>{1,}</code>。</td></tr><tr><td>4</td><td><code>{n}</code></td><td><code>n</code> 是非负整数。<strong>正好匹配 <code>n</code> 次</strong>。例如，”<code>o{2}</code>“与”<code>Bob</code>“中的”<code>o</code>“不匹配，但与”<code>food</code>“中的两个”<code>o</code>“匹配。</td></tr><tr><td>5</td><td><code>{n,}</code></td><td><code>n</code> 是非负整数。<strong>至少匹配 <code>n</code> 次</strong>。例如，”<code>o{2,}</code>“不匹配”<code>Bob</code>“中的”<code>o</code>“，而匹配”<code>foooood</code>“中的所有 <code>o</code>。”<code>o</code>{1,}”等效于”<code>o+</code>“。”<code>o{0,}</code>“等效于”<code>o*</code>“。</td></tr><tr><td>6</td><td><code>{n,m}</code></td><td><code>m</code> 和 <code>n</code> 是非负整数，其中 <code>n &lt;= m</code>。<strong>匹配至少 <code>n</code> 次，至多 <code>m</code> 次</strong>。例如，”<code>o{1,3}</code>“匹配”<code>fooooood</code>“中的头三个 <code>o</code>。’<code>o{0,1}</code>‘ 等效于 ‘<code>o?</code>‘。注意：您不能将空格插入逗号和数字之间。</td></tr><tr><td>7</td><td><code>?</code></td><td>当此字符紧随任何其他限定符（<code>*</code>、<code>+</code>、<code>?</code>、<code>{n}</code>、<code>{n,}</code>、<code>{n,m}</code>）之后时，匹配模式是”非贪心的”。<strong>“非贪心的”模式匹配搜索到的、尽可能短的字符串</strong>，<strong>而默认的”贪心的”模式匹配搜索到的、尽可能长的字符串。</strong>例如，在字符串”<code>oooo</code>“中，”<code>o+?</code>“只匹配单个”<code>o</code>“，而”<code>o</code>+”匹配所有”<code>o</code>“。</td></tr></tbody></table><h2 id="懒惰匹配"><a href="#懒惰匹配" class="headerlink" title="懒惰匹配"></a>懒惰匹配</h2><p>参考：<a href="http://deerchao.net/tutorials/regex/regex.htm" target="_blank" rel="noopener">http://deerchao.net/tutorials/regex/regex.htm</a><br>解释一下上表的最后一个<code>?</code>的作用，这个<code>?</code>在上面其他量词后面，让原来的量词从尽可能匹配更多的字符，编程尽可能匹配更少的字符。也就是从贪婪的编程懒惰的。</p><p>当正则表达式中包含能接受重复的限定符时，<strong>通常的行为是（在使整个表达式能得到匹配的前提下）匹配尽可能多的字符</strong>。以这个表达式为例：<code>a.*b</code>，它将会匹配最长的以a开始，以b结束的字符串。如果用它来搜索<code>aabab</code>的话，它会匹配整个字符串<code>aabab</code>。这被称为贪婪匹配。</p><p>有时，我们更需要<strong>懒惰匹配，也就是匹配尽可能少的字符</strong>。前面给出的限定符都可以被转化为懒惰匹配模式，只要在它后面加上一个问号<code>?</code>。这样<code>.*?</code>就意味着匹配任意数量的重复，但是在能使整个匹配成功的前提下使用最少的重复。现在看看懒惰版的例子吧：</p><p><code>a.*?b</code>匹配最短的，以<code>a</code>开始，以<code>b</code>结束的字符串。如果把它应用于<code>aabab</code>的话，它会匹配<code>aab</code>（第一到第三个字符）和<code>ab</code>（第四到第五个字符）。</p><p>所以，在上面的量词后面都加上问号<code>?</code>，就可以懒惰匹配量词表，如下所示。</p><table><thead><tr><th>懒惰匹配量词</th><th>说明</th></tr></thead><tbody><tr><td><code>*?</code></td><td>重复任意次，但尽可能少重复</td></tr><tr><td><code>+?</code></td><td>重复1次或更多次，但尽可能少重复</td></tr><tr><td><code>??</code></td><td>重复0次或1次，但尽可能少重复</td></tr><tr><td><code>{n,m}?</code></td><td>重复n到m次，但尽可能少重复</td></tr><tr><td><code>{n,}?</code></td><td>重复n次以上，但尽可能少重复</td></tr></tbody></table><h2 id="反向引用"><a href="#反向引用" class="headerlink" title="反向引用"></a>反向引用</h2><table><thead><tr><th>序号</th><th>反向引用</th><th>描述</th></tr></thead><tbody><tr><td>1</td><td><code>\num</code></td><td>匹配 num，此处的 <code>num 是一个正整数</code>。<strong>到捕获匹配的反向引用</strong>。例如，”<code>(.)\1</code>“匹配两个连续的相同字符。”<code>(a).+\1</code>“匹配<code>axa</code>,<code>abbba</code>等等</td></tr><tr><td>2</td><td><code>\n</code></td><td>标识一个八进制转义码或反向引用。如果 <code>\n</code> 前面至少有 <code>n</code> 个捕获子表达式，那么 <code>n</code> 是反向引用。否则，如果 <code>n</code> 是八进制数 (<code>0-7</code>)，那么 <code>n</code>是八进制转义码。</td></tr></tbody></table><h2 id="转义字符"><a href="#转义字符" class="headerlink" title="转义字符"></a>转义字符</h2><h3 id="字符组简写形式"><a href="#字符组简写形式" class="headerlink" title="字符组简写形式"></a>字符组简写形式</h3><table><thead><tr><th>序号</th><th>字符组简写形式</th><th>描述</th></tr></thead><tbody><tr><td>1</td><td><code>\d</code></td><td>数字字符匹配。等效于 <code>[0-9]</code>。</td></tr><tr><td>2</td><td><code>\D</code></td><td>非数字字符匹配。等效于 <code>[^0-9]</code>。</td></tr><tr><td>3</td><td><code>\s</code></td><td>匹配任何空白字符，包括空格、制表符、换页符等。与<code>[ \f\n\r\t\v]</code> 等效。</td></tr><tr><td>4</td><td><code>\S</code></td><td>匹配任何非空白字符。与 <code>[^ \f\n\r\t\v]</code> 等效。</td></tr><tr><td>5</td><td><code>\w</code></td><td>匹配任何字类字符，包括下划线。与”<code>[A-Za-z0-9_]</code>“等效。</td></tr><tr><td>6</td><td><code>\W</code></td><td>与任何非单词字符匹配。与”<code>[^A-Za-z0-9_]</code>“等效。</td></tr></tbody></table><h3 id="不可见字符"><a href="#不可见字符" class="headerlink" title="不可见字符"></a>不可见字符</h3><table><thead><tr><th>序号</th><th>转义字符</th><th>描述</th></tr></thead><tbody><tr><td>1</td><td><code>\</code></td><td>将下一字符标记为特殊字符、文本、向引用或反八进制转义符。例如，”<code>n</code>“匹配字符”<code>n</code>“,而”<code>\n</code>“匹配换行符。序列”<code>\\\\</code>“匹配”<code>\\</code>“，”<code>\\(</code>“匹配”<code>(</code>“。</td></tr><tr><td>2</td><td><code>\b</code></td><td>匹配一个字边界，即字与空格间的位置。例如，”<code>er\b</code>“匹配”<code>never</code>“中的”<code>er</code>“，但不匹配”<code>verb</code>“中的”<code>er</code>“。</td></tr><tr><td>3</td><td><code>\B</code></td><td>非字边界匹配。”<code>er\B</code>“匹配”<code>verb</code>“中的”<code>er</code>“，但不匹配”<code>never</code>“中的”<code>er</code>“。</td></tr><tr><td>10</td><td><code>\t</code></td><td>制表符匹配。与 \x09 和 \cI 等效。</td></tr><tr><td>11</td><td><code>\v</code></td><td>垂直制表符匹配。与 \x0b 和 \cK 等效。</td></tr><tr><td>12</td><td><code>\r</code></td><td>匹配一个回车符。等效于 \x0d 和 \cM。</td></tr><tr><td>13</td><td><code>\n</code></td><td>换行符匹配。等效于 \x0a 和 \cJ。</td></tr><tr><td>14</td><td><code>\f</code></td><td>换页符匹配。等效于 \x0c 和 \cL。</td></tr><tr><td>15</td><td><code>\cx</code></td><td>匹配 x 指示的控制字符。例如，<code>\cM</code> 匹配<code>Control-M</code> 或回车符。<code>x</code> 的值必须在 <code>A-Z</code> 或 <code>a-z</code> 之间。如果不是这样，则假定 <code>c</code> 就是”<code>c</code>“字符本身。</td></tr></tbody></table><h3 id="进制相关"><a href="#进制相关" class="headerlink" title="进制相关"></a>进制相关</h3><table><thead><tr><th>序号</th><th>带进制的转义符</th><th>描述</th></tr></thead><tbody><tr><td>1</td><td><code>\xn</code></td><td>匹配 <code>n</code>，此处的 <code>n</code> 是一<strong>个十六进制转义码</strong>。十六进制转义码必须正好是两位数长。例如，”<code>\x41</code>“匹配”<code>A</code>“。”<code>\x041</code>“与”<code>\x04</code>“<code>&amp;</code>“<code>1</code>“等效。允许在正则表达式中使用 <code>ASCII</code> 代码。</td></tr><tr><td>2</td><td><code>\n</code></td><td>标识一个<strong>八进制转义码或反向引用</strong>。如果 <code>\n</code> 前面至少有 <code>n</code> 个捕获子表达式，那么 <code>n</code> 是反向引用。否则，如果 <code>n</code> 是八进制数 (<code>0-7</code>)，那么 <code>n</code> 是八进制转义码。</td></tr><tr><td>3</td><td><code>\un</code></td><td>匹配 <code>n</code>，其中 <code>n</code> 是以四位十六进制数表示的 <code>Unicode</code> 字符。例如，<code>\u00A9</code> 匹配版权符号 (<code>©</code>)。</td></tr></tbody></table><h1 id="java-使用正则表达式步骤"><a href="#java-使用正则表达式步骤" class="headerlink" title="java 使用正则表达式步骤"></a>java 使用正则表达式步骤</h1><p>参考:<a href="https://www.cnblogs.com/haodawang/p/5967219.html" target="_blank" rel="noopener">https://www.cnblogs.com/haodawang/p/5967219.html</a></p><h2 id="java的regex库常用类"><a href="#java的regex库常用类" class="headerlink" title="java的regex库常用类"></a>java的regex库常用类</h2><p><code>java</code>里提供了一个<code>java.util.regex</code>库，方便于我们在<code>java</code>里操作正则表达式，或者用它来匹配字符串。</p><h3 id="常用类：Pattern和Matcher"><a href="#常用类：Pattern和Matcher" class="headerlink" title="常用类：Pattern和Matcher"></a>常用类：Pattern和Matcher</h3><p>其中比较常用的类有 <code>Pattern</code> 和 <code>Matcher</code> ,<code>Pattern</code>是一个编译好的正则表达式，而<code>Mather</code>是一个正则表达式适配器，<code>Mather</code>的功能很强大，所以我们一般用<code>pattern</code> 来获取一个<code>Matcher</code>对象，然后用<code>Matcher</code>来操作正则表达式。</p><h3 id="Pattern-类和Matcher-类的关系"><a href="#Pattern-类和Matcher-类的关系" class="headerlink" title="Pattern 类和Matcher 类的关系"></a><code>Pattern</code> 类和<code>Matcher</code> 类的关系</h3><p>首先一个<code>Pattern</code>实例订制了一个所用语法与<code>PERL</code>的类似的正则表达式经编译后的模式，然后一个<code>Matcher</code>实例在这个给定的<code>Pattern</code>实例的模式控制下进行字符串的匹配工作。</p><h3 id="PatternSyntaxException-类"><a href="#PatternSyntaxException-类" class="headerlink" title="PatternSyntaxException 类"></a><code>PatternSyntaxException</code> 类</h3><p><code>PatternSyntaxException</code> 是一个非强制异常类，它表示一个正则表达式模式中的语法错误。</p><h2 id="通常使用步骤"><a href="#通常使用步骤" class="headerlink" title="通常使用步骤"></a>通常使用步骤</h2><h3 id="创建Pattern对象"><a href="#创建Pattern对象" class="headerlink" title="创建Pattern对象"></a>创建Pattern对象</h3><p>创建<code>pattern</code>的对象是很简单的，但是由于<code>pattern</code>的构造方法是用<code>private</code>声明的，所以我们仅能通过工厂模式的<code>compile()</code>方法来返回一个<code>Pattern</code>的对象,<code>compile</code>可以接收一个正则表达式作为参数。<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Pattern pattern = Pattern.compile(&quot;[abc]&quot;);</span><br></pre></td></tr></table></figure><p></p><h3 id="创建Matcher对象"><a href="#创建Matcher对象" class="headerlink" title="创建Matcher对象"></a>创建<code>Matcher</code>对象</h3><p>接下来我们创建一个<code>Matcher</code>对象。<code>Matcher</code>的构造方法也是一个<code>private</code>方法，但是我们可以通过<code>Pattern</code>的<code>Matcher</code>方法来返回一个<code>Matcher</code>对象。<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Matcher matcher = pattern.matcher(&quot;hello abc&quot;);</span><br></pre></td></tr></table></figure><p></p><p>这里<code>matcher</code>可以接收一个字符串作为参数，<strong>准确的说这里所接收的参数类型是<code>CharSequences</code>接口类型的参数</strong>，<code>String</code>、<code>StringBuffer</code>、<code>StringBuilder</code>还有<code>CharBuffer</code>都实现了<code>CharSequence</code>接口，因此这四种类型的对象都可以传入。</p><h3 id="简便用法"><a href="#简便用法" class="headerlink" title="简便用法"></a>简便用法</h3><p>与此同时<code>Pattern</code>还提供了一个<code>matches</code> 静态方法(<code>Pattern.matches(regex, input)</code>)，它允许我们传入一个<code>String</code>类型的正则表达式和一个<code>String</code>类型的需要匹配的字符串，并返回一个<code>boolean</code>类型的值，这个方法的好处在于我们可以不用创建<code>pattern</code>对象和<code>matcher</code>对象就可以知道所传入的正则表达式能不能匹配所传入的字符串。</p><p>####实例####<br>使用了正则表达式 <code>.*groot.*</code>判断字符串中是否包了 groot 这个子串：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.regex.*;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RegexExample1</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        String content = <span class="string">"I am groot"</span>;</span><br><span class="line">        String pattern = <span class="string">".*groot.*"</span>;</span><br><span class="line">        <span class="keyword">boolean</span> isMatch = Pattern.matches(pattern, content);</span><br><span class="line">        System.out.println(<span class="string">"字符串中是否包含了 'groot' 子字符串? "</span> + isMatch);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>实例输出结果为：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">字符串中是否包含了 &apos;groot&apos; 子字符串? true</span><br></pre></td></tr></table></figure><p></p><p>创建Matcher类对象后就可使用Matcher类许多强大的方法了。</p><h1 id="Matcher-类的主要方法介绍"><a href="#Matcher-类的主要方法介绍" class="headerlink" title="Matcher 类的主要方法介绍"></a>Matcher 类的主要方法介绍</h1><h2 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h2><p>说到<code>Matcher</code>,这个东西就很强大了，我们比较常用的方法有:</p><ul><li><code>find();</code></li><li><code>group();</code></li></ul><p>(1)先来说一下<code>find()</code>和<code>group</code>这两个方法。<br><code>find</code>有点像一个迭代器，它能通过正则表达式向前迭代。而<code>group()</code>方法返回0号分组，也就是整个正则表达式匹配的文本。<br>下来看一个例子<br></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testFindGroup</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Pattern pattern = Pattern.compile(<span class="string">"\\d+"</span>);</span><br><span class="line">    Matcher matcher = pattern.matcher(<span class="string">"aaa 111 bbbb 222 333 ccc"</span>);</span><br><span class="line">    <span class="comment">//find向前迭代,查找匹配的字符串</span></span><br><span class="line">    <span class="keyword">while</span>(matcher.find())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//获取匹配正则表达式的子串</span></span><br><span class="line">        System.out.println(matcher.group());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>运行结果：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">111</span><br><span class="line">222</span><br><span class="line">333</span><br></pre></td></tr></table></figure><p></p><p>可以看到这和<code>Matcher.find()</code>和<code>Scanner.hasnext()</code>方法类似，而<code>Matcher.group()</code>和<code>Scanner.next()</code>方法类似。</p><h2 id="捕获组"><a href="#捕获组" class="headerlink" title="捕获组"></a>捕获组</h2><p>捕获组是把多个字符当一个单独单元进行处理的方法，它通过对括号内的字符分组来创建。</p><p>例如，正则表达式 (dog) 创建了单一分组，组里包含”d”，”o”，和”g”。</p><p><strong>捕获组是通过从左至右计算其开括号来编号</strong>。例如，在表达式<code>((A)(B(C))）</code>，有四个这样的组：</p><ul><li><code>((A)(B(C)))</code></li><li><code>(A)</code></li><li><code>(B(C))</code></li><li><code>(C)</code></li></ul><p>可以通过调用 <code>matcher</code> 对象的 <code>groupCount()</code>方法来查看表达式有多少个分组。<code>groupCount()</code> 方法返回一个 <code>int</code> 值，表示<code>matcher</code>对象当前有多个捕获组。</p><p>还有一个特殊的组（<code>group(0)</code>），它总是代表整个表达式。该组不包括在 <code>groupCount</code> 的返回值中。</p><table><thead><tr><th>序号</th><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>1</td><td><code>public int groupCount()</code></td><td>返回此匹配器模式中的捕获组数。根据惯例，零组表示整个模式。它不包括在此计数中。</td></tr><tr><td>2</td><td><code>String group()</code></td><td>返回0号捕获组，也就是整个表达式匹配的字符串</td></tr><tr><td>3</td><td><code>String group(int group)</code></td><td>返回指定捕获组捕获到的子串</td></tr></tbody></table><h3 id="捕获组实例"><a href="#捕获组实例" class="headerlink" title="捕获组实例"></a>捕获组实例</h3><h4 id="查看正则表达式中有多到个捕获组"><a href="#查看正则表达式中有多到个捕获组" class="headerlink" title="查看正则表达式中有多到个捕获组"></a>查看正则表达式中有多到个捕获组</h4><p><code>int groupCount()</code>方法：返回此匹配器模式中的捕获组数.不包括0捕获组<br></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testGroupCount</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Pattern pattern = Pattern.compile(<span class="string">"(\\w+)(\\s+)([0-9]+)"</span>);</span><br><span class="line">       Matcher matcher = pattern.matcher(<span class="string">"aaa 111 bbbb 222 333 ccc"</span>);</span><br><span class="line">       System.out.println(pattern.toString()+<span class="string">"这个正则表达式捕获组数目:"</span>+matcher.groupCount());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>运行结果：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(\w+)(\s+)([0-9]+)这个正则表达式捕获组数目:3</span><br></pre></td></tr></table></figure><p></p><h4 id="捕获方法group-和group-int-group-实例"><a href="#捕获方法group-和group-int-group-实例" class="headerlink" title="捕获方法group()和group(int group)实例"></a>捕获方法group()和group(int group)实例</h4><p><strong>下面的例子说明如何从一个给定的字符串中捕获数字串：</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">package java1.regex.test;</span><br><span class="line"></span><br><span class="line">import java.util.regex.Matcher;</span><br><span class="line">import java.util.regex.Pattern;</span><br><span class="line"></span><br><span class="line">public class RegexMatches</span><br><span class="line">&#123;</span><br><span class="line">	public static void main(String args[])</span><br><span class="line">	&#123;</span><br><span class="line">		// 按指定模式在字符串查找</span><br><span class="line">		String line = &quot;I hope that 2018 is also a year full of hope.&quot;;</span><br><span class="line">		String pattern = &quot;(\\D*)(\\d+)(.*)&quot;;</span><br><span class="line">		// 创建 Pattern 对象</span><br><span class="line">		Pattern r = Pattern.compile(pattern);</span><br><span class="line">		// 现在创建 matcher 对象</span><br><span class="line">		Matcher m = r.matcher(line);</span><br><span class="line">		if (m.find())</span><br><span class="line">		&#123;</span><br><span class="line">			//默认匹配捕获整个表达式-调用m.group(0);</span><br><span class="line">			System.out.println(m.group());</span><br><span class="line">			System.out.println(&quot;第0个分组: &quot; + m.group(0));</span><br><span class="line">			System.out.println(&quot;第1个分组: &quot; + m.group(1));</span><br><span class="line">			System.out.println(&quot;第2个分组: &quot; + m.group(2));</span><br><span class="line">			System.out.println(&quot;第3个分组: &quot; + m.group(3));</span><br><span class="line">		&#125; else</span><br><span class="line">		&#123;</span><br><span class="line">			System.out.println(&quot;NO MATCH&quot;);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>以上实例编译运行结果如下：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">第0个分组: I hope that 2018 is also a year full of hope.</span><br><span class="line">第1个分组: I hope that </span><br><span class="line">第2个分组: 2018</span><br><span class="line">第3个分组:  is also a year full of hope.</span><br></pre></td></tr></table></figure><p></p><p>这里要注意的是<strong>第0个分组捕获的是整个正则表达式匹配到的字符串</strong>，而子字符串的捕获是从第1个分组开始的。<strong>使用无参的捕获函数group()默认捕获0号分组</strong>，看源码就知道了：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public String group() &#123;</span><br><span class="line">    return group(0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><h2 id="索引方法"><a href="#索引方法" class="headerlink" title="索引方法"></a>索引方法</h2><p>索引方法提供了有用的索引值，精确表明输入字符串中在哪能找到匹配：</p><table><thead><tr><th>序号</th><th>索引方法</th><th>描述</th></tr></thead><tbody><tr><td>1</td><td><code>public int start()</code></td><td>返回匹配子序列在原序列的起始下标</td></tr><tr><td>2</td><td><code>public int start(int group)</code></td><td>返回在以前的匹配操作期间，由给定组所捕获的子序列的初始索引</td></tr><tr><td>3</td><td><code>public int end()</code></td><td>返回匹配子序列在原序列的结束下标</td></tr><tr><td>4</td><td><code>public int end(int group)</code></td><td>返回在以前的匹配操作期间，由给定组所捕获子序列的最后字符之后的偏移量。</td></tr></tbody></table><h3 id="start-和-end-方法"><a href="#start-和-end-方法" class="headerlink" title="start 和 end 方法"></a>start 和 end 方法</h3><ul><li><code>start()</code>是返回匹配成功的子串的第一个字母的索引</li><li>而<code>end()</code>是返回子串最后一个索引的位置+1。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testStartEnd1</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    String input = <span class="string">"hello_World"</span>;</span><br><span class="line">    Matcher matcher = Pattern.compile(<span class="string">"\\w+_"</span>).matcher(input);</span><br><span class="line">    matcher.find();</span><br><span class="line">    System.out.println(input.charAt(matcher.start()));</span><br><span class="line">    System.out.println(input.charAt(matcher.end()));</span><br><span class="line">    System.out.println(input.charAt(matcher.end()-<span class="number">1</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>运行结果：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">h</span><br><span class="line">W</span><br><span class="line">_</span><br></pre></td></tr></table></figure><p></p><p>从运行中可以看到，end方法返回的是最后匹配的字符<code>_</code>后面的字符<code>W</code>，而不是该字符<code>_</code>本身。</p><h3 id="实例：统计一个单词出现的次数"><a href="#实例：统计一个单词出现的次数" class="headerlink" title="实例：统计一个单词出现的次数"></a>实例：统计一个单词出现的次数</h3><p>下面统计单词 “<code>groot</code>“ 在输入字符串中出现的次数</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testStartEnd</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">final</span> String regex = <span class="string">"\\bgroot\\b"</span>;</span><br><span class="line">    <span class="keyword">final</span> String text = <span class="string">"I am groot!I am groot!I am groot!I am groot!!!"</span>;</span><br><span class="line"><span class="comment">//  编译表示的正则表达式</span></span><br><span class="line">    Pattern p = Pattern.compile(regex);</span><br><span class="line"><span class="comment">//  获取  matcher  对象</span></span><br><span class="line">    Matcher m = p.matcher(text);</span><br><span class="line">    <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"><span class="comment">//  boolean  find()</span></span><br><span class="line"><span class="comment">//  尝试查找与该模式匹配的输入序列的下一个子序列。</span></span><br><span class="line"><span class="comment">//  尝试查找与正则表达式匹配的下一个字序列</span></span><br><span class="line">    <span class="keyword">while</span> (m.find())</span><br><span class="line">    &#123;</span><br><span class="line">        count++;</span><br><span class="line">        System.out.println(<span class="string">"子序列起始下标:--&gt;"</span> + m.start());</span><br><span class="line">        System.out.println(<span class="string">"成功匹配子序列:"</span> + m.group());</span><br><span class="line">        System.out.println(<span class="string">"子序列结束下标:&lt;--"</span> + m.end());</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(<span class="string">"总共匹配次数:"</span> + count);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>以上实例编译运行结果如下：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">子序列起始下标:--&gt;5</span><br><span class="line">成功匹配子序列:groot</span><br><span class="line">子序列结束下标:&lt;--10</span><br><span class="line">子序列起始下标:--&gt;16</span><br><span class="line">成功匹配子序列:groot</span><br><span class="line">子序列结束下标:&lt;--21</span><br><span class="line">子序列起始下标:--&gt;27</span><br><span class="line">成功匹配子序列:groot</span><br><span class="line">子序列结束下标:&lt;--32</span><br><span class="line">子序列起始下标:--&gt;38</span><br><span class="line">成功匹配子序列:groot</span><br><span class="line">子序列结束下标:&lt;--43</span><br><span class="line">总共匹配次数:4</span><br></pre></td></tr></table></figure><p></p><p>这个例子中使用单词边界，以确保匹配的字符序列是 “<code>g</code>“ ,”<code>r</code>“,”<code>o</code>“,”<code>o</code>“,”<code>t</code>“ 而不会匹配到一个较长的字符串的子串(如 gg<code>groot</code>tttt)。而统计功能是我们通过计数器<code>count</code>实现的。</p><h4 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h4><p>出处：<a href="https://zhidao.baidu.com/question/443782938.html" target="_blank" rel="noopener">https://zhidao.baidu.com/question/443782938.html</a><br><code>Mathcer.start()/ Matcher.end()/ Matcher.group()</code> <strong>这三个方法必须是在有字符匹配到的条件下才能够调用，否则会报错。</strong></p><ul><li><code>start()</code>返回匹配到的子串在字符串中的索引位置</li><li><code>end()</code>返回匹配到的子串的最后一个字符在字符串中的索引位置+1</li><li><code>group()</code>返回匹配到的子字符串。</li></ul><p><code>start()</code>,<code>end()</code>,<code>group()</code>均有一个重载方法它们是<code>start(int i)</code>,<code>end(int i)</code>,<code>group(int i)</code>专用于分组操作,<code>Mathcer</code>类还有一个<code>groupCount()</code>用于返回有多少组。</p><h2 id="判断方法"><a href="#判断方法" class="headerlink" title="判断方法"></a>判断方法</h2><p>判断方法用来检查字符串并返回一个布尔值，表示是否匹配该正则表达式：</p><table><thead><tr><th>序号</th><th>判断方法</th><th>描述</th></tr></thead><tbody><tr><td>1</td><td><code>public boolean matches()</code></td><td>只有整个字符序列完全匹配成功才返回<code>true</code></td></tr><tr><td>2</td><td><code>public boolean lookingAt()</code></td><td>总是从第一个字符进行匹配,匹配成功了不再继续匹配，匹配失败了,也不继续匹配。</td></tr><tr><td>3</td><td><code>public boolean find()</code></td><td>尝试查找与该模式匹配的输入序列的下一个子序列。</td></tr><tr><td>4</td><td><code>public boolean find(int start）</code></td><td>重置此匹配器，然后尝试查找匹配该模式、从指定索引开始的输入序列的下一个子序列。</td></tr></tbody></table><h3 id="java-matcher-中find-matches-lookingAt三个方法的区别"><a href="#java-matcher-中find-matches-lookingAt三个方法的区别" class="headerlink" title="java matcher 中find,matches,lookingAt三个方法的区别"></a>java matcher 中find,matches,lookingAt三个方法的区别</h3><p>出处：<a href="https://www.cnblogs.com/wangjunxiao/p/7115559.html" target="_blank" rel="noopener">https://www.cnblogs.com/wangjunxiao/p/7115559.html</a></p><p>在Matcher类中有find都是匹配目标的方法，但容易混淆，整理它们的区别如下：</p><ul><li><strong><code>matches()</code>:整个匹配</strong>，matches 要求整个序列，只有整个字符序列完全匹配成功，才返回<code>True</code>，否则返回<code>False</code>。但如果前部分匹配成功，将移动下次匹配的位置。</li><li><strong><code>lookingAt()</code>:部分匹配</strong>，总是从第一个字符进行匹配,匹配成功了不再继续匹配，匹配失败了,也不继续匹配。</li><li><strong><code>find()</code>:部分匹配</strong>，从当前位置开始匹配，找到一个匹配的子串，将移动下次匹配的位置。</li><li><strong><code>reset()</code>:给当前的<code>Matcher</code>对象设置新的位置</strong>，位置是就该方法的参数；如果不给参数，<code>reset</code>会把<code>Matcher</code>设到当前字符串的开始处。</li></ul><p>验证代码如下：<br></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testFindLookingAtMatcher</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Pattern pattern = Pattern.compile(<span class="string">"\\d&#123;3,5&#125;"</span>);</span><br><span class="line">    String charSequence = <span class="string">"123-34345-234-00"</span>;</span><br><span class="line">    Matcher matcher = pattern.matcher(charSequence);</span><br><span class="line">    System.out.println(<span class="string">"待匹配字符序列:"</span>+charSequence);</span><br><span class="line">    System.out.println(<span class="string">"正则表达式:"</span>+pattern.toString());</span><br><span class="line">    <span class="comment">//虽然匹配失败，但由于charSequence里面的"123"和pattern是匹配的,所以下次的匹配从位置4开始</span></span><br><span class="line">    System.out.println(<span class="string">"matcher.matches()返回:"</span>+matcher.matches());</span><br><span class="line">    <span class="comment">//查找匹配位置</span></span><br><span class="line">    matcher.find();</span><br><span class="line">    System.out.println(<span class="string">"当前位置:"</span>+matcher.start());</span><br><span class="line">    <span class="comment">//使用reset方法重置匹配位置</span></span><br><span class="line">    matcher.reset();</span><br><span class="line">    <span class="comment">//第一次find匹配以及匹配的目标和匹配的起始位置</span></span><br><span class="line">    System.out.println(<span class="string">"matcher.find()返回:"</span>+matcher.find());</span><br><span class="line">    System.out.println(<span class="string">"捕获所有匹配的到子串:"</span>+matcher.group()+<span class="string">",位置:"</span>+matcher.start());</span><br><span class="line">    <span class="comment">//第二次find匹配以及匹配的目标和匹配的起始位置</span></span><br><span class="line">    System.out.println(<span class="string">"matcher.find()返回:"</span>+matcher.find());</span><br><span class="line">    System.out.println(<span class="string">"捕获到子串:"</span>+matcher.group()+<span class="string">",位置:"</span>+matcher.start());</span><br><span class="line">    System.out.println(<span class="string">"#####################################################"</span>);</span><br><span class="line">    <span class="comment">//第一次lookingAt匹配以及匹配的目标和匹配的起始位置</span></span><br><span class="line">    System.out.println(<span class="string">"matcher.lookingAt()返回:"</span>+matcher.lookingAt());</span><br><span class="line">    System.out.println(<span class="string">"捕获所有匹配的子串:"</span>+matcher.group()+<span class="string">",位置:"</span>+matcher.start());</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//第二次lookingAt匹配以及匹配的目标和匹配的起始位置</span></span><br><span class="line">    System.out.println(<span class="string">"matcher.lookingAt()返回:"</span>+matcher.lookingAt());</span><br><span class="line">    System.out.println(<span class="string">"捕获所有匹配的子串:"</span>+matcher.group()+<span class="string">",位置:"</span>+matcher.start());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>测试结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">待匹配字符序列:123-34345-234-00</span><br><span class="line">正则表达式:\d&#123;3,5&#125;</span><br><span class="line">matcher.matches()返回:false</span><br><span class="line">当前位置:4</span><br><span class="line">matcher.find()返回:true</span><br><span class="line">捕获所有匹配的到子串:123,位置:0</span><br><span class="line">matcher.find()返回:true</span><br><span class="line">捕获到子串:34345,位置:4</span><br><span class="line">#####################################################</span><br><span class="line">matcher.lookingAt()返回:true</span><br><span class="line">捕获所有匹配的子串:123,位置:0</span><br><span class="line">matcher.lookingAt()返回:true</span><br><span class="line">捕获所有匹配的子串:123,位置:0</span><br></pre></td></tr></table></figure><h2 id="替换方法"><a href="#替换方法" class="headerlink" title="替换方法"></a>替换方法</h2><p>api看的我有点晕头转向，个人总结如下。<br>|序号|方法|描述|<br>|-|-|-|<br>|1|<code>public String replaceAll(String replacement)</code>|用<code>replacement</code>替换正则表达式匹配到的所有子串|<br>|2|<code>public String replaceFirst(String replacement)</code>|用<code>replacement</code>替换正则表达式匹配到的第一个子串|<br>|3|<code>public Matcher appendReplacement(StringBuffer sb, String replacement)</code>|实现非终端添加和替换步骤。|<br>|4|<code>public StringBuffer appendTail(StringBuffer sb)</code>|实现终端添加和替换步骤。|<br>|5|<code>public static String quoteReplacement(String s)</code>|返回指定字符串的字面替换字符串。这个方法返回一个字符串，就像传递给Matcher类的appendReplacement 方法一个字面字符串一样工作。|</p><h3 id="replaceFirst-和-replaceAll-方法"><a href="#replaceFirst-和-replaceAll-方法" class="headerlink" title="replaceFirst 和 replaceAll 方法"></a>replaceFirst 和 replaceAll 方法</h3><p><code>replaceFirst</code> 和 <code>replaceAll</code> 方法用来替换匹配正则表达式的文本。不同的是，<code>replaceFirst</code> 替换首次匹配的子串，<code>replaceAll</code> 替换所有匹配的子串。<br>看下面的例子：<br></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testReplaceAll</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    String regex = <span class="string">"dog"</span>;</span><br><span class="line">    String input = <span class="string">"The dog says meow. "</span> + <span class="string">"All dogs say meow."</span>;</span><br><span class="line">    String replace = <span class="string">"cat"</span>;</span><br><span class="line">    Pattern p = Pattern.compile(regex);</span><br><span class="line"><span class="comment">//  get  a  matcher  object</span></span><br><span class="line">    Matcher m = p.matcher(input);</span><br><span class="line">    input = m.replaceAll(replace);</span><br><span class="line">    System.out.println(input);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>运行结果：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">The cat says meow. All cats say meow.</span><br></pre></td></tr></table></figure><p></p><h3 id="appendReplacement-和-appendTail-方法"><a href="#appendReplacement-和-appendTail-方法" class="headerlink" title="appendReplacement 和 appendTail 方法"></a>appendReplacement 和 appendTail 方法</h3><p>参考：<a href="https://blog.csdn.net/key_xyes/article/details/78705181" target="_blank" rel="noopener">https://blog.csdn.net/key_xyes/article/details/78705181</a></p><ul><li><code>appendReplacement(sb,replacement)</code>方法中：<code>sb</code>是一个<code>StringBuffer</code>，<code>replacement</code>用于替换的字符串，这个方法会把匹配到的子串替换为<code>replacement</code>，并且把从上次替换的位置到这次替换位置之间的字符串也拿到，然后，加上这次替换后的结果一起追加到<code>StringBuffer</code>里（假如这次替换是第一次替换，那就是只追加替换后的字符串啦）。</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Matcher <span class="title">appendReplacement</span><span class="params">(StringBuffer sb,String replacement)</span></span></span><br></pre></td></tr></table></figure><p><code>appendTail(StringBuffer sb)</code>方法:这个方法是把原来文本中最后一次匹配到的内容之后的字符串追加到<code>StringBuffer</code>中。</p><p>两个方法一起使用就可以达到所有替换或者替换第一个：</p><p>全部替换：<br></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//find()方法向前查找匹配的子串</span></span><br><span class="line"><span class="keyword">while</span>(m.find())</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//获取位置在匹配子串之前的文本strbefore，获取匹配的子串strmacther，然后把匹配的子串strmacther替换为replacement，</span></span><br><span class="line">    <span class="comment">//然后(strbefore+replacement)追加到StringBuffer中</span></span><br><span class="line">    m.appendReplacement(sb,replacement);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//把文本中没有匹配的剩下的文本也加入到StringBuffer中</span></span><br><span class="line">m.appendTail(sb);</span><br></pre></td></tr></table></figure><p></p><p>替换第一个：<br></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (matcher.find())</span><br><span class="line">&#123;</span><br><span class="line">    matcher.appendReplacement(sb, replacement);</span><br><span class="line">&#125;</span><br><span class="line">matcher.appendTail(sb);</span><br></pre></td></tr></table></figure><p></p><p><strong>实例1：全部替换</strong><br></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testAppendReplace_Tail</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Pattern p = Pattern.compile(<span class="string">"a"</span>);</span><br><span class="line">    String text=<span class="string">"before_ONEa_TWOa_THREEa_End"</span>;</span><br><span class="line">    Matcher m = p.matcher(text);</span><br><span class="line">    StringBuffer sb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">    <span class="keyword">while</span> (m.find())</span><br><span class="line">    &#123;</span><br><span class="line"><span class="comment">//      获取位置在匹配子串之前的文本strbefore，获取匹配的子串strmacther，然后把匹配的子串strmacther替换为replacement，</span></span><br><span class="line"><span class="comment">//      然后之前的文本和替换文本一起(strbefore+replacement)追加到StringBuffer中</span></span><br><span class="line">        System.out.println(<span class="string">"替换之前StringBuffer中的内容--&gt;"</span> + sb);</span><br><span class="line">        m.appendReplacement(sb, <span class="string">"A"</span>);</span><br><span class="line">        System.out.println(<span class="string">"替换之后StringBuffer中的内容--&gt;"</span> + sb);</span><br><span class="line">        System.out.println(<span class="string">"---------------------------------------------"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//原来文本中把上次匹配结束位置之后剩下的字符串也写到StringBuffer中</span></span><br><span class="line">    System.out.println(<span class="string">"#######################################"</span>);</span><br><span class="line">    System.out.println(<span class="string">"替换之前StringBuffer中的内容--&gt;"</span> + sb);</span><br><span class="line">    m.appendTail(sb);</span><br><span class="line">    System.out.println(<span class="string">"替换之后StringBuffer中的内容--&gt;"</span> + sb);</span><br><span class="line">    System.out.println(<span class="string">"替换之前的文本:"</span>+text);</span><br><span class="line">    System.out.println(<span class="string">"全部替换之后的:"</span> + sb);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>运行结果：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">替换之前StringBuffer中的内容--&gt;</span><br><span class="line">替换之后StringBuffer中的内容--&gt;before_ONEA</span><br><span class="line">---------------------------------------------</span><br><span class="line">替换之前StringBuffer中的内容--&gt;before_ONEA</span><br><span class="line">替换之后StringBuffer中的内容--&gt;before_ONEA_TWOA</span><br><span class="line">---------------------------------------------</span><br><span class="line">替换之前StringBuffer中的内容--&gt;before_ONEA_TWOA</span><br><span class="line">替换之后StringBuffer中的内容--&gt;before_ONEA_TWOA_THREEA</span><br><span class="line">---------------------------------------------</span><br><span class="line">#######################################</span><br><span class="line">替换之前StringBuffer中的内容--&gt;before_ONEA_TWOA_THREEA</span><br><span class="line">替换之后StringBuffer中的内容--&gt;before_ONEA_TWOA_THREEA_End</span><br><span class="line">替换之前的文本:before_ONEa_TWOa_THREEa_End</span><br><span class="line">全部替换之后的:before_ONEA_TWOA_THREEA_End</span><br></pre></td></tr></table></figure><p></p><p><strong>分析：</strong><br><strong>while语句：</strong></p><ul><li><p>第一次替换:sb中是没有内容的，find()方法匹配到before_ONE<code>a</code>_TWOa_THREEa_End,这个时候，获取匹配文本前面的字符串<code>before_NO</code>，然后把匹配文本<code>a</code>替换成<code>A</code>,前面的字符串<code>before_NO</code>和替换文本<code>A</code>组成<code>before_NOA</code>追加到StringBuffer中。</p></li><li><p>第二次替换:sb中的内容为<code>before_NOA</code>,find()方法匹配到before_ONEa_TWO<code>a</code>_THREEa_End，同样获取前面没有匹配的文本<code>_TWO</code>(做法是获取从find()方法上次结束的位置,到这次find()方法开始位置之间的字符串：before_ONEa<code>_TWO</code>a_THREEa_End),然后把<code>a</code>替换成<code>A</code>,这样组成新的文本呢<code>_TWOA</code>,追加到StringBuffer中，这样就形成<code>before_NOA_TWOA</code></p></li><li><p>find()方法会一直向前匹配子串，然后替换,如此类推，直到所有的替换完成</p></li></ul><p>因为原来文本中还有剩下的没有匹配的内容，before_ONEa_TWOa_THREEa<code>_End</code>，<br>使用m.appendTail(sb);把这剩下的内容<code>_End</code>也追加到StringBuffer中，这样就实现全部替换了。</p><p><strong>实例2：替换第一次</strong><br></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testAppendReplace_TailFrist</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Pattern p = Pattern.compile(<span class="string">"a"</span>);</span><br><span class="line">    String text=<span class="string">"before_ONEa_TWOa_THREEa_End"</span>;</span><br><span class="line">    Matcher m = p.matcher(text);</span><br><span class="line">    StringBuffer sb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">    <span class="keyword">if</span>(m.find())</span><br><span class="line">    &#123;</span><br><span class="line"><span class="comment">//      获取匹配子串之前的文本strbefore，获取匹配的子串strmacther，然后把匹配的子串strmacther替换为replacement，</span></span><br><span class="line"><span class="comment">//      然后(strbefore+replacement)追加到StringBuffer中</span></span><br><span class="line">        System.out.println(<span class="string">"替换之前StringBuffer中的内容--&gt;"</span> + sb);</span><br><span class="line">        m.appendReplacement(sb, <span class="string">"A"</span>);</span><br><span class="line">        System.out.println(<span class="string">"替换之后StringBuffer中的内容--&gt;"</span> + sb);</span><br><span class="line">        System.out.println(<span class="string">"---------------------------------------------"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//原来文本中把上次匹配结束位置之后剩下的字符串也写到StringBuffer中</span></span><br><span class="line">    System.out.println(<span class="string">"#######################################"</span>);</span><br><span class="line">    System.out.println(<span class="string">"上述替换完成后StringBuffer中的内容------&gt;"</span> + sb);</span><br><span class="line">    m.appendTail(sb);</span><br><span class="line">    System.out.println(<span class="string">"加上文本中剩余子串后StringBuffer中的内容--&gt;"</span> + sb);</span><br><span class="line">    System.out.println(<span class="string">"替换之前的文本:"</span>+text);</span><br><span class="line">    System.out.println(<span class="string">"全部替换之后的:"</span> + sb);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>运行结果：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">替换之前StringBuffer中的内容--&gt;</span><br><span class="line">替换之后StringBuffer中的内容--&gt;before_ONEA</span><br><span class="line">---------------------------------------------</span><br><span class="line">#######################################</span><br><span class="line">上述替换完成后StringBuffer中的内容------&gt;before_ONEA</span><br><span class="line">加上文本中剩余子串后StringBuffer中的内容--&gt;before_ONEA_TWOa_THREEa_End</span><br><span class="line">替换之前的文本:before_ONEa_TWOa_THREEa_End</span><br><span class="line">全部替换之后的:before_ONEA_TWOa_THREEa_End</span><br></pre></td></tr></table></figure><p></p><p>这里我们只替换了第一次，before_ONE<code>a</code>_TWOa_THREEa_End,然后StringBuffer中处理完毕的文本为<code>before_ONEA</code>，未处理的文本为<code>_TWOa_THREEa_End</code>，最后调用m.appendTail(sb);把未处理的文本也追加入到StringBuffer中，处理完毕的文本为:<code>before_ONEA_TWOa_THREEa_End</code></p><h3 id="小结："><a href="#小结：" class="headerlink" title="小结："></a>小结：</h3><ul><li><code>find()</code>方法匹配子串的时候都会<strong>记下</strong>本次成功<strong>匹配子串的<code>开始位置</code>和<code>结束位置</code></strong></li><li><code>appendReplacement(sb</code>,<code>replacement)</code>方法先获取所有<code>从上次结束位置，到本次结束位置的所有字符串</code>，然后<code>替换其中匹配的部分</code>，最后追加到<code>sb</code>中。</li><li><code>appendReplacement(sb)</code>方法把结束位置到文本结尾的所有字符追加到<code>sb</code>中。</li><li>使用appendReplace()和appendTail()方法可以更加灵活的进行替换操作，注意要结合find()方法使用。</li></ul><p>本文链接: <a href="https://www.lansheng.net.cn/blog/4ea1809c/">Java正则表达式</a></p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://www.lansheng.net.cn/blog/aa025735/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="蓝生"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="蓝生的博客"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/blog/aa025735/" itemprop="url">Java正则表达式应用</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-08-06 18:24:40" itemprop="dateCreated datePublished" datetime="2018-08-06T18:24:40+08:00">2018-08-06</time> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2018-11-05 17:17:07" itemprop="dateModified" datetime="2018-11-05T17:17:07+08:00">2018-11-05</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java/Java-正则表达式/" itemprop="url" rel="index"><span itemprop="name">Java 正则表达式</span></a></span> </span><span class="post-comments-count"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><a href="/blog/aa025735/#comments" itemprop="discussionUrl"><span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/blog/aa025735/" itemprop="commentCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><p>参考：<a href="https://www.cnblogs.com/lzq198754/p/5780340.html" target="_blank" rel="noopener">https://www.cnblogs.com/lzq198754/p/5780340.html</a></p><h2 id="匹配验证-验证Email是否正确"><a href="#匹配验证-验证Email是否正确" class="headerlink" title="匹配验证-验证Email是否正确"></a>匹配验证-验证Email是否正确</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testEmail</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 要验证的字符串</span></span><br><span class="line">    String str = <span class="string">"service@xsoftlab.net"</span>;</span><br><span class="line">    <span class="comment">// 邮箱验证规则</span></span><br><span class="line"><span class="comment">//	    String regEx = "[a-zA-Z_]&#123;1,&#125;[0-9]&#123;0,&#125;@(([a-zA-z0-9]-*)&#123;1,&#125;\\.)&#123;1,3&#125;[a-zA-z\\-]&#123;1,&#125;";</span></span><br><span class="line">    String regEx = <span class="string">"[a-zA-Z_]+[0-9]*@(\\w*\\.)&#123;1,3&#125;[a-zA-z\\-]&#123;1,&#125;"</span>;</span><br><span class="line">    <span class="comment">// 编译正则表达式</span></span><br><span class="line">    Pattern pattern = Pattern.compile(regEx);</span><br><span class="line">    <span class="comment">// 忽略大小写的写法</span></span><br><span class="line">    <span class="comment">// Pattern pat = Pattern.compile(regEx, Pattern.CASE_INSENSITIVE);</span></span><br><span class="line">    Matcher matcher = pattern.matcher(str);</span><br><span class="line">    <span class="comment">// 字符串是否与正则表达式相匹配</span></span><br><span class="line">    <span class="keyword">boolean</span> rs = matcher.matches();</span><br><span class="line">    System.out.println(rs);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行结果：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">true</span><br></pre></td></tr></table></figure><p></p><h2 id="在字符串中查询字符或者字符串"><a href="#在字符串中查询字符或者字符串" class="headerlink" title="在字符串中查询字符或者字符串"></a>在字符串中查询字符或者字符串</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">public static void testFind()</span><br><span class="line">&#123;</span><br><span class="line">	// 要验证的字符串</span><br><span class="line">    String str = &quot;baike.xsoftlab.net&quot;;</span><br><span class="line">    // 正则表达式规则</span><br><span class="line">    String regEx = &quot;Baike.*&quot;;</span><br><span class="line">    // 编译正则表达式</span><br><span class="line">//	    Pattern pattern = Pattern.compile(regEx);</span><br><span class="line">    // 编译正则表达式忽略大小写的</span><br><span class="line">     Pattern pattern = Pattern.compile(regEx, Pattern.CASE_INSENSITIVE);</span><br><span class="line">    Matcher matcher = pattern.matcher(str);</span><br><span class="line">    // 查找字符串中是否有匹配正则表达式的字符/字符串</span><br><span class="line">    boolean rs = matcher.find();</span><br><span class="line">    System.out.println(rs);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行结果<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">true</span><br></pre></td></tr></table></figure><p></p><h2 id="3常用正则表达式"><a href="#3常用正则表达式" class="headerlink" title="3常用正则表达式"></a>3常用正则表达式</h2><table><thead><tr><th>规则</th><th>正则表达式语法</th></tr></thead><tbody><tr><td>一个或多个汉字</td><td>^[\u0391-\uFFE5]+$</td></tr><tr><td>邮政编码</td><td>^[1-9]\d{5}$</td></tr><tr><td>QQ号码</td><td>^[1-9]\d{4,10}$</td></tr><tr><td>邮箱</td><td>^[a-zA-Z_]{1,}[0-9]{0,}@(([a-zA-z0-9]-*){1,}.){1,3}[a-zA-z-]{1,}$</td></tr><tr><td>用户名（字母开头 + 数字/字母/下划线）</td><td>^[A-Za-z][A-Za-z1-9_-]+$</td></tr><tr><td>手机号码</td><td>^1[3&#124;4&#124;5&#124;8][0-9]\d{8}$</td></tr><tr><td>URL</td><td>^((http&#124;https)://)?([\w-]+.)+[\w-]+(/[\w-./?%&amp;=]*)?$</td></tr><tr><td>18位身份证号</td><td>^(\d{6})(18&#124;19&#124;20)?(\d{2})([01]\d)([0123]\d)(\d{3})(\d&#124;X&#124;x)?$</td></tr></tbody></table><p><a href="https://blog.csdn.net/u013553529/article/details/51024733" target="_blank" rel="noopener">表格中如何加入竖线</a></p><h1 id="JAVA正则表达式练习题（IP地址排序、检验email地址）"><a href="#JAVA正则表达式练习题（IP地址排序、检验email地址）" class="headerlink" title="JAVA正则表达式练习题（IP地址排序、检验email地址）"></a>JAVA正则表达式练习题（IP地址排序、检验email地址）</h1><p>原文：<a href="https://blog.csdn.net/sinat_36713319/article/details/53463120" target="_blank" rel="noopener">https://blog.csdn.net/sinat_36713319/article/details/53463120</a></p><h2 id="删除重复字符"><a href="#删除重复字符" class="headerlink" title="删除重复字符"></a>删除重复字符</h2><p>1、需求： 将“我我我、、、我我、、我要、我要要、、、要要要、、要要、、学学学、、、、学学编、、、学编编编、、编编编程、、程程”还原成：我要学编程<br></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testRaplaceDuplicateWord</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    String temp = <span class="string">"我我我、、、我我、、我要、要要、、、要要要、、要要、、学学学、、、、学学编、、、编编编、、编编编程、、程程"</span>;</span><br><span class="line">    temp = temp.replaceAll(<span class="string">"(、+)"</span>, <span class="string">""</span>);</span><br><span class="line">    System.out.println(temp);</span><br><span class="line">    temp = temp.replaceAll(<span class="string">"(.)\\1+"</span>, <span class="string">"$1"</span>);</span><br><span class="line">    System.out.print(temp);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>来解释一下这个<code>(.)\\1+</code>正则表达还是的意思，</p><ul><li><code>(.)</code>:捕获一个任意字符</li><li><code>\1</code>反向引用,表示前面捕获的字符</li><li><code>+</code>表示前面的字符出现1此或多次<br>这句话的意思就是,匹配两个或者两个以上的重复的字符</li></ul><p>然后<code>$1</code>表示第一个捕获组中的内容，也就是捕获到的这个字符。<br>所以<code>temp.replaceAll(&quot;(.)\\1+&quot;, &quot;$1&quot;);</code>这句话的意思就是，把temp字符串中两个或者两个以上的重复字符替换成该字符本身，换句话说就是删除所有重复到的字符。</p><h2 id="对IP地址进行排序"><a href="#对IP地址进行排序" class="headerlink" title="对IP地址进行排序"></a>对IP地址进行排序</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">public static void sortIPAddress()</span><br><span class="line">&#123;</span><br><span class="line">	String temp = &quot;192.168.1.200 10.10.10.10 10.10.10.11 11.10.10.10 3.3.50.3 127.0.0.1&quot;;</span><br><span class="line">	// 对所有的数字全部都在前面补上两个0</span><br><span class="line">	temp = temp.replaceAll(&quot;(\\d+)&quot;, &quot;00$1&quot;);</span><br><span class="line">	System.out.println(&quot;ip地址:--&gt;&quot;+temp);</span><br><span class="line">	// 因为ip地址占3位(\d&#123;3&#125;)捕获后三位,</span><br><span class="line">	// 把多余的0删除掉</span><br><span class="line">	temp = temp.replaceAll(&quot;0+(\\d&#123;3&#125;)&quot;, &quot;$1&quot;);// 将ip地址补成同样位数</span><br><span class="line">	System.out.println(&quot;ip地址:--&gt;&quot;+temp);</span><br><span class="line">	// 用空格割</span><br><span class="line">	String[] str = temp.split(&quot; +&quot;);</span><br><span class="line">	// 排序从大到小排序</span><br><span class="line">	Arrays.sort(str);</span><br><span class="line">	System.out.println(&quot;从小到大排序:&quot;);</span><br><span class="line">	for (String string : str)</span><br><span class="line">	&#123;</span><br><span class="line">		System.out.println(string);</span><br><span class="line">	&#125;</span><br><span class="line">	System.out.println(&quot;去掉加上的辅助0&quot;);</span><br><span class="line">	for (String ips : str)</span><br><span class="line">		//删除多余的0</span><br><span class="line">		System.out.println(ips.replaceAll(&quot;0+(\\d+)&quot;, &quot;$1&quot;));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行结果：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">ip地址:--&gt;00192.00168.001.00200 0010.0010.0010.0010 0010.0010.0010.0011 0011.0010.0010.0010 003.003.0050.003 00127.000.000.001</span><br><span class="line">ip地址:--&gt;192.168.001.200 010.010.010.010 010.010.010.011 011.010.010.010 003.003.050.003 127.000.000.001</span><br><span class="line">从小到大排序:</span><br><span class="line">003.003.050.003</span><br><span class="line">010.010.010.010</span><br><span class="line">010.010.010.011</span><br><span class="line">011.010.010.010</span><br><span class="line">127.000.000.001</span><br><span class="line">192.168.001.200</span><br><span class="line">去掉加上的辅助0</span><br><span class="line">3.3.50.3</span><br><span class="line">10.10.10.10</span><br><span class="line">10.10.10.11</span><br><span class="line">11.10.10.10</span><br><span class="line">127.0.0.1</span><br><span class="line">192.168.1.20</span><br></pre></td></tr></table></figure><p></p><ul><li>首先来看<code>temp.replaceAll(&quot;(\\d+)&quot;, &quot;00$1&quot;);</code>这句，<code>(\\d+)</code>将捕获到<code>ip</code>地址中除了点号之外的所有数字串，因为ip地址每一位可以是1位数，2位数，3位数，这里先不管使用<code>00$1</code>进行替换，这样每一位就是3位数到5位数。</li><li><code>temp.replaceAll(&quot;0+(\\d{3})&quot;, &quot;$1&quot;);</code>这句，首先<code>\d{3}</code>表示正好匹配<code>3</code>位数，<code>0+</code>一个或者多个<code>0</code>，<code>0+(\\d{3})</code>这个表达式的意思就是，匹配多个0开头，然后后面正好有<code>3</code>位数，把这<code>3</code>位数捕获出来，<code>temp.replaceAll(&quot;0+(\\d{3})&quot;, &quot;$1&quot;);</code>这句话的意思就是捕获最后的3位数，然后用这<code>3</code>位数，<code>替换掉原来的3到5位的数</code></li><li>经过上面两步之后，所有的<code>ip</code>地址都会变成<code>3</code>位数表示的，不足的前面会补<code>0</code>，这样转换的好处就是可以方便的使用<code>Array.sort()</code>方法对这些字符串进行排序。</li><li>注意排序后的字符，都是我们<code>高位补0</code>后的<code>ip</code>地址这与平时的<code>ip</code>地址表示方式不同所以，要把高位的0去掉。</li><li><code>ips.replaceAll(&quot;0+(\\d+)&quot;, &quot;$1&quot;)</code>这句话实现去掉高位的<code>0</code>,高位的0不会被捕获到，高位的<code>0</code>不包含在捕获组<code>$1</code>,这样在进行替换的时候就等于删除了高位的<code>0</code></li></ul><h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><p><strong>使用替换进行删除或添加元素，就是<code>拿出来又放回去</code></strong>，如果少放了就相当于删除一部分了，如果多方了就是新增了一部分。</p><ul><li>替换删除，<code>以少换多</code>：我们匹配较多的字符，然后只捕获其中较少的一部分，再用捕获到的少量字符替换匹配的较多的字符，这样就等同于删除掉那些没有捕获的部分。这就好比从果篮里拿出几个水果，例如拿出苹果和香蕉，然后我再把苹果放回去，香蕉丢掉。这样果篮里的香蕉就没有了，相当于被删除掉了。</li><li>替换添加，<code>以多换少</code>：我么匹配较少的字符,并且捕获这些字符，然后捕获到的字符加上一些新的字符替换回去。这样等效于添加了字符。例如我现在只拿出雪梨，然后我变出一个芒果，然后雪梨和芒果一起放回果篮里，这样果篮里就多出了一个芒果，而雪梨还是原来的雪梨。</li></ul><p>本文链接: <a href="https://www.lansheng.net.cn/blog/aa025735/">Java正则表达式应用</a></p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://www.lansheng.net.cn/blog/a84bbd3e/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="蓝生"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="蓝生的博客"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/blog/a84bbd3e/" itemprop="url">从网页上复制表格生产markdown表格</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-08-06 15:47:54" itemprop="dateCreated datePublished" datetime="2018-08-06T15:47:54+08:00">2018-08-06</time> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2018-11-05 17:17:07" itemprop="dateModified" datetime="2018-11-05T17:17:07+08:00">2018-11-05</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java/Java-正则表达式/" itemprop="url" rel="index"><span itemprop="name">Java 正则表达式</span></a></span> </span><span class="post-comments-count"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><a href="/blog/a84bbd3e/#comments" itemprop="discussionUrl"><span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/blog/a84bbd3e/" itemprop="commentCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="需求分析"><a href="#需求分析" class="headerlink" title="需求分析"></a>需求分析</h2><p>例如我这里有一个表格：<br><img src="https://i.imgur.com/WqedYrX.png" alt=""><br>表格里的文本是可复制的，复制下来的文本如下。<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">序号 	方法 	描述</span><br><span class="line">1 	public URL(String spec) throws MalformedURLException 	根据 String 表示形式的地址创建 URL 对象。</span><br><span class="line">2 	public URL(String protocol,String host,int port,String file) throws MalformedURLException 	创建URL对象，并指定协议protocol，主机host，端口名称port，资源文件名file</span><br><span class="line">3 	public URLConnection openConnection() throws IOException 	返回一个 URLConnection 对象，它表示到 URL 所引用的远程对象的连接。</span><br><span class="line">4 	public final InputStream openStream() throws IOException 	打开到此 URL 的连接并返回一个用于从该连接读入的 InputStream</span><br></pre></td></tr></table></figure><p></p><p>现在需要，把这个复制下来的文本生成markdown表格。</p><h2 id="基本实现"><a href="#基本实现" class="headerlink" title="基本实现"></a>基本实现</h2><p>观察这个文本，我发现，每个单元格之间不多不少刚好有两个空白符，所以，只要发现有两个空白符的地方我就认为表格中单元格之间的边界。<br>代码如下所示：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">package regex.tools;</span><br><span class="line"></span><br><span class="line">import java.util.Scanner;</span><br><span class="line">import clipboard.util.SysClipboardUtil;</span><br><span class="line"></span><br><span class="line">public class MDtable</span><br><span class="line">&#123;</span><br><span class="line">	public static void main(String[] args)</span><br><span class="line">	&#123;</span><br><span class="line">		String text=SysClipboardUtil.getSysClipboardText();</span><br><span class="line">		System.out.println(text);</span><br><span class="line">		Scanner scanner=new Scanner(text);</span><br><span class="line">		String line;</span><br><span class="line">		String[] fragments;</span><br><span class="line">		System.out.println(&quot;-------------------------------------------&quot;);</span><br><span class="line">		boolean flag=true;</span><br><span class="line">		while(scanner.hasNextLine())</span><br><span class="line">		&#123;</span><br><span class="line">			line=scanner.nextLine();</span><br><span class="line">			//刚好两个的地方分割</span><br><span class="line">			fragments=line.split(&quot;\\s&#123;2&#125;&quot;);</span><br><span class="line">//			System.out.println(&quot;line:---&gt;&quot;);</span><br><span class="line">//			System.out.println(&quot;fragments:&quot;);</span><br><span class="line">			System.out.print(&quot;|&quot;);</span><br><span class="line">			for (String string : fragments)</span><br><span class="line">			&#123;</span><br><span class="line">				System.out.print(string+&quot;|&quot;);</span><br><span class="line">			&#125;</span><br><span class="line">			System.out.println();</span><br><span class="line">			//打印表格对其方式,使用默认对齐方式</span><br><span class="line">			if(flag)</span><br><span class="line">			&#123;</span><br><span class="line">				System.out.print(&quot;|&quot;);</span><br><span class="line">				for(int i=0;i&lt;fragments.length;i++)</span><br><span class="line">				&#123;</span><br><span class="line">					System.out.print(&quot;-|&quot;);</span><br><span class="line">				&#125;</span><br><span class="line">				System.out.println();</span><br><span class="line">				flag=false;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>复制表格中的文字<br><img src="https://i.imgur.com/TNm26e9.png" alt=""><br>然后运行上面的代码，运行结果如下。<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">序号 	方法 	描述</span><br><span class="line">1 	public URL(String spec) throws MalformedURLException 	根据 String 表示形式的地址创建 URL 对象。</span><br><span class="line">2 	public URL(String protocol,String host,int port,String file) throws MalformedURLException 	创建URL对象，并指定协议protocol，主机host，端口名称port，资源文件名file</span><br><span class="line">3 	public URLConnection openConnection() throws IOException 	返回一个 URLConnection 对象，它表示到 URL 所引用的远程对象的连接。</span><br><span class="line">4 	public final InputStream openStream() throws IOException 	打开到此 URL 的连接并返回一个用于从该连接读入的 InputStream</span><br><span class="line">-------------------------------------------</span><br><span class="line">|序号|方法|描述|</span><br><span class="line">|-|-|-|</span><br><span class="line">|1|public URL(String spec) throws MalformedURLException|根据 String 表示形式的地址创建 URL 对象。|</span><br><span class="line">|2|public URL(String protocol,String host,int port,String file) throws MalformedURLException|创建URL对象，并指定协议protocol，主机host，端口名称port，资源文件名file|</span><br><span class="line">|3|public URLConnection openConnection() throws IOException|返回一个 URLConnection 对象，它表示到 URL 所引用的远程对象的连接。|</span><br><span class="line">|4|public final InputStream openStream() throws IOException|打开到此 URL 的连接并返回一个用于从该连接读入的 InputStream|</span><br></pre></td></tr></table></figure><p></p><h3 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h3><p>把markdown表格代码粘贴到markdown文档中，效果如下。</p><table><thead><tr><th>序号</th><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>1</td><td>public URL(String spec) throws MalformedURLException</td><td>根据 String 表示形式的地址创建 URL 对象。</td></tr><tr><td>2</td><td>public URL(String protocol,String host,int port,String file) throws MalformedURLException</td><td>创建URL对象，并指定协议protocol，主机host，端口名称port，资源文件名file</td></tr><tr><td>3</td><td>public URLConnection openConnection() throws IOException</td><td>返回一个 URLConnection 对象，它表示到 URL 所引用的远程对象的连接。</td></tr><tr><td>4</td><td>public final InputStream openStream() throws IOException</td><td>打开到此 URL 的连接并返回一个用于从该连接读入的 InputStream</td></tr></tbody></table><p>可以看到这样就很容易的复制一个表格了。</p><h2 id="代码优化"><a href="#代码优化" class="headerlink" title="代码优化"></a>代码优化</h2><h3 id="Java复制网上表格的方法"><a href="#Java复制网上表格的方法" class="headerlink" title="Java复制网上表格的方法"></a>Java复制网上表格的方法</h3><p>把上面的代码封装成方法：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 生成markdown表格。</span><br><span class="line"> * @param text 复制的表格文字</span><br><span class="line"> * @return markdown表格代码</span><br><span class="line"> */</span><br><span class="line">public static String toMarkdownTable(String text)</span><br><span class="line">&#123;</span><br><span class="line">	StringBuilder sBuider=new StringBuilder();</span><br><span class="line">	Scanner scanner=new Scanner(text);</span><br><span class="line">	String line;</span><br><span class="line">	String[] fragments;</span><br><span class="line">	boolean flag=true;</span><br><span class="line">	while(scanner.hasNextLine())</span><br><span class="line">	&#123;</span><br><span class="line">		line=scanner.nextLine();</span><br><span class="line">		//刚好两个的地方分割</span><br><span class="line">		fragments=line.split(&quot;\\s&#123;2&#125;&quot;);</span><br><span class="line">//			System.out.print(&quot;|&quot;);</span><br><span class="line">		sBuider.append(&quot;|&quot;);</span><br><span class="line">		for (String string : fragments)</span><br><span class="line">		&#123;</span><br><span class="line">//				System.out.print(string+&quot;|&quot;);</span><br><span class="line">			sBuider.append(string+&quot;|&quot;);</span><br><span class="line">		&#125;</span><br><span class="line">//			System.out.println();</span><br><span class="line">		sBuider.append(&quot;\n&quot;);</span><br><span class="line">		//打印表格对其方式,使用默认对齐方式</span><br><span class="line">		if(flag)</span><br><span class="line">		&#123;</span><br><span class="line">//				System.out.print(&quot;|&quot;);</span><br><span class="line">			sBuider.append(&quot;|&quot;);</span><br><span class="line">			for(int i=0;i&lt;fragments.length;i++)</span><br><span class="line">			&#123;</span><br><span class="line">//					System.out.print(&quot;-|&quot;);</span><br><span class="line">				sBuider.append(&quot;-|&quot;);</span><br><span class="line">			&#125;</span><br><span class="line">//				System.out.println();</span><br><span class="line">			sBuider.append(&quot;\n&quot;);</span><br><span class="line">			flag=false;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	return sBuider.toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><h3 id="调用方式"><a href="#调用方式" class="headerlink" title="调用方式"></a>调用方式</h3><p>调用：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args)</span><br><span class="line">&#123;</span><br><span class="line">	//从剪贴板获取文本</span><br><span class="line">	String text=SysClipboardUtil.getSysClipboardText();</span><br><span class="line">	//写回剪贴板</span><br><span class="line">	SysClipboardUtil.setSysClipboardText(toMarkdownTable(text));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><h3 id="运行结果"><a href="#运行结果" class="headerlink" title="运行结果"></a>运行结果</h3><p>控制台没有输出，markdown表格代码已经写到剪贴板中去了，不再粘贴，效果和上面的一致。</p><h3 id="依赖类："><a href="#依赖类：" class="headerlink" title="依赖类："></a>依赖类：</h3><p>依赖类：<a href="https://blog.csdn.net/qq_21808961/article/details/80671259" target="_blank" rel="noopener">clipboard.util.SysClipboardUtil</a></p><h3 id="完整的代码："><a href="#完整的代码：" class="headerlink" title="完整的代码："></a>完整的代码：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">package regex.tools;</span><br><span class="line"></span><br><span class="line">import java.util.Scanner;</span><br><span class="line">import clipboard.util.SysClipboardUtil;</span><br><span class="line"></span><br><span class="line">public class MDtable</span><br><span class="line">&#123;</span><br><span class="line">	public static void main(String[] args)</span><br><span class="line">	&#123;</span><br><span class="line">		// 从剪贴板获取文本</span><br><span class="line">		String text = SysClipboardUtil.getSysClipboardText();</span><br><span class="line">		// 写回剪贴板</span><br><span class="line">		SysClipboardUtil.setSysClipboardText(toMarkdownTable(text));</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 生成markdown表格。</span><br><span class="line">	 * </span><br><span class="line">	 * @param text</span><br><span class="line">	 *            复制的表格文字</span><br><span class="line">	 * @return markdown表格代码</span><br><span class="line">	 */</span><br><span class="line">	public static String toMarkdownTable(String text)</span><br><span class="line">	&#123;</span><br><span class="line">		StringBuilder sBuider = new StringBuilder();</span><br><span class="line">		Scanner scanner = new Scanner(text);</span><br><span class="line">		String line;</span><br><span class="line">		String[] fragments;</span><br><span class="line">		// System.out.println(&quot;-------------------------------------------&quot;);</span><br><span class="line">		boolean flag = true;</span><br><span class="line">		while (scanner.hasNextLine())</span><br><span class="line">		&#123;</span><br><span class="line">			line = scanner.nextLine();</span><br><span class="line">			// 刚好两个的地方分割</span><br><span class="line">			fragments = line.split(&quot;\\s&#123;2&#125;&quot;);</span><br><span class="line">			// System.out.println(&quot;line:---&gt;&quot;);</span><br><span class="line">			// System.out.println(&quot;fragments:&quot;);</span><br><span class="line">			// System.out.print(&quot;|&quot;);</span><br><span class="line">			sBuider.append(&quot;|&quot;);</span><br><span class="line">			for (String string : fragments)</span><br><span class="line">			&#123;</span><br><span class="line">				// System.out.print(string+&quot;|&quot;);</span><br><span class="line">				sBuider.append(string + &quot;|&quot;);</span><br><span class="line">			&#125;</span><br><span class="line">			// System.out.println();</span><br><span class="line">			sBuider.append(&quot;\n&quot;);</span><br><span class="line">			// 打印表格对其方式,使用默认对齐方式</span><br><span class="line">			if (flag)</span><br><span class="line">			&#123;</span><br><span class="line">				// System.out.print(&quot;|&quot;);</span><br><span class="line">				sBuider.append(&quot;|&quot;);</span><br><span class="line">				for (int i = 0; i &lt; fragments.length; i++)</span><br><span class="line">				&#123;</span><br><span class="line">					// System.out.print(&quot;-|&quot;);</span><br><span class="line">					sBuider.append(&quot;-|&quot;);</span><br><span class="line">				&#125;</span><br><span class="line">				// System.out.println();</span><br><span class="line">				sBuider.append(&quot;\n&quot;);</span><br><span class="line">				flag = false;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		return sBuider.toString();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>本文链接: <a href="https://www.lansheng.net.cn/blog/a84bbd3e/">从网页上复制表格生产markdown表格</a></p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://www.lansheng.net.cn/blog/728ca7fc/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="蓝生"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="蓝生的博客"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/blog/728ca7fc/" itemprop="url">MarkdownPad 导出html带侧边栏目录</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-08-06 01:09:47" itemprop="dateCreated datePublished" datetime="2018-08-06T01:09:47+08:00">2018-08-06</time> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2018-11-05 17:17:08" itemprop="dateModified" datetime="2018-11-05T17:17:08+08:00">2018-11-05</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/markdown使用/" itemprop="url" rel="index"><span itemprop="name">markdown使用</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/markdown使用/markdown编辑器/" itemprop="url" rel="index"><span itemprop="name">markdown编辑器</span></a></span> </span><span class="post-comments-count"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><a href="/blog/728ca7fc/#comments" itemprop="discussionUrl"><span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/blog/728ca7fc/" itemprop="commentCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><p>参考：<a href="https://blog.csdn.net/zwx_lucky/article/details/53998930" target="_blank" rel="noopener">https://blog.csdn.net/zwx_lucky/article/details/53998930</a><br>原文给的代码如下：个人觉得不足的地方是没有自动编号，虽然使用了缩进但是父子标题看起来不是很明显，我在此基础加上了点代码<a href="#Mark">实现在标题前面自动编号</a>。<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--bookmark --&gt;</span><br><span class="line">&lt;script src=&quot;http://code.jquery.com/jquery-1.7.2.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=&quot;http://yandex.st/highlightjs/6.2/highlight.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;script&gt;hljs.initHighlightingOnLoad();&lt;/script&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line"> $(document).ready(function()&#123;</span><br><span class="line"></span><br><span class="line">      $(&quot;h1,h2,h3,h4,h5,h6&quot;).each(function(i,item)&#123;</span><br><span class="line">        var tag = $(item).get(0).localName;</span><br><span class="line">        $(item).attr(&quot;id&quot;,&quot;wow&quot;+i);</span><br><span class="line">        $(&quot;#category&quot;).append(&apos;&lt;a class=&quot;new&apos;+tag+&apos;&quot; href=&quot;#wow&apos;+i+&apos;&quot;&gt;&apos;+$(this).text()+&apos;&lt;/a&gt;&lt;/br&gt;&apos;);</span><br><span class="line">        $(&quot;.newh1&quot;).css(&quot;margin-left&quot;,0);</span><br><span class="line">        $(&quot;.newh2&quot;).css(&quot;margin-left&quot;,20);</span><br><span class="line">        $(&quot;.newh3&quot;).css(&quot;margin-left&quot;,40);</span><br><span class="line">        $(&quot;.newh4&quot;).css(&quot;margin-left&quot;,60);</span><br><span class="line">        $(&quot;.newh5&quot;).css(&quot;margin-left&quot;,80);</span><br><span class="line">      	$(&quot;.newh6&quot;).css(&quot;margin-left&quot;,100);</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">       $(&quot;.book-body&quot;).html($(&quot;.book-body&quot;).nextAll())</span><br><span class="line"> &#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style type=&quot;text/css&quot;&gt;</span><br><span class="line"></span><br><span class="line">@media (max-width: 1600px) &#123;</span><br><span class="line">    .book-body &#123;</span><br><span class="line">       padding-left:200px;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@media (max-width: 1400px) &#123;</span><br><span class="line">    .book-body &#123;</span><br><span class="line">       padding-left:200px;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@media (max-width: 1200px) &#123;</span><br><span class="line">    .book-body &#123;</span><br><span class="line">       padding-left:300px;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">@media (max-width: 700px) &#123;</span><br><span class="line">    .book-body &#123;</span><br><span class="line">       padding-left:0px;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">@media (min-width: 600px) &#123;</span><br><span class="line">    #category&#123;</span><br><span class="line">        position: fixed;</span><br><span class="line">        left: 20px;</span><br><span class="line">        top:0;</span><br><span class="line">        height: 100%;</span><br><span class="line">        overflow-y: scroll;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@media (-webkit-max-device-pixel-ratio: 1) &#123;</span><br><span class="line">    ::-webkit-scrollbar-track-piece &#123;</span><br><span class="line">        background-color:#FFF</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ::-webkit-scrollbar &#123;</span><br><span class="line">        width: 6px;</span><br><span class="line">        height: 6px</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ::-webkit-scrollbar-thumb &#123;</span><br><span class="line">        background-color: #c2c2c2;</span><br><span class="line">        background-clip: padding-box;</span><br><span class="line">        min-height: 28px</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ::-webkit-scrollbar-thumb:hover &#123;</span><br><span class="line">        background-color: #A0A0A0</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;a href=&quot;javascript:scroll(0,0)&quot; style=&quot;position:fixed;float:right;right:32px;top:70%&quot;&gt;返回顶部&lt;/a&gt; </span><br><span class="line">&lt;div style=&quot;width:20%;&quot; id=&quot;category&quot; class=&quot;book-summary&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;div class=&quot;book-body&quot;&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p></p><p>实现方式2：缺点是书签在顶部，不好快速跳转<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">  document.addEventListener(&quot;DOMContentLoaded&quot;, function() &#123;</span><br><span class="line">        var div1 = document.createElement(&quot;div&quot;);</span><br><span class="line">        div1.style.cssText = &quot;clear:both&quot;;</span><br><span class="line">        // 生成目录列表</span><br><span class="line">        var outline = document.createElement(&quot;div&quot;);</span><br><span class="line">        outline.setAttribute(&quot;id&quot;, &quot;outline-list&quot;);</span><br><span class="line">        outline.style.cssText = &quot;border:solid 1px #ccc; background:#eee; min-width:200px;padding:4px 10px;&quot;;</span><br><span class="line">        </span><br><span class="line">        var ele_p = document.createElement(&quot;p&quot;);</span><br><span class="line">        ele_p.style.cssText = &quot;text-align: left; margin: 0;&quot;;</span><br><span class="line">        outline.appendChild(ele_p);</span><br><span class="line">        </span><br><span class="line">        var ele_span = document.createElement(&quot;span&quot;);</span><br><span class="line">        // ele_span.style.cssText = &quot;float: left;&quot;;</span><br><span class="line">        var ele_text=document.createTextNode(&quot;目录&quot;);</span><br><span class="line">        ele_span.appendChild(ele_text);</span><br><span class="line">        </span><br><span class="line">        var ele_a = document.createElement(&quot;a&quot;);</span><br><span class="line">        ele_a.appendChild(document.createTextNode(&quot;[+]&quot;));</span><br><span class="line">        ele_a.setAttribute(&quot;href&quot;, &quot;#&quot;);</span><br><span class="line">        ele_a.setAttribute(&quot;onclick&quot;, &quot;javascript:return openct(this);&quot;);</span><br><span class="line">        ele_a.setAttribute(&quot;title&quot;, &quot;点击打开目录&quot;);</span><br><span class="line"> </span><br><span class="line">        ele_span.appendChild(ele_a);</span><br><span class="line">        ele_p.appendChild(ele_span);</span><br><span class="line"> </span><br><span class="line">        var ele_ol = document.createElement(&quot;ol&quot;);</span><br><span class="line">        ele_ol.style.cssText = &quot;display:none;margin-left:14px;padding-left:14px;line-height:160%;&quot;;</span><br><span class="line">        ele_ol.setAttribute(&quot;id&quot;, &quot;outline_ol&quot;);</span><br><span class="line">        outline.appendChild(ele_ol);</span><br><span class="line">        var div1 = document.createElement(&quot;div&quot;);</span><br><span class="line">        div1.style.cssText = &quot;clear:both&quot;;</span><br><span class="line"> </span><br><span class="line">        document.body.insertBefore(outline, document.body.childNodes[0]);</span><br><span class="line">        // 获取所有标题</span><br><span class="line">        var headers = document.querySelectorAll(&apos;h1,h2,h3,h4,h5,h6&apos;);</span><br><span class="line">        if (headers.length &lt; 2)</span><br><span class="line">          return;</span><br><span class="line"> </span><br><span class="line">        // -----</span><br><span class="line">        var old_h = 0, ol_cnt = 0;</span><br><span class="line">        // -----</span><br><span class="line">        </span><br><span class="line">        for (var i = 0; i &lt; headers.length; i++) &#123;</span><br><span class="line">          </span><br><span class="line">          var ele_ols = null;</span><br><span class="line">            // 找出它是H几，为后面的有序列表做准备</span><br><span class="line">            var header = headers[i];</span><br><span class="line">            header.setAttribute(&quot;id&quot;, &quot;t&quot; + i + header.tagName);</span><br><span class="line">            var h = parseInt(header.tagName.substr(1), 10);</span><br><span class="line">            // -----</span><br><span class="line">            if (!old_h)&#123;</span><br><span class="line">              old_h = h;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            if (h &gt; old_h) &#123;</span><br><span class="line">              ele_ols = document.createElement(&quot;ol&quot;);</span><br><span class="line">              var ele_Current = ele_ol;</span><br><span class="line">              if(ele_Current &amp;&amp; ol_cnt &gt; 0)&#123;</span><br><span class="line">                var temp = ol_cnt;</span><br><span class="line">                while(temp &gt; 0)&#123;</span><br><span class="line">                  ele_Current = ele_Current.lastChild;</span><br><span class="line">                  temp--;</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">              ele_Current.lastChild.appendChild(ele_ols);</span><br><span class="line">              ol_cnt++;</span><br><span class="line">            &#125; else if (h &lt; old_h &amp;&amp; ol_cnt &gt; 0) &#123;</span><br><span class="line">              if (h == 1) &#123;</span><br><span class="line">                while (ol_cnt &gt; 0) &#123;</span><br><span class="line">                  ol_cnt--;</span><br><span class="line">                &#125;</span><br><span class="line">              &#125; else &#123;</span><br><span class="line">                ele_ols = document.createElement(&quot;ol&quot;);</span><br><span class="line">                var ele_Current = ele_ol;</span><br><span class="line">                if(ele_Current &amp;&amp; ol_cnt &gt; 0)&#123;</span><br><span class="line">                  var temp = ol_cnt;</span><br><span class="line">                  while(temp &gt; 1)&#123;</span><br><span class="line">                    ele_Current = ele_Current.lastChild;</span><br><span class="line">                    temp--;</span><br><span class="line">                  &#125;</span><br><span class="line">                &#125;</span><br><span class="line">              ele_Current.appendChild(ele_ols);</span><br><span class="line"> </span><br><span class="line">              ol_cnt--;</span><br><span class="line">            &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            if (h == 1) &#123;</span><br><span class="line">              while (ol_cnt &gt; 0) &#123;</span><br><span class="line">                ol_cnt--;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            old_h = h;</span><br><span class="line">            // -----</span><br><span class="line">            if (ele_ols)&#123;</span><br><span class="line">              ele_li = document.createElement(&quot;li&quot;)</span><br><span class="line">              ele_ols.appendChild(ele_li);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">              ele_li = document.createElement(&quot;li&quot;)</span><br><span class="line">              ele_ol.appendChild(ele_li);</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            var a = document.createElement(&quot;a&quot;);</span><br><span class="line">            // 为目录项设置链接</span><br><span class="line">            a.setAttribute(&quot;href&quot;, &quot;#t&quot; + i + header.tagName);</span><br><span class="line">            // 目录项文本</span><br><span class="line">            a.innerHTML = header.textContent;</span><br><span class="line"> </span><br><span class="line">            </span><br><span class="line">            ele_li.appendChild(a);</span><br><span class="line">          &#125;</span><br><span class="line">          // -----</span><br><span class="line">          while (ol_cnt &gt; 0) &#123;</span><br><span class="line">            ol_cnt--;</span><br><span class="line">          &#125;</span><br><span class="line">          // -----</span><br><span class="line"> </span><br><span class="line">        &#125;);</span><br><span class="line">// 代开和关闭目录的函数</span><br><span class="line">function openct(e) &#123;</span><br><span class="line">  if (e.innerHTML == &apos;[+]&apos;) &#123;</span><br><span class="line">    // createTextNode</span><br><span class="line">    e.setAttribute(&apos;title&apos;, &apos;收起&apos;);</span><br><span class="line">    e.innerHTML = &apos;[-]&apos;;</span><br><span class="line">    var element = document.getElementById(&quot;outline_ol&quot;);</span><br><span class="line">    element.style.cssText = &quot;margin-left:14px;padding-left:14px;line-height:160%;&quot;;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    e.setAttribute(&apos;title&apos;, &apos;展开&apos;);</span><br><span class="line">    e.innerHTML = &apos;[+]&apos;;</span><br><span class="line">    var element = document.getElementById(&quot;outline_ol&quot;);</span><br><span class="line">    element.style.cssText = &quot;display:none;margin-left:14px;padding-left:14px;line-height:160%;&quot;;</span><br><span class="line">  &#125;</span><br><span class="line">  e.blur();</span><br><span class="line">  return false;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p></p><h2 id="具体实现的步骤，和改进"><a href="#具体实现的步骤，和改进" class="headerlink" title="具体实现的步骤，和改进"></a>具体实现的步骤，和改进</h2><p>js忘光了，先用最弱智的方法来实现吧。<br>关键代码：这个代码有点脑残的。<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line">var h1Count=1,h1Addflag=0;</span><br><span class="line">var h2Count=1,h2Addflag=0;</span><br><span class="line">var h3Count=1,h3Addflag=0;</span><br><span class="line">var h4Count=1,h4Addflag=0;</span><br><span class="line">var h5Count=1,h5Addflag=0;</span><br><span class="line">var h6Count=1,h6Addflag=0;</span><br><span class="line">$(document).ready(function()</span><br><span class="line">&#123;</span><br><span class="line">	$(&quot;h1,h2,h3,h4,h5,h6&quot;).each(function(i,item)</span><br><span class="line">	&#123;</span><br><span class="line">		//获取标签的名字,h1,还是h2</span><br><span class="line">		var tag = $(item).get(0).localName;</span><br><span class="line">		if(tag===&quot;h1&quot;)</span><br><span class="line">		&#123;</span><br><span class="line">			if(h1Addflag===1)</span><br><span class="line">			&#123;</span><br><span class="line">				h1Count++;</span><br><span class="line">			&#125;</span><br><span class="line">			h1Addflag=1;</span><br><span class="line">			//初始化子节点</span><br><span class="line">			h2Count=1;h3Count=1;h4Count=1;h5Count=1;h6Count=1;</span><br><span class="line">			//初始化子节点标志刚开始不要加1</span><br><span class="line">			h2Addflag=0;h3Addflag=0;h4Addflag=0;h5Addflag=0;h6Addflag=0;</span><br><span class="line">			console.log(&quot;捕获到标签:%s&quot;,tag);</span><br><span class="line">			var text=$(item).get(0).innerHTML;</span><br><span class="line">			$(item).get(0).innerHTML=(h1Count)+&quot; &quot;+text;</span><br><span class="line">		&#125;</span><br><span class="line">		if(tag===&quot;h2&quot;)</span><br><span class="line">		&#123;</span><br><span class="line">			if(h2Addflag===1)</span><br><span class="line">			&#123;</span><br><span class="line">				h2Count++;</span><br><span class="line">			&#125;</span><br><span class="line">			h2Addflag=1;</span><br><span class="line">			//初始化子节点</span><br><span class="line">			h3Count=1;h4Count=1;h5Count=1;h6Count=1;</span><br><span class="line">			//初始化子节点标志刚开始不要加1</span><br><span class="line">			h3Addflag=0;h4Addflag=0;h5Addflag=0;h6Addflag=0;</span><br><span class="line">			console.log(&quot;捕获到标签:%s&quot;,tag);</span><br><span class="line">			var text=$(item).get(0).innerHTML;</span><br><span class="line">			$(item).get(0).innerHTML=(h1Count)+&quot;.&quot;+(h2Count)+&quot; &quot;+text;</span><br><span class="line">		&#125;</span><br><span class="line">		if(tag===&quot;h3&quot;)</span><br><span class="line">		&#123;</span><br><span class="line">			if(h3Addflag===1)</span><br><span class="line">			&#123;</span><br><span class="line">				h3Count++;</span><br><span class="line">			&#125;</span><br><span class="line">			h3Addflag=1;</span><br><span class="line">			//初始化子节点</span><br><span class="line">			h4Count=1;h5Count=1;h6Count=1;</span><br><span class="line">			//初始化子节点标志刚开始不要加1</span><br><span class="line">			h4Addflag=0;h5Addflag=0;h6Addflag=0;</span><br><span class="line">			console.log(&quot;捕获到标签:%s&quot;,tag);</span><br><span class="line">			var text=$(item).get(0).innerHTML;</span><br><span class="line">			$(item).get(0).innerHTML=(h1Count)+&quot;.&quot;+(h2Count)+&quot;.&quot;+(h3Count)+&quot; &quot;+text;</span><br><span class="line">			</span><br><span class="line">		&#125;</span><br><span class="line">		if(tag===&quot;h4&quot;)</span><br><span class="line">		&#123;</span><br><span class="line">			if(h4Addflag===1)</span><br><span class="line">			&#123;</span><br><span class="line">				h4Count++;</span><br><span class="line">			&#125;</span><br><span class="line">			h4Addflag=1;</span><br><span class="line">			//初始化子节点</span><br><span class="line">			h5Count=1;h6Count=1;</span><br><span class="line">			//初始化子节点标志刚开始不要加1</span><br><span class="line">			h5Addflag=0;h6Addflag=0;</span><br><span class="line">			console.log(&quot;捕获到标签:%s&quot;,tag);</span><br><span class="line">			var text=$(item).get(0).innerHTML;</span><br><span class="line">			$(item).get(0).innerHTML=(h1Count)+&quot;.&quot;+(h2Count)+&quot;.&quot;+(h3Count)+&quot;.&quot;+(h4Count)+&quot; &quot;+text;</span><br><span class="line">		&#125;</span><br><span class="line">		if(tag===&quot;h5&quot;)</span><br><span class="line">		&#123;</span><br><span class="line">			if(h5Addflag===1)</span><br><span class="line">			&#123;</span><br><span class="line">				h5Count++;</span><br><span class="line">			&#125;</span><br><span class="line">			h5Addflag=1;</span><br><span class="line">			//初始化子节点</span><br><span class="line">			h6Count=1;</span><br><span class="line">			console.log(&quot;捕获到标签:%s&quot;,tag);</span><br><span class="line">			//初始化子节点标志刚开始不要加1</span><br><span class="line">			h6Addflag=0;</span><br><span class="line">			var text=$(item).get(0).innerHTML;</span><br><span class="line">			$(item).get(0).innerHTML=(h1Count)+&quot;.&quot;+(h2Count)+&quot;.&quot;+(h3Count)+&quot;.&quot;+(h4Count)+&quot;.&quot;+(h5Count)+&quot; &quot;+text;</span><br><span class="line">		&#125;</span><br><span class="line">		if(tag===&quot;h6&quot;)</span><br><span class="line">		&#123;</span><br><span class="line">			if(h6Addflag===1)</span><br><span class="line">			&#123;</span><br><span class="line">				h6Count++;</span><br><span class="line">			&#125;</span><br><span class="line">			h6Addflag=1;</span><br><span class="line">			console.log(&quot;捕获到标签:%s&quot;,tag);</span><br><span class="line">			var text=$(item).get(0).innerHTML;</span><br><span class="line">			$(item).get(0).innerHTML=(h1Count)+&quot;.&quot;+(h2Count)+&quot;.&quot;+(h3Count)+&quot;.&quot;+(h4Count)+&quot;.&quot;+(h5Count)+&quot;.&quot;+(h6Count)+&quot; &quot;+text;</span><br><span class="line">		&#125;</span><br><span class="line">		//为该标签设置id属性</span><br><span class="line">		$(item).attr(&quot;id&quot;,&quot;wow&quot;+i);</span><br><span class="line">		//添加一个超链接</span><br><span class="line">		$(&quot;#category&quot;).append(&apos;&lt;a class=&quot;new&apos;+tag+&apos;&quot; href=&quot;#wow&apos;+i+&apos;&quot;&gt;&apos;+$(this).text()+&apos;&lt;/a&gt;&lt;/br&gt;&apos;);</span><br><span class="line">		//为每一个标题超链接的class属性设置左边距</span><br><span class="line">		$(&quot;.newh1&quot;).css(&quot;margin-left&quot;,0);</span><br><span class="line">		$(&quot;.newh2&quot;).css(&quot;margin-left&quot;,20);</span><br><span class="line">		$(&quot;.newh3&quot;).css(&quot;margin-left&quot;,40);</span><br><span class="line">		$(&quot;.newh4&quot;).css(&quot;margin-left&quot;,60);</span><br><span class="line">		$(&quot;.newh5&quot;).css(&quot;margin-left&quot;,80);</span><br><span class="line">		$(&quot;.newh6&quot;).css(&quot;margin-left&quot;,100);</span><br><span class="line">	&#125;);</span><br><span class="line">	//设置class选择器为.book-body的html内容</span><br><span class="line">	$(&quot;.book-body&quot;).html($(&quot;.book-body&quot;).nextAll())</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p></p><p>上面通过6个计数器来完成的，和六个标志来完成的，js没学好，代码都很烂。不过幸运的是可以跑起来，下面来改进</p><h3 id="改进："><a href="#改进：" class="headerlink" title="改进："></a>改进：</h3><p>把上面的计数器用数组实现，然后从0开始计数，减少标志位的使用。<br>关键代码：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--重要代码--&gt;</span><br><span class="line">//标题序号计数器</span><br><span class="line">var hCount=[0,0,0,0,0,0];</span><br><span class="line">//设置计数器</span><br><span class="line">function setHCount(number)</span><br><span class="line">&#123;</span><br><span class="line">	//当前计数器加一</span><br><span class="line">	hCount[number-1]++;</span><br><span class="line">	for(var i=number,length=hCount.length;i&lt;length;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		//子目录计数器全部置零</span><br><span class="line">		hCount[i]=0;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">//重命名目录名称</span><br><span class="line">function setHTagValue(item,number)</span><br><span class="line">&#123;</span><br><span class="line">	//获取标题名</span><br><span class="line">	var text=$(item).get(0).innerHTML;</span><br><span class="line">	//初始化空字符串</span><br><span class="line">	var before=&quot;&quot;;</span><br><span class="line">	//生成序号</span><br><span class="line">	for(var i=0,length=hCount.length;i&lt;number;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		if(i&lt;number-1)</span><br><span class="line">			before+=hCount[i]+&quot;.&quot;;</span><br><span class="line">		else</span><br><span class="line">			before+=hCount[i]+&quot; &quot;;</span><br><span class="line">	&#125;</span><br><span class="line">//	$(item).get(0).innerHTML=(h1Count)+&quot;.&quot;+(h2Count)+&quot;.&quot;+(h3Count)+&quot;.&quot;+(h4Count)+&quot;.&quot;+(h5Count)+&quot;.&quot;+(h6Count)+&quot; &quot;+text;</span><br><span class="line">	//在标题前面加上序号</span><br><span class="line">	$(item).get(0).innerHTML=before+text;</span><br><span class="line">&#125;</span><br><span class="line">function renameHTag(item)</span><br><span class="line">&#123;</span><br><span class="line">	var tag = $(item).get(0).localName;</span><br><span class="line">	if(tag===&quot;h1&quot;)</span><br><span class="line">	&#123;</span><br><span class="line">		setHCount(1);</span><br><span class="line">		setHTagValue(item,1);</span><br><span class="line">	&#125;</span><br><span class="line">	if(tag===&quot;h2&quot;)</span><br><span class="line">	&#123;</span><br><span class="line">		setHCount(2);</span><br><span class="line">		setHTagValue(item,2);</span><br><span class="line">	&#125;</span><br><span class="line">	if(tag===&quot;h3&quot;)</span><br><span class="line">	&#123;</span><br><span class="line">		setHCount(3);</span><br><span class="line">		setHTagValue(item,3);</span><br><span class="line">	&#125;</span><br><span class="line">	if(tag===&quot;h4&quot;)</span><br><span class="line">	&#123;</span><br><span class="line">		setHCount(4);</span><br><span class="line">		setHTagValue(item,4);</span><br><span class="line">	&#125;</span><br><span class="line">	if(tag===&quot;h5&quot;)</span><br><span class="line">	&#123;</span><br><span class="line">		setHCount(5);</span><br><span class="line">		setHTagValue(item,5);</span><br><span class="line">	&#125;</span><br><span class="line">	if(tag===&quot;h6&quot;)</span><br><span class="line">	&#123;</span><br><span class="line">		setHCount(6);</span><br><span class="line">		setHTagValue(item,6)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">$(document).ready(function()</span><br><span class="line">&#123;</span><br><span class="line">	$(&quot;h1,h2,h3,h4,h5,h6&quot;).each(function(i,item)</span><br><span class="line">	&#123;</span><br><span class="line">		//给&lt;H&gt;类标签编号</span><br><span class="line">		renameHTag(item);</span><br><span class="line">		//获取标签的名字,h1,还是h2</span><br><span class="line">		var tag = $(item).get(0).localName;</span><br><span class="line"></span><br><span class="line">		//为该标签设置id属性</span><br><span class="line">		$(item).attr(&quot;id&quot;,&quot;wow&quot;+i);</span><br><span class="line">		//添加一个页内超链接,并设置class选择器</span><br><span class="line">//		$(&quot;#category&quot;).append(&apos;&lt;a class=&quot;new&apos;+tag+&apos;&quot; href=&quot;#wow&apos;+i+&apos;&quot;&gt;&apos;+$(this).text()+&apos;&lt;/a&gt;&lt;/br&gt;&apos;);</span><br><span class="line">		$(&quot;#category&quot;).append(&apos;&lt;a class=&quot;new&apos;+tag+&apos;&quot; href=&quot;#wow&apos;+i+&apos;&quot;&gt;&apos;+$(item).text()+&apos;&lt;/a&gt;&lt;/br&gt;&apos;);</span><br><span class="line">		//为每一个标题超链接的class属性设置左边距</span><br><span class="line">		$(&quot;.newh1&quot;).css(&quot;margin-left&quot;,0);</span><br><span class="line">		$(&quot;.newh2&quot;).css(&quot;margin-left&quot;,20);</span><br><span class="line">		$(&quot;.newh3&quot;).css(&quot;margin-left&quot;,40);</span><br><span class="line">		$(&quot;.newh4&quot;).css(&quot;margin-left&quot;,60);</span><br><span class="line">		$(&quot;.newh5&quot;).css(&quot;margin-left&quot;,80);</span><br><span class="line">		$(&quot;.newh6&quot;).css(&quot;margin-left&quot;,100);</span><br><span class="line">	&#125;);</span><br><span class="line">	//设置class选择器为.book-body的html内容</span><br><span class="line">	$(&quot;.book-body&quot;).html($(&quot;.book-body&quot;).nextAll())</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p></p><div id="Mark"></div><h2 id="实现在标题前面自动编号："><a href="#实现在标题前面自动编号：" class="headerlink" title="实现在标题前面自动编号："></a>实现在标题前面自动编号：</h2><p>改进：把上面的代码用函数封装好，这样阅读起来方便点，不至于一个函数很长。<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;http://code.jquery.com/jquery-1.7.2.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=&quot;http://yandex.st/highlightjs/6.2/highlight.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;script&gt;hljs.initHighlightingOnLoad();&lt;/script&gt;</span><br><span class="line">&lt;!--重要代码--&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">&lt;!--重要代码--&gt;</span><br><span class="line">&lt;!--重要代码--&gt;</span><br><span class="line">//标题序号计数器</span><br><span class="line">var hCount=[0,0,0,0,0,0];</span><br><span class="line">//设置计数器</span><br><span class="line">function setHCount(number)</span><br><span class="line">&#123;</span><br><span class="line">	//当前计数器加一</span><br><span class="line">	hCount[number-1]++;</span><br><span class="line">	for(var i=number,length=hCount.length;i&lt;length;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		//子目录计数器全部置零</span><br><span class="line">		hCount[i]=0;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">//重命名目录名称</span><br><span class="line">function setHTagValue(item,number)</span><br><span class="line">&#123;</span><br><span class="line">	//获取标题名</span><br><span class="line">	var text=$(item).get(0).innerHTML;</span><br><span class="line">	//初始化空字符串</span><br><span class="line">	var before=&quot;&quot;;</span><br><span class="line">	//生成序号</span><br><span class="line">	for(var i=0,length=hCount.length;i&lt;number;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		if(i&lt;number-1)</span><br><span class="line">			before+=hCount[i]+&quot;.&quot;;</span><br><span class="line">		else</span><br><span class="line">			before+=hCount[i]+&quot; &quot;;</span><br><span class="line">	&#125;</span><br><span class="line">//	$(item).get(0).innerHTML=(h1Count)+&quot;.&quot;+(h2Count)+&quot;.&quot;+(h3Count)+&quot;.&quot;+(h4Count)+&quot;.&quot;+(h5Count)+&quot;.&quot;+(h6Count)+&quot; &quot;+text;</span><br><span class="line">	//在标题前面加上序号</span><br><span class="line">	$(item).get(0).innerHTML=before+text;</span><br><span class="line">&#125;</span><br><span class="line">function renameHTag(item)</span><br><span class="line">&#123;</span><br><span class="line">	var tag = $(item).get(0).localName;</span><br><span class="line">	if(tag===&quot;h1&quot;)</span><br><span class="line">	&#123;</span><br><span class="line">		setHCount(1);</span><br><span class="line">		console.log(&quot;捕获到标签:%s&quot;,tag);</span><br><span class="line">		setHTagValue(item,1);</span><br><span class="line">	&#125;</span><br><span class="line">	if(tag===&quot;h2&quot;)</span><br><span class="line">	&#123;</span><br><span class="line">		setHCount(2);</span><br><span class="line">		console.log(&quot;捕获到标签:%s&quot;,tag);</span><br><span class="line">		setHTagValue(item,2);</span><br><span class="line">	&#125;</span><br><span class="line">	if(tag===&quot;h3&quot;)</span><br><span class="line">	&#123;</span><br><span class="line">		setHCount(3);</span><br><span class="line">		console.log(&quot;捕获到标签:%s&quot;,tag);</span><br><span class="line">		setHTagValue(item,3);</span><br><span class="line">	&#125;</span><br><span class="line">	if(tag===&quot;h4&quot;)</span><br><span class="line">	&#123;</span><br><span class="line">		setHCount(4);</span><br><span class="line">		console.log(&quot;捕获到标签:%s&quot;,tag);</span><br><span class="line">		setHTagValue(item,4);</span><br><span class="line">	&#125;</span><br><span class="line">	if(tag===&quot;h5&quot;)</span><br><span class="line">	&#123;</span><br><span class="line">		setHCount(5);</span><br><span class="line">		console.log(&quot;捕获到标签:%s&quot;,tag);</span><br><span class="line">		setHTagValue(item,5);</span><br><span class="line">	&#125;</span><br><span class="line">	if(tag===&quot;h6&quot;)</span><br><span class="line">	&#123;</span><br><span class="line">		setHCount(6);</span><br><span class="line">		console.log(&quot;捕获到标签:%s&quot;,tag);</span><br><span class="line">		setHTagValue(item,6)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">$(document).ready(function()</span><br><span class="line">&#123;</span><br><span class="line">	$(&quot;h1,h2,h3,h4,h5,h6&quot;).each(function(i,item)</span><br><span class="line">	&#123;</span><br><span class="line">		//给&lt;H&gt;类标签编号</span><br><span class="line">		renameHTag(item);</span><br><span class="line">		//获取标签的名字,h1,还是h2</span><br><span class="line">		var tag = $(item).get(0).localName;</span><br><span class="line"></span><br><span class="line">		//为该标签设置id属性</span><br><span class="line">		$(item).attr(&quot;id&quot;,&quot;wow&quot;+i);</span><br><span class="line">		//添加一个页内超链接,并设置class选择器</span><br><span class="line">//		$(&quot;#category&quot;).append(&apos;&lt;a class=&quot;new&apos;+tag+&apos;&quot; href=&quot;#wow&apos;+i+&apos;&quot;&gt;&apos;+$(this).text()+&apos;&lt;/a&gt;&lt;/br&gt;&apos;);</span><br><span class="line">		$(&quot;#category&quot;).append(&apos;&lt;a class=&quot;new&apos;+tag+&apos;&quot; href=&quot;#wow&apos;+i+&apos;&quot;&gt;&apos;+$(item).text()+&apos;&lt;/a&gt;&lt;/br&gt;&apos;);</span><br><span class="line">		//为每一个标题超链接的class属性设置左边距</span><br><span class="line">		$(&quot;.newh1&quot;).css(&quot;margin-left&quot;,0);</span><br><span class="line">		$(&quot;.newh2&quot;).css(&quot;margin-left&quot;,20);</span><br><span class="line">		$(&quot;.newh3&quot;).css(&quot;margin-left&quot;,40);</span><br><span class="line">		$(&quot;.newh4&quot;).css(&quot;margin-left&quot;,60);</span><br><span class="line">		$(&quot;.newh5&quot;).css(&quot;margin-left&quot;,80);</span><br><span class="line">		$(&quot;.newh6&quot;).css(&quot;margin-left&quot;,100);</span><br><span class="line">	&#125;);</span><br><span class="line">	//设置class选择器为.book-body的html内容</span><br><span class="line">	$(&quot;.book-body&quot;).html($(&quot;.book-body&quot;).nextAll())</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style type=&quot;text/css&quot;&gt;</span><br><span class="line"></span><br><span class="line">@media (max-width: 1600px) &#123;</span><br><span class="line">    .book-body &#123;</span><br><span class="line">       padding-left:200px;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@media (max-width: 1400px) &#123;</span><br><span class="line">    .book-body &#123;</span><br><span class="line">       padding-left:200px;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@media (max-width: 1200px) &#123;</span><br><span class="line">    .book-body &#123;</span><br><span class="line">       padding-left:300px;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">@media (max-width: 700px) &#123;</span><br><span class="line">    .book-body &#123;</span><br><span class="line">       padding-left:0px;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">@media (min-width: 600px) &#123;</span><br><span class="line">    #category&#123;</span><br><span class="line">        position: fixed;</span><br><span class="line">        left: 20px;</span><br><span class="line">        top:0;</span><br><span class="line">        height: 100%;</span><br><span class="line">        overflow-y: scroll;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@media (-webkit-max-device-pixel-ratio: 1) &#123;</span><br><span class="line">    ::-webkit-scrollbar-track-piece &#123;</span><br><span class="line">        background-color:#FFF</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ::-webkit-scrollbar &#123;</span><br><span class="line">        width: 6px;</span><br><span class="line">        height: 6px</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ::-webkit-scrollbar-thumb &#123;</span><br><span class="line">        background-color: #c2c2c2;</span><br><span class="line">        background-clip: padding-box;</span><br><span class="line">        min-height: 28px</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ::-webkit-scrollbar-thumb:hover &#123;</span><br><span class="line">        background-color: #A0A0A0</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;!--返回顶部--&gt;</span><br><span class="line">&lt;a href=&quot;javascript:scroll(0,0)&quot; style=&quot;position:fixed;float:right;right:32px;top:70%&quot;&gt;返回顶部&lt;/a&gt; </span><br><span class="line">&lt;!--目录栏，设置占用宽度为20%可以根据实际情况设置--&gt;</span><br><span class="line">&lt;div style=&quot;width:20%;&quot; id=&quot;category&quot; class=&quot;book-summary&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;!--文章主体部分--&gt;</span><br><span class="line">&lt;div class=&quot;book-body&quot;&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p></p><h2 id="MarkdownPad2中的设置"><a href="#MarkdownPad2中的设置" class="headerlink" title="MarkdownPad2中的设置"></a>MarkdownPad2中的设置</h2><p>复制上面的代码，然后打开MarkDownPad2，<br>在MarkdownPad2中点击<code>工具--&gt;选项--&gt;高级--&gt;HTML Head编辑器</code>，然后粘贴上面代码，然后<code>保存并关闭</code>即可。<br><img src="https://i.imgur.com/pxuD8Y8.png" alt=""></p><p><img src="https://i.imgur.com/KIlcMJS.png" alt=""></p><p><img src="https://i.imgur.com/K6IXNSF.png" alt=""></p><h3 id="导出HTML"><a href="#导出HTML" class="headerlink" title="导出HTML"></a>导出HTML</h3><p>然后来导出HTML，这样才能看见侧目录。<br>选择<code>文件--&gt;导出--&gt;导出 HTML</code>,然后保存到本地即可。<br><img src="https://i.imgur.com/m1Q2OuZ.png" alt=""></p><p>然后就可看到效果了</p><p><img src="https://i.imgur.com/IjHSC6W.png" alt=""></p><p>本文链接: <a href="https://www.lansheng.net.cn/blog/728ca7fc/">MarkdownPad 导出html带侧边栏目录</a></p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://www.lansheng.net.cn/blog/59af15ef/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="蓝生"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="蓝生的博客"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/blog/59af15ef/" itemprop="url">带书签JS设置1</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-08-06 01:08:53" itemprop="dateCreated datePublished" datetime="2018-08-06T01:08:53+08:00">2018-08-06</time> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2018-11-05 17:17:07" itemprop="dateModified" datetime="2018-11-05T17:17:07+08:00">2018-11-05</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java/Java-正则表达式/" itemprop="url" rel="index"><span itemprop="name">Java 正则表达式</span></a></span> </span><span class="post-comments-count"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><a href="/blog/59af15ef/#comments" itemprop="discussionUrl"><span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/blog/59af15ef/" itemprop="commentCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><p>参考：<a href="https://blog.csdn.net/zwx_lucky/article/details/53998930" target="_blank" rel="noopener">https://blog.csdn.net/zwx_lucky/article/details/53998930</a><br>原文给的代码如下：个人觉得不足的地方是没有自动编号，虽然使用了缩进但是父子标题看起来不是很明显，我在此基础加上了点代码<a href="#Mark">实现在标题前面自动编号</a>。<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--bookmark --&gt;</span><br><span class="line">&lt;script src=&quot;http://code.jquery.com/jquery-1.7.2.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=&quot;http://yandex.st/highlightjs/6.2/highlight.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;script&gt;hljs.initHighlightingOnLoad();&lt;/script&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line"> $(document).ready(function()&#123;</span><br><span class="line"></span><br><span class="line">      $(&quot;h1,h2,h3,h4,h5,h6&quot;).each(function(i,item)&#123;</span><br><span class="line">        var tag = $(item).get(0).localName;</span><br><span class="line">        $(item).attr(&quot;id&quot;,&quot;wow&quot;+i);</span><br><span class="line">        $(&quot;#category&quot;).append(&apos;&lt;a class=&quot;new&apos;+tag+&apos;&quot; href=&quot;#wow&apos;+i+&apos;&quot;&gt;&apos;+$(this).text()+&apos;&lt;/a&gt;&lt;/br&gt;&apos;);</span><br><span class="line">        $(&quot;.newh1&quot;).css(&quot;margin-left&quot;,0);</span><br><span class="line">        $(&quot;.newh2&quot;).css(&quot;margin-left&quot;,20);</span><br><span class="line">        $(&quot;.newh3&quot;).css(&quot;margin-left&quot;,40);</span><br><span class="line">        $(&quot;.newh4&quot;).css(&quot;margin-left&quot;,60);</span><br><span class="line">        $(&quot;.newh5&quot;).css(&quot;margin-left&quot;,80);</span><br><span class="line">      	$(&quot;.newh6&quot;).css(&quot;margin-left&quot;,100);</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">       $(&quot;.book-body&quot;).html($(&quot;.book-body&quot;).nextAll())</span><br><span class="line"> &#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style type=&quot;text/css&quot;&gt;</span><br><span class="line"></span><br><span class="line">@media (max-width: 1600px) &#123;</span><br><span class="line">    .book-body &#123;</span><br><span class="line">       padding-left:200px;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@media (max-width: 1400px) &#123;</span><br><span class="line">    .book-body &#123;</span><br><span class="line">       padding-left:200px;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@media (max-width: 1200px) &#123;</span><br><span class="line">    .book-body &#123;</span><br><span class="line">       padding-left:300px;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">@media (max-width: 700px) &#123;</span><br><span class="line">    .book-body &#123;</span><br><span class="line">       padding-left:0px;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">@media (min-width: 600px) &#123;</span><br><span class="line">    #category&#123;</span><br><span class="line">        position: fixed;</span><br><span class="line">        left: 20px;</span><br><span class="line">        top:0;</span><br><span class="line">        height: 100%;</span><br><span class="line">        overflow-y: scroll;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@media (-webkit-max-device-pixel-ratio: 1) &#123;</span><br><span class="line">    ::-webkit-scrollbar-track-piece &#123;</span><br><span class="line">        background-color:#FFF</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ::-webkit-scrollbar &#123;</span><br><span class="line">        width: 6px;</span><br><span class="line">        height: 6px</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ::-webkit-scrollbar-thumb &#123;</span><br><span class="line">        background-color: #c2c2c2;</span><br><span class="line">        background-clip: padding-box;</span><br><span class="line">        min-height: 28px</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ::-webkit-scrollbar-thumb:hover &#123;</span><br><span class="line">        background-color: #A0A0A0</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;a href=&quot;javascript:scroll(0,0)&quot; style=&quot;position:fixed;float:right;right:32px;top:70%&quot;&gt;返回顶部&lt;/a&gt; </span><br><span class="line">&lt;div style=&quot;width:20%;&quot; id=&quot;category&quot; class=&quot;book-summary&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;div class=&quot;book-body&quot;&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p></p><p>实现方式2：缺点是书签在顶部，不好快速跳转<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">  document.addEventListener(&quot;DOMContentLoaded&quot;, function() &#123;</span><br><span class="line">        var div1 = document.createElement(&quot;div&quot;);</span><br><span class="line">        div1.style.cssText = &quot;clear:both&quot;;</span><br><span class="line">        // 生成目录列表</span><br><span class="line">        var outline = document.createElement(&quot;div&quot;);</span><br><span class="line">        outline.setAttribute(&quot;id&quot;, &quot;outline-list&quot;);</span><br><span class="line">        outline.style.cssText = &quot;border:solid 1px #ccc; background:#eee; min-width:200px;padding:4px 10px;&quot;;</span><br><span class="line">        </span><br><span class="line">        var ele_p = document.createElement(&quot;p&quot;);</span><br><span class="line">        ele_p.style.cssText = &quot;text-align: left; margin: 0;&quot;;</span><br><span class="line">        outline.appendChild(ele_p);</span><br><span class="line">        </span><br><span class="line">        var ele_span = document.createElement(&quot;span&quot;);</span><br><span class="line">        // ele_span.style.cssText = &quot;float: left;&quot;;</span><br><span class="line">        var ele_text=document.createTextNode(&quot;目录&quot;);</span><br><span class="line">        ele_span.appendChild(ele_text);</span><br><span class="line">        </span><br><span class="line">        var ele_a = document.createElement(&quot;a&quot;);</span><br><span class="line">        ele_a.appendChild(document.createTextNode(&quot;[+]&quot;));</span><br><span class="line">        ele_a.setAttribute(&quot;href&quot;, &quot;#&quot;);</span><br><span class="line">        ele_a.setAttribute(&quot;onclick&quot;, &quot;javascript:return openct(this);&quot;);</span><br><span class="line">        ele_a.setAttribute(&quot;title&quot;, &quot;点击打开目录&quot;);</span><br><span class="line"> </span><br><span class="line">        ele_span.appendChild(ele_a);</span><br><span class="line">        ele_p.appendChild(ele_span);</span><br><span class="line"> </span><br><span class="line">        var ele_ol = document.createElement(&quot;ol&quot;);</span><br><span class="line">        ele_ol.style.cssText = &quot;display:none;margin-left:14px;padding-left:14px;line-height:160%;&quot;;</span><br><span class="line">        ele_ol.setAttribute(&quot;id&quot;, &quot;outline_ol&quot;);</span><br><span class="line">        outline.appendChild(ele_ol);</span><br><span class="line">        var div1 = document.createElement(&quot;div&quot;);</span><br><span class="line">        div1.style.cssText = &quot;clear:both&quot;;</span><br><span class="line"> </span><br><span class="line">        document.body.insertBefore(outline, document.body.childNodes[0]);</span><br><span class="line">        // 获取所有标题</span><br><span class="line">        var headers = document.querySelectorAll(&apos;h1,h2,h3,h4,h5,h6&apos;);</span><br><span class="line">        if (headers.length &lt; 2)</span><br><span class="line">          return;</span><br><span class="line"> </span><br><span class="line">        // -----</span><br><span class="line">        var old_h = 0, ol_cnt = 0;</span><br><span class="line">        // -----</span><br><span class="line">        </span><br><span class="line">        for (var i = 0; i &lt; headers.length; i++) &#123;</span><br><span class="line">          </span><br><span class="line">          var ele_ols = null;</span><br><span class="line">            // 找出它是H几，为后面的有序列表做准备</span><br><span class="line">            var header = headers[i];</span><br><span class="line">            header.setAttribute(&quot;id&quot;, &quot;t&quot; + i + header.tagName);</span><br><span class="line">            var h = parseInt(header.tagName.substr(1), 10);</span><br><span class="line">            // -----</span><br><span class="line">            if (!old_h)&#123;</span><br><span class="line">              old_h = h;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            if (h &gt; old_h) &#123;</span><br><span class="line">              ele_ols = document.createElement(&quot;ol&quot;);</span><br><span class="line">              var ele_Current = ele_ol;</span><br><span class="line">              if(ele_Current &amp;&amp; ol_cnt &gt; 0)&#123;</span><br><span class="line">                var temp = ol_cnt;</span><br><span class="line">                while(temp &gt; 0)&#123;</span><br><span class="line">                  ele_Current = ele_Current.lastChild;</span><br><span class="line">                  temp--;</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">              ele_Current.lastChild.appendChild(ele_ols);</span><br><span class="line">              ol_cnt++;</span><br><span class="line">            &#125; else if (h &lt; old_h &amp;&amp; ol_cnt &gt; 0) &#123;</span><br><span class="line">              if (h == 1) &#123;</span><br><span class="line">                while (ol_cnt &gt; 0) &#123;</span><br><span class="line">                  ol_cnt--;</span><br><span class="line">                &#125;</span><br><span class="line">              &#125; else &#123;</span><br><span class="line">                ele_ols = document.createElement(&quot;ol&quot;);</span><br><span class="line">                var ele_Current = ele_ol;</span><br><span class="line">                if(ele_Current &amp;&amp; ol_cnt &gt; 0)&#123;</span><br><span class="line">                  var temp = ol_cnt;</span><br><span class="line">                  while(temp &gt; 1)&#123;</span><br><span class="line">                    ele_Current = ele_Current.lastChild;</span><br><span class="line">                    temp--;</span><br><span class="line">                  &#125;</span><br><span class="line">                &#125;</span><br><span class="line">              ele_Current.appendChild(ele_ols);</span><br><span class="line"> </span><br><span class="line">              ol_cnt--;</span><br><span class="line">            &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            if (h == 1) &#123;</span><br><span class="line">              while (ol_cnt &gt; 0) &#123;</span><br><span class="line">                ol_cnt--;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            old_h = h;</span><br><span class="line">            // -----</span><br><span class="line">            if (ele_ols)&#123;</span><br><span class="line">              ele_li = document.createElement(&quot;li&quot;)</span><br><span class="line">              ele_ols.appendChild(ele_li);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">              ele_li = document.createElement(&quot;li&quot;)</span><br><span class="line">              ele_ol.appendChild(ele_li);</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            var a = document.createElement(&quot;a&quot;);</span><br><span class="line">            // 为目录项设置链接</span><br><span class="line">            a.setAttribute(&quot;href&quot;, &quot;#t&quot; + i + header.tagName);</span><br><span class="line">            // 目录项文本</span><br><span class="line">            a.innerHTML = header.textContent;</span><br><span class="line"> </span><br><span class="line">            </span><br><span class="line">            ele_li.appendChild(a);</span><br><span class="line">          &#125;</span><br><span class="line">          // -----</span><br><span class="line">          while (ol_cnt &gt; 0) &#123;</span><br><span class="line">            ol_cnt--;</span><br><span class="line">          &#125;</span><br><span class="line">          // -----</span><br><span class="line"> </span><br><span class="line">        &#125;);</span><br><span class="line">// 代开和关闭目录的函数</span><br><span class="line">function openct(e) &#123;</span><br><span class="line">  if (e.innerHTML == &apos;[+]&apos;) &#123;</span><br><span class="line">    // createTextNode</span><br><span class="line">    e.setAttribute(&apos;title&apos;, &apos;收起&apos;);</span><br><span class="line">    e.innerHTML = &apos;[-]&apos;;</span><br><span class="line">    var element = document.getElementById(&quot;outline_ol&quot;);</span><br><span class="line">    element.style.cssText = &quot;margin-left:14px;padding-left:14px;line-height:160%;&quot;;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    e.setAttribute(&apos;title&apos;, &apos;展开&apos;);</span><br><span class="line">    e.innerHTML = &apos;[+]&apos;;</span><br><span class="line">    var element = document.getElementById(&quot;outline_ol&quot;);</span><br><span class="line">    element.style.cssText = &quot;display:none;margin-left:14px;padding-left:14px;line-height:160%;&quot;;</span><br><span class="line">  &#125;</span><br><span class="line">  e.blur();</span><br><span class="line">  return false;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p></p><h2 id="具体实现的步骤，和改进"><a href="#具体实现的步骤，和改进" class="headerlink" title="具体实现的步骤，和改进"></a>具体实现的步骤，和改进</h2><p>js忘光了，先用最弱智的方法来实现吧。<br>关键代码：这个代码有点脑残的。<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line">var h1Count=1,h1Addflag=0;</span><br><span class="line">var h2Count=1,h2Addflag=0;</span><br><span class="line">var h3Count=1,h3Addflag=0;</span><br><span class="line">var h4Count=1,h4Addflag=0;</span><br><span class="line">var h5Count=1,h5Addflag=0;</span><br><span class="line">var h6Count=1,h6Addflag=0;</span><br><span class="line">$(document).ready(function()</span><br><span class="line">&#123;</span><br><span class="line">	$(&quot;h1,h2,h3,h4,h5,h6&quot;).each(function(i,item)</span><br><span class="line">	&#123;</span><br><span class="line">		//获取标签的名字,h1,还是h2</span><br><span class="line">		var tag = $(item).get(0).localName;</span><br><span class="line">		if(tag===&quot;h1&quot;)</span><br><span class="line">		&#123;</span><br><span class="line">			if(h1Addflag===1)</span><br><span class="line">			&#123;</span><br><span class="line">				h1Count++;</span><br><span class="line">			&#125;</span><br><span class="line">			h1Addflag=1;</span><br><span class="line">			//初始化子节点</span><br><span class="line">			h2Count=1;h3Count=1;h4Count=1;h5Count=1;h6Count=1;</span><br><span class="line">			//初始化子节点标志刚开始不要加1</span><br><span class="line">			h2Addflag=0;h3Addflag=0;h4Addflag=0;h5Addflag=0;h6Addflag=0;</span><br><span class="line">			console.log(&quot;捕获到标签:%s&quot;,tag);</span><br><span class="line">			var text=$(item).get(0).innerHTML;</span><br><span class="line">			$(item).get(0).innerHTML=(h1Count)+&quot; &quot;+text;</span><br><span class="line">		&#125;</span><br><span class="line">		if(tag===&quot;h2&quot;)</span><br><span class="line">		&#123;</span><br><span class="line">			if(h2Addflag===1)</span><br><span class="line">			&#123;</span><br><span class="line">				h2Count++;</span><br><span class="line">			&#125;</span><br><span class="line">			h2Addflag=1;</span><br><span class="line">			//初始化子节点</span><br><span class="line">			h3Count=1;h4Count=1;h5Count=1;h6Count=1;</span><br><span class="line">			//初始化子节点标志刚开始不要加1</span><br><span class="line">			h3Addflag=0;h4Addflag=0;h5Addflag=0;h6Addflag=0;</span><br><span class="line">			console.log(&quot;捕获到标签:%s&quot;,tag);</span><br><span class="line">			var text=$(item).get(0).innerHTML;</span><br><span class="line">			$(item).get(0).innerHTML=(h1Count)+&quot;.&quot;+(h2Count)+&quot; &quot;+text;</span><br><span class="line">		&#125;</span><br><span class="line">		if(tag===&quot;h3&quot;)</span><br><span class="line">		&#123;</span><br><span class="line">			if(h3Addflag===1)</span><br><span class="line">			&#123;</span><br><span class="line">				h3Count++;</span><br><span class="line">			&#125;</span><br><span class="line">			h3Addflag=1;</span><br><span class="line">			//初始化子节点</span><br><span class="line">			h4Count=1;h5Count=1;h6Count=1;</span><br><span class="line">			//初始化子节点标志刚开始不要加1</span><br><span class="line">			h4Addflag=0;h5Addflag=0;h6Addflag=0;</span><br><span class="line">			console.log(&quot;捕获到标签:%s&quot;,tag);</span><br><span class="line">			var text=$(item).get(0).innerHTML;</span><br><span class="line">			$(item).get(0).innerHTML=(h1Count)+&quot;.&quot;+(h2Count)+&quot;.&quot;+(h3Count)+&quot; &quot;+text;</span><br><span class="line">			</span><br><span class="line">		&#125;</span><br><span class="line">		if(tag===&quot;h4&quot;)</span><br><span class="line">		&#123;</span><br><span class="line">			if(h4Addflag===1)</span><br><span class="line">			&#123;</span><br><span class="line">				h4Count++;</span><br><span class="line">			&#125;</span><br><span class="line">			h4Addflag=1;</span><br><span class="line">			//初始化子节点</span><br><span class="line">			h5Count=1;h6Count=1;</span><br><span class="line">			//初始化子节点标志刚开始不要加1</span><br><span class="line">			h5Addflag=0;h6Addflag=0;</span><br><span class="line">			console.log(&quot;捕获到标签:%s&quot;,tag);</span><br><span class="line">			var text=$(item).get(0).innerHTML;</span><br><span class="line">			$(item).get(0).innerHTML=(h1Count)+&quot;.&quot;+(h2Count)+&quot;.&quot;+(h3Count)+&quot;.&quot;+(h4Count)+&quot; &quot;+text;</span><br><span class="line">		&#125;</span><br><span class="line">		if(tag===&quot;h5&quot;)</span><br><span class="line">		&#123;</span><br><span class="line">			if(h5Addflag===1)</span><br><span class="line">			&#123;</span><br><span class="line">				h5Count++;</span><br><span class="line">			&#125;</span><br><span class="line">			h5Addflag=1;</span><br><span class="line">			//初始化子节点</span><br><span class="line">			h6Count=1;</span><br><span class="line">			console.log(&quot;捕获到标签:%s&quot;,tag);</span><br><span class="line">			//初始化子节点标志刚开始不要加1</span><br><span class="line">			h6Addflag=0;</span><br><span class="line">			var text=$(item).get(0).innerHTML;</span><br><span class="line">			$(item).get(0).innerHTML=(h1Count)+&quot;.&quot;+(h2Count)+&quot;.&quot;+(h3Count)+&quot;.&quot;+(h4Count)+&quot;.&quot;+(h5Count)+&quot; &quot;+text;</span><br><span class="line">		&#125;</span><br><span class="line">		if(tag===&quot;h6&quot;)</span><br><span class="line">		&#123;</span><br><span class="line">			if(h6Addflag===1)</span><br><span class="line">			&#123;</span><br><span class="line">				h6Count++;</span><br><span class="line">			&#125;</span><br><span class="line">			h6Addflag=1;</span><br><span class="line">			console.log(&quot;捕获到标签:%s&quot;,tag);</span><br><span class="line">			var text=$(item).get(0).innerHTML;</span><br><span class="line">			$(item).get(0).innerHTML=(h1Count)+&quot;.&quot;+(h2Count)+&quot;.&quot;+(h3Count)+&quot;.&quot;+(h4Count)+&quot;.&quot;+(h5Count)+&quot;.&quot;+(h6Count)+&quot; &quot;+text;</span><br><span class="line">		&#125;</span><br><span class="line">		//为该标签设置id属性</span><br><span class="line">		$(item).attr(&quot;id&quot;,&quot;wow&quot;+i);</span><br><span class="line">		//添加一个超链接</span><br><span class="line">		$(&quot;#category&quot;).append(&apos;&lt;a class=&quot;new&apos;+tag+&apos;&quot; href=&quot;#wow&apos;+i+&apos;&quot;&gt;&apos;+$(this).text()+&apos;&lt;/a&gt;&lt;/br&gt;&apos;);</span><br><span class="line">		//为每一个标题超链接的class属性设置左边距</span><br><span class="line">		$(&quot;.newh1&quot;).css(&quot;margin-left&quot;,0);</span><br><span class="line">		$(&quot;.newh2&quot;).css(&quot;margin-left&quot;,20);</span><br><span class="line">		$(&quot;.newh3&quot;).css(&quot;margin-left&quot;,40);</span><br><span class="line">		$(&quot;.newh4&quot;).css(&quot;margin-left&quot;,60);</span><br><span class="line">		$(&quot;.newh5&quot;).css(&quot;margin-left&quot;,80);</span><br><span class="line">		$(&quot;.newh6&quot;).css(&quot;margin-left&quot;,100);</span><br><span class="line">	&#125;);</span><br><span class="line">	//设置class选择器为.book-body的html内容</span><br><span class="line">	$(&quot;.book-body&quot;).html($(&quot;.book-body&quot;).nextAll())</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p></p><p>上面通过6个计数器来完成的，和六个标志来完成的，js没学好，代码都很烂。不过幸运的是可以跑起来，下面来改进</p><h3 id="改进："><a href="#改进：" class="headerlink" title="改进："></a>改进：</h3><p>把上面的计数器用数组实现，然后从0开始计数，减少标志位的使用。<br>关键代码：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--重要代码--&gt;</span><br><span class="line">//标题序号计数器</span><br><span class="line">var hCount=[0,0,0,0,0,0];</span><br><span class="line">//设置计数器</span><br><span class="line">function setHCount(number)</span><br><span class="line">&#123;</span><br><span class="line">	//当前计数器加一</span><br><span class="line">	hCount[number-1]++;</span><br><span class="line">	for(var i=number,length=hCount.length;i&lt;length;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		//子目录计数器全部置零</span><br><span class="line">		hCount[i]=0;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">//重命名目录名称</span><br><span class="line">function setHTagValue(item,number)</span><br><span class="line">&#123;</span><br><span class="line">	//获取标题名</span><br><span class="line">	var text=$(item).get(0).innerHTML;</span><br><span class="line">	//初始化空字符串</span><br><span class="line">	var before=&quot;&quot;;</span><br><span class="line">	//生成序号</span><br><span class="line">	for(var i=0,length=hCount.length;i&lt;number;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		if(i&lt;number-1)</span><br><span class="line">			before+=hCount[i]+&quot;.&quot;;</span><br><span class="line">		else</span><br><span class="line">			before+=hCount[i]+&quot; &quot;;</span><br><span class="line">	&#125;</span><br><span class="line">//	$(item).get(0).innerHTML=(h1Count)+&quot;.&quot;+(h2Count)+&quot;.&quot;+(h3Count)+&quot;.&quot;+(h4Count)+&quot;.&quot;+(h5Count)+&quot;.&quot;+(h6Count)+&quot; &quot;+text;</span><br><span class="line">	//在标题前面加上序号</span><br><span class="line">	$(item).get(0).innerHTML=before+text;</span><br><span class="line">&#125;</span><br><span class="line">function renameHTag(item)</span><br><span class="line">&#123;</span><br><span class="line">	var tag = $(item).get(0).localName;</span><br><span class="line">	if(tag===&quot;h1&quot;)</span><br><span class="line">	&#123;</span><br><span class="line">		setHCount(1);</span><br><span class="line">		setHTagValue(item,1);</span><br><span class="line">	&#125;</span><br><span class="line">	if(tag===&quot;h2&quot;)</span><br><span class="line">	&#123;</span><br><span class="line">		setHCount(2);</span><br><span class="line">		setHTagValue(item,2);</span><br><span class="line">	&#125;</span><br><span class="line">	if(tag===&quot;h3&quot;)</span><br><span class="line">	&#123;</span><br><span class="line">		setHCount(3);</span><br><span class="line">		setHTagValue(item,3);</span><br><span class="line">	&#125;</span><br><span class="line">	if(tag===&quot;h4&quot;)</span><br><span class="line">	&#123;</span><br><span class="line">		setHCount(4);</span><br><span class="line">		setHTagValue(item,4);</span><br><span class="line">	&#125;</span><br><span class="line">	if(tag===&quot;h5&quot;)</span><br><span class="line">	&#123;</span><br><span class="line">		setHCount(5);</span><br><span class="line">		setHTagValue(item,5);</span><br><span class="line">	&#125;</span><br><span class="line">	if(tag===&quot;h6&quot;)</span><br><span class="line">	&#123;</span><br><span class="line">		setHCount(6);</span><br><span class="line">		setHTagValue(item,6)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">$(document).ready(function()</span><br><span class="line">&#123;</span><br><span class="line">	$(&quot;h1,h2,h3,h4,h5,h6&quot;).each(function(i,item)</span><br><span class="line">	&#123;</span><br><span class="line">		//给&lt;H&gt;类标签编号</span><br><span class="line">		renameHTag(item);</span><br><span class="line">		//获取标签的名字,h1,还是h2</span><br><span class="line">		var tag = $(item).get(0).localName;</span><br><span class="line"></span><br><span class="line">		//为该标签设置id属性</span><br><span class="line">		$(item).attr(&quot;id&quot;,&quot;wow&quot;+i);</span><br><span class="line">		//添加一个页内超链接,并设置class选择器</span><br><span class="line">//		$(&quot;#category&quot;).append(&apos;&lt;a class=&quot;new&apos;+tag+&apos;&quot; href=&quot;#wow&apos;+i+&apos;&quot;&gt;&apos;+$(this).text()+&apos;&lt;/a&gt;&lt;/br&gt;&apos;);</span><br><span class="line">		$(&quot;#category&quot;).append(&apos;&lt;a class=&quot;new&apos;+tag+&apos;&quot; href=&quot;#wow&apos;+i+&apos;&quot;&gt;&apos;+$(item).text()+&apos;&lt;/a&gt;&lt;/br&gt;&apos;);</span><br><span class="line">		//为每一个标题超链接的class属性设置左边距</span><br><span class="line">		$(&quot;.newh1&quot;).css(&quot;margin-left&quot;,0);</span><br><span class="line">		$(&quot;.newh2&quot;).css(&quot;margin-left&quot;,20);</span><br><span class="line">		$(&quot;.newh3&quot;).css(&quot;margin-left&quot;,40);</span><br><span class="line">		$(&quot;.newh4&quot;).css(&quot;margin-left&quot;,60);</span><br><span class="line">		$(&quot;.newh5&quot;).css(&quot;margin-left&quot;,80);</span><br><span class="line">		$(&quot;.newh6&quot;).css(&quot;margin-left&quot;,100);</span><br><span class="line">	&#125;);</span><br><span class="line">	//设置class选择器为.book-body的html内容</span><br><span class="line">	$(&quot;.book-body&quot;).html($(&quot;.book-body&quot;).nextAll())</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p></p><div id="Mark"></div><h2 id="实现在标题前面自动编号："><a href="#实现在标题前面自动编号：" class="headerlink" title="实现在标题前面自动编号："></a>实现在标题前面自动编号：</h2><p>改进：把上面的代码用函数封装好，这样阅读起来方便点，不至于一个函数很长。<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;http://code.jquery.com/jquery-1.7.2.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=&quot;http://yandex.st/highlightjs/6.2/highlight.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;script&gt;hljs.initHighlightingOnLoad();&lt;/script&gt;</span><br><span class="line">&lt;!--重要代码--&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">&lt;!--重要代码--&gt;</span><br><span class="line">&lt;!--重要代码--&gt;</span><br><span class="line">//标题序号计数器</span><br><span class="line">var hCount=[0,0,0,0,0,0];</span><br><span class="line">//设置计数器</span><br><span class="line">function setHCount(number)</span><br><span class="line">&#123;</span><br><span class="line">	//当前计数器加一</span><br><span class="line">	hCount[number-1]++;</span><br><span class="line">	for(var i=number,length=hCount.length;i&lt;length;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		//子目录计数器全部置零</span><br><span class="line">		hCount[i]=0;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">//重命名目录名称</span><br><span class="line">function setHTagValue(item,number)</span><br><span class="line">&#123;</span><br><span class="line">	//获取标题名</span><br><span class="line">	var text=$(item).get(0).innerHTML;</span><br><span class="line">	//初始化空字符串</span><br><span class="line">	var before=&quot;&quot;;</span><br><span class="line">	//生成序号</span><br><span class="line">	for(var i=0,length=hCount.length;i&lt;number;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		if(i&lt;number-1)</span><br><span class="line">			before+=hCount[i]+&quot;.&quot;;</span><br><span class="line">		else</span><br><span class="line">			before+=hCount[i]+&quot; &quot;;</span><br><span class="line">	&#125;</span><br><span class="line">//	$(item).get(0).innerHTML=(h1Count)+&quot;.&quot;+(h2Count)+&quot;.&quot;+(h3Count)+&quot;.&quot;+(h4Count)+&quot;.&quot;+(h5Count)+&quot;.&quot;+(h6Count)+&quot; &quot;+text;</span><br><span class="line">	//在标题前面加上序号</span><br><span class="line">	$(item).get(0).innerHTML=before+text;</span><br><span class="line">&#125;</span><br><span class="line">function renameHTag(item)</span><br><span class="line">&#123;</span><br><span class="line">	var tag = $(item).get(0).localName;</span><br><span class="line">	if(tag===&quot;h1&quot;)</span><br><span class="line">	&#123;</span><br><span class="line">		setHCount(1);</span><br><span class="line">		console.log(&quot;捕获到标签:%s&quot;,tag);</span><br><span class="line">		setHTagValue(item,1);</span><br><span class="line">	&#125;</span><br><span class="line">	if(tag===&quot;h2&quot;)</span><br><span class="line">	&#123;</span><br><span class="line">		setHCount(2);</span><br><span class="line">		console.log(&quot;捕获到标签:%s&quot;,tag);</span><br><span class="line">		setHTagValue(item,2);</span><br><span class="line">	&#125;</span><br><span class="line">	if(tag===&quot;h3&quot;)</span><br><span class="line">	&#123;</span><br><span class="line">		setHCount(3);</span><br><span class="line">		console.log(&quot;捕获到标签:%s&quot;,tag);</span><br><span class="line">		setHTagValue(item,3);</span><br><span class="line">	&#125;</span><br><span class="line">	if(tag===&quot;h4&quot;)</span><br><span class="line">	&#123;</span><br><span class="line">		setHCount(4);</span><br><span class="line">		console.log(&quot;捕获到标签:%s&quot;,tag);</span><br><span class="line">		setHTagValue(item,4);</span><br><span class="line">	&#125;</span><br><span class="line">	if(tag===&quot;h5&quot;)</span><br><span class="line">	&#123;</span><br><span class="line">		setHCount(5);</span><br><span class="line">		console.log(&quot;捕获到标签:%s&quot;,tag);</span><br><span class="line">		setHTagValue(item,5);</span><br><span class="line">	&#125;</span><br><span class="line">	if(tag===&quot;h6&quot;)</span><br><span class="line">	&#123;</span><br><span class="line">		setHCount(6);</span><br><span class="line">		console.log(&quot;捕获到标签:%s&quot;,tag);</span><br><span class="line">		setHTagValue(item,6)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">$(document).ready(function()</span><br><span class="line">&#123;</span><br><span class="line">	$(&quot;h1,h2,h3,h4,h5,h6&quot;).each(function(i,item)</span><br><span class="line">	&#123;</span><br><span class="line">		//给&lt;H&gt;类标签编号</span><br><span class="line">		renameHTag(item);</span><br><span class="line">		//获取标签的名字,h1,还是h2</span><br><span class="line">		var tag = $(item).get(0).localName;</span><br><span class="line"></span><br><span class="line">		//为该标签设置id属性</span><br><span class="line">		$(item).attr(&quot;id&quot;,&quot;wow&quot;+i);</span><br><span class="line">		//添加一个页内超链接,并设置class选择器</span><br><span class="line">//		$(&quot;#category&quot;).append(&apos;&lt;a class=&quot;new&apos;+tag+&apos;&quot; href=&quot;#wow&apos;+i+&apos;&quot;&gt;&apos;+$(this).text()+&apos;&lt;/a&gt;&lt;/br&gt;&apos;);</span><br><span class="line">		$(&quot;#category&quot;).append(&apos;&lt;a class=&quot;new&apos;+tag+&apos;&quot; href=&quot;#wow&apos;+i+&apos;&quot;&gt;&apos;+$(item).text()+&apos;&lt;/a&gt;&lt;/br&gt;&apos;);</span><br><span class="line">		//为每一个标题超链接的class属性设置左边距</span><br><span class="line">		$(&quot;.newh1&quot;).css(&quot;margin-left&quot;,0);</span><br><span class="line">		$(&quot;.newh2&quot;).css(&quot;margin-left&quot;,20);</span><br><span class="line">		$(&quot;.newh3&quot;).css(&quot;margin-left&quot;,40);</span><br><span class="line">		$(&quot;.newh4&quot;).css(&quot;margin-left&quot;,60);</span><br><span class="line">		$(&quot;.newh5&quot;).css(&quot;margin-left&quot;,80);</span><br><span class="line">		$(&quot;.newh6&quot;).css(&quot;margin-left&quot;,100);</span><br><span class="line">	&#125;);</span><br><span class="line">	//设置class选择器为.book-body的html内容</span><br><span class="line">	$(&quot;.book-body&quot;).html($(&quot;.book-body&quot;).nextAll())</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style type=&quot;text/css&quot;&gt;</span><br><span class="line"></span><br><span class="line">@media (max-width: 1600px) &#123;</span><br><span class="line">    .book-body &#123;</span><br><span class="line">       padding-left:200px;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@media (max-width: 1400px) &#123;</span><br><span class="line">    .book-body &#123;</span><br><span class="line">       padding-left:200px;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@media (max-width: 1200px) &#123;</span><br><span class="line">    .book-body &#123;</span><br><span class="line">       padding-left:300px;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">@media (max-width: 700px) &#123;</span><br><span class="line">    .book-body &#123;</span><br><span class="line">       padding-left:0px;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">@media (min-width: 600px) &#123;</span><br><span class="line">    #category&#123;</span><br><span class="line">        position: fixed;</span><br><span class="line">        left: 20px;</span><br><span class="line">        top:0;</span><br><span class="line">        height: 100%;</span><br><span class="line">        overflow-y: scroll;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@media (-webkit-max-device-pixel-ratio: 1) &#123;</span><br><span class="line">    ::-webkit-scrollbar-track-piece &#123;</span><br><span class="line">        background-color:#FFF</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ::-webkit-scrollbar &#123;</span><br><span class="line">        width: 6px;</span><br><span class="line">        height: 6px</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ::-webkit-scrollbar-thumb &#123;</span><br><span class="line">        background-color: #c2c2c2;</span><br><span class="line">        background-clip: padding-box;</span><br><span class="line">        min-height: 28px</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ::-webkit-scrollbar-thumb:hover &#123;</span><br><span class="line">        background-color: #A0A0A0</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;!--返回顶部--&gt;</span><br><span class="line">&lt;a href=&quot;javascript:scroll(0,0)&quot; style=&quot;position:fixed;float:right;right:32px;top:70%&quot;&gt;返回顶部&lt;/a&gt; </span><br><span class="line">&lt;!--目录栏，设置占用宽度为20%可以根据实际情况设置--&gt;</span><br><span class="line">&lt;div style=&quot;width:20%;&quot; id=&quot;category&quot; class=&quot;book-summary&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;!--文章主体部分--&gt;</span><br><span class="line">&lt;div class=&quot;book-body&quot;&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p></p><h2 id="MarkdownPad2中的设置"><a href="#MarkdownPad2中的设置" class="headerlink" title="MarkdownPad2中的设置"></a>MarkdownPad2中的设置</h2><p>复制上面的代码，然后打开MarkDownPad2，<br>在MarkdownPad2中点击<code>工具--&gt;选项--&gt;高级--&gt;HTML Head编辑器</code>，然后粘贴上面代码，然后<code>保存并关闭</code>即可。<br><img src="https://i.imgur.com/pxuD8Y8.png" alt=""></p><p><img src="https://i.imgur.com/KIlcMJS.png" alt=""></p><p><img src="https://i.imgur.com/K6IXNSF.png" alt=""></p><h3 id="导出HTML"><a href="#导出HTML" class="headerlink" title="导出HTML"></a>导出HTML</h3><p>然后来导出HTML，这样才能看见侧目录。<br>选择<code>文件--&gt;导出--&gt;导出 HTML</code>,然后保存到本地即可。<br><img src="https://i.imgur.com/m1Q2OuZ.png" alt=""></p><p>然后就可看到效果了</p><p><img src="https://i.imgur.com/IjHSC6W.png" alt=""></p><p>本文链接: <a href="https://www.lansheng.net.cn/blog/59af15ef/">带书签JS设置1</a></p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://www.lansheng.net.cn/blog/6aff1849/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="蓝生"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="蓝生的博客"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/blog/6aff1849/" itemprop="url">小技巧-cmd常用命令之创建文件</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-08-03 14:03:56" itemprop="dateCreated datePublished" datetime="2018-08-03T14:03:56+08:00">2018-08-03</time> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2018-11-05 17:17:08" itemprop="dateModified" datetime="2018-11-05T17:17:08+08:00">2018-11-05</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/其他/" itemprop="url" rel="index"><span itemprop="name">其他</span></a></span> </span><span class="post-comments-count"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><a href="/blog/6aff1849/#comments" itemprop="discussionUrl"><span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/blog/6aff1849/" itemprop="commentCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><p>一、建立空文件的几种方法<br>1、<code>cd.&gt;a.txt</code><br>cd.表示改变当前目录为当前目录，即等于没改变；而且cd命令不会有输出。<br>“&gt;”表示把命令输出写入到文件。后面跟着a.txt，就表示写入到a.txt。<br>而此例中命令不会有输出，所以就创建了没有内容的空文件。<br><img src="https://i.imgur.com/jLjCU4z.png" alt=""><br>当然不用写地址也是可以的，也就是说<code>cd &gt;1.txt</code>也是可以的。<br><img src="https://i.imgur.com/s914p7I.png" alt=""></p><p>2、<code>copy nul a.txt</code><br><strong>nul表示空设备</strong>，从概念上讲，它不可见，存在于每个目录中，可以把它看成一个特殊的“文件”，它没有内容；<strong>一般可把输出写入到nul，来达到屏蔽输出的目的</strong>，如pause&gt;nul，此命令执行效果是暂停，并且不会显示“请按任意键继续…”。<br>此例子表示将空设备复制到a.txt，同样创建了没有内容的空文件。<br><img src="https://i.imgur.com/IMKmwSW.png" alt=""><br>3、<code>type nul&gt;a.txt</code><br>此例子表示显示空设备的内容，并写入到a.txt。空目录没有内容，所以也就是创建了一个空文件。<br><img src="https://i.imgur.com/gvC4DMB.png" alt=""></p><p>4、<code>echo a 2&gt;a.txt</code><br><strong>“<code>2</code>”表示错误输出的句柄</strong>，此例中没有错误输出，所以创建了没有内容的空文件。<br>其实<strong><code>&gt;</code>默认都是重定向了<code>句柄1</code>，即标准输出句柄</strong>。比如cd.&gt;a.txt，其实就是cd. 1&gt;a.txt。<br>同样，句柄3到9也可以使用在本例中，它们是未经定义的句柄，也不会有输出，如<br>echo a 3&gt;a.txt。</p><p>5、fsutil file createnew d:\a.txt 0<br>使用fsutil创建了一个空文件。</p><p>6、其他命令<br><strong>只要没有输出，并重定向到文件就可以了</strong></p><p>二、建立非空文件的几种方法<br>1、echo a&gt;a.txt<br>最常用的是echo命令，此例子表示把字母a和回车换行覆盖输出到a.txt（如果a.txt原来已有内容则覆盖掉原来的内容），如果追加内容，可以使用&gt;&gt;，如echo b&gt;&gt;a.txt，表示把b和回车换行追加到文件末尾。</p><p>2、其他命令的重定向输出，如<br>type a.txt &gt; b.txt<br>copy a.txt b.txt<br>fsutil file createnew d:\a.txt 1<br>转载自<br><a href="https://zhidao.baidu.com/question/277563240.html" target="_blank" rel="noopener">百度知道-cmd 如何新建文件</a></p><p>本文链接: <a href="https://www.lansheng.net.cn/blog/6aff1849/">小技巧-cmd常用命令之创建文件</a></p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://www.lansheng.net.cn/blog/39d991de/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="蓝生"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="蓝生的博客"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/blog/39d991de/" itemprop="url">使用git上传本地项目到GitHub上和更新</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-08-02 15:17:26" itemprop="dateCreated datePublished" datetime="2018-08-02T15:17:26+08:00">2018-08-02</time> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2018-11-05 17:17:05" itemprop="dateModified" datetime="2018-11-05T17:17:05+08:00">2018-11-05</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/git教程/" itemprop="url" rel="index"><span itemprop="name">git教程</span></a></span> </span><span class="post-comments-count"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><a href="/blog/39d991de/#comments" itemprop="discussionUrl"><span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/blog/39d991de/" itemprop="commentCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><p>使用git上传本地项目到GitHub上和更新<br>最近在玩GitHub这个基友平台，在这里做个总结，方便以后查阅，也可以给网友们做个参考。<br><strong>一：注册GitHub账号和下载git。</strong><br><strong>二：在GitHub上新建个仓库</strong>，点+号再点击<code>New repository</code>，给你的仓库起个名字，我的是test。<br><img src="https://images2017.cnblogs.com/blog/1214959/201711/1214959-20171109092743356-1757164386.jpg" alt=""></p><p><img src="https://images2017.cnblogs.com/blog/1214959/201711/1214959-20171109093101247-1143276449.jpg" alt=""><br><br><strong>三：安装git</strong>，我安装的是win64版本，直接解压安装就好。在本地磁盘找一个文件夹作为本地仓库，选择Git Bash Here，切换到/e/te 目录下，输入git init初始化，发现目录下多了一个.git文件夹。<br><img src="https://images2017.cnblogs.com/blog/1214959/201711/1214959-20171109093734716-1606118198.jpg" alt=""><br><img src="https://images2017.cnblogs.com/blog/1214959/201711/1214959-20171109094827934-1230236170.jpg" alt=""><br><img src="https://images2017.cnblogs.com/blog/1214959/201711/1214959-20171109094857966-1693570795.jpg" alt=""><br><strong>四：配置ssh key值</strong><br>在git命令行中对git进行全局设置，<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name &quot;你的GitHub用户名&quot;</span><br><span class="line">git config --global user.email &quot;你的GitHub邮箱地址&quot;</span><br></pre></td></tr></table></figure><p></p><p><img src="https://images2017.cnblogs.com/blog/1214959/201711/1214959-20171109095703513-1069227161.jpg" alt=""></p><p>在git命令行中，输入命令： cd ~/.ssh，来检测是否生成过key,没有生成过key，会有相关信息提示；然后输入命令： ssh-keygen -t rsa -C “邮箱地址”，按下回车键；然后根据返回的信息，找到.ssh目录下的两个文件；<br><img src="https://images2017.cnblogs.com/blog/1214959/201711/1214959-20171109100717231-679281242.jpg" alt=""><br><br>在github网站上点击“setting”，找到添加SSH key的菜单，然后新增SSH key；把文件id_rsa.pub 里面的内容全部复制到 key编辑框中，Title可以随便命名，保存完毕；<br><img src="https://images2017.cnblogs.com/blog/1214959/201711/1214959-20171109102959716-1646619495.jpg" alt=""></p><p>在git-bash中命令行输入：ssh -T <a href="mailto:git@github.com" target="_blank" rel="noopener">git@github.com</a>；这里会要求你输入SSH key密码，如果刚才生成SSH key时未输入密码，密码就为空；然后看到信息：</p><p>ERROR: Hi 用户名! You’ve successfully authenticated，but GitHub does not provide shell access.；说明配置成功；</p><p>登陆到github上查看刚刚输入的SSH key，现在图标的颜色变为绿色，说明密钥配置有效；现在可以在git命令行上进行git操作了；<br><img src="https://images2017.cnblogs.com/blog/1214959/201711/1214959-20171109103846028-153793615.jpg" alt=""></p><p><strong>五：上传本地项目到仓库</strong></p><p><strong>（1）远程仓库</strong><br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git remote add origin git@github.com:用户名/项目名</span><br></pre></td></tr></table></figure><p></p><p><img src="https://images2017.cnblogs.com/blog/1214959/201711/1214959-20171109105248622-376913523.jpg" alt=""></p><p><strong>（2）添加你要上传的文件</strong>，<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br></pre></td></tr></table></figure><p></p><p><code>.</code>代表上传目录下所有文件，可以在<code>git add</code>后面加上你要添加的特定文件，比如<code>git add aa.html</code><br><img src="https://images2017.cnblogs.com/blog/1214959/201711/1214959-20171109105846528-1532870439.jpg" alt=""><br><strong>(3)提交项目</strong>，输入<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit -a -m &quot;提交说明&quot;</span><br></pre></td></tr></table></figure><p></p><p><strong>(4)推送到GitHub上的master分支</strong><br>再输入<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin master</span><br></pre></td></tr></table></figure><p></p><p><img src="https://images2017.cnblogs.com/blog/1214959/201711/1214959-20171109110138091-1582511346.jpg" alt=""><br>大功告成，可以在GitHub查看项目<br><img src="https://images2017.cnblogs.com/blog/1214959/201711/1214959-20171109110521934-2132006458.jpg" alt=""></p><h2 id="更新项目"><a href="#更新项目" class="headerlink" title="更新项目"></a>更新项目</h2><p>更新项目，先添加文件(<code>git add .</code>)，再提交<code>git commit -m &quot;说明&quot;</code>，更新前最好用<code>git pull origin master</code>更新一下你的本地项目，因为可能有别人做了更新。最后再推送到远程仓库<code>git push origin master</code>就行了。<br><img src="https://images2017.cnblogs.com/blog/1214959/201711/1214959-20171109110853559-1249314412.jpg" alt=""></p><p>本文链接: <a href="https://www.lansheng.net.cn/blog/39d991de/">使用git上传本地项目到GitHub上和更新</a></p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article></section><nav class="pagination"><a class="extend prev" rel="prev" href="/page/21/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/21/">21</a><span class="page-number current">22</span><a class="page-number" href="/page/23/">23</a><a class="extend next" rel="next" href="/page/23/"><i class="fa fa-angle-right" aria-label="下一页"></i></a></nav></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><section class="site-overview-wrap sidebar-panel sidebar-panel-active"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="蓝生"><p class="site-author-name" itemprop="name">蓝生</p><p class="site-description motion-element" itemprop="description"></p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">230</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/index.html"><span class="site-state-item-count">78</span> <span class="site-state-item-name">分类</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://blog.csdn.net/qq_21808961" target="_blank" title="CSDN"><i class="fa fa-fw fa-arrow-right"></i>CSDN</a> </span><span class="links-of-author-item"><a href="https://www.shixiseng.com/" target="_blank" title="实习僧"><i class="fa fa-fw fa-arrow-right"></i>实习僧</a></span></div><div class="links-of-blogroll motion-element links-of-blogroll-block"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-link"></i> 友情链接</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="https://ziyuan.baidu.com/xzh/home/index" title="百度熊掌号" target="_blank">百度熊掌号</a></li><li class="links-of-blogroll-item"><a href="https://ziyuan.baidu.com/linksubmit/index" title="百度链接提交" target="_blank">百度链接提交</a></li><li class="links-of-blogroll-item"><a href="https://reuixiy.github.io/" title="超好看的Hexo+NexT博客" target="_blank">超好看的Hexo+NexT博客</a></li><li class="links-of-blogroll-item"><a href="https://www.face2ai.com/" title="谭升" target="_blank">谭升</a></li></ul></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2018</span> <span class="with-love" id="animate"><i class="fa fa-user"></i> </span><span class="author" itemprop="copyrightHolder">蓝生</span></div><div class="theme-info"><div class="powered-by"></div><span class="post-count">博客全站共325.9k字</span></div><div class="busuanzi-count"><script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="site-uv" title="总访客量"><i class="fa fa-user"></i> <span class="busuanzi-value" id="busuanzi_value_site_uv"></span> </span><span class="site-pv" title="总访问量"><i class="fa fa-eye"></i> <span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/js/src/utils.js?v=6.4.0"></script><script type="text/javascript" src="/js/src/motion.js?v=6.4.0"></script><script type="text/javascript" src="/js/src/affix.js?v=6.4.0"></script><script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.4.0"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=6.4.0"></script><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><script type="text/javascript">var GUEST=["nick","mail","link"],guest="nick,mail,link";guest=guest.split(",").filter(function(e){return GUEST.indexOf(e)>-1}),new Valine({el:"#comments",verify:!0,notify:!0,appId:"8uEACQMqUrxjo1Hqof21pkCV-gzGzoHsz",appKey:"DgRm99ypfVS7Mm9YLchO1RGG",placeholder:"在上方填入昵称，邮箱，个人博客地址即可评论",avatar:"mm",meta:guest,pageSize:"10",visitor:!1})</script><script type="text/javascript">function proceedsearch(){$("body").append('<div class="search-popup-overlay local-search-pop-overlay"></div>').css("overflow","hidden"),$(".search-popup-overlay").click(onPopupClose),$(".popup").toggle();var t=$("#local-search-input");t.attr("autocapitalize","none"),t.attr("autocorrect","off"),t.focus()}var isfetched=!1,isXml=!0,search_path="search.xml";0===search_path.length?search_path="search.xml":/json$/i.test(search_path)&&(isXml=!1);var path="/"+search_path,onPopupClose=function(t){$(".popup").hide(),$("#local-search-input").val(""),$(".search-result-list").remove(),$("#no-result").remove(),$(".local-search-pop-overlay").remove(),$("body").css("overflow","")},searchFunc=function(t,e,o){"use strict";$("body").append('<div class="search-popup-overlay local-search-pop-overlay"><div id="search-loading-icon"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div>').css("overflow","hidden"),$("#search-loading-icon").css("margin","20% auto 0 auto").css("text-align","center"),$.ajax({url:t,dataType:isXml?"xml":"json",async:!0,success:function(t){isfetched=!0,$(".popup").detach().appendTo(".header-inner");var n=isXml?$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get():t,r=document.getElementById(e),s=document.getElementById(o),a=function(){var t=r.value.trim().toLowerCase(),e=t.split(/[\s\-]+/);e.length>1&&e.push(t);var o=[];if(t.length>0&&n.forEach(function(n){function r(e,o,n,r){for(var s=r[r.length-1],a=s.position,i=s.word,l=[],h=0;a+i.length<=n&&0!=r.length;){i===t&&h++,l.push({position:a,length:i.length});var p=a+i.length;for(r.pop();0!=r.length&&(s=r[r.length-1],a=s.position,i=s.word,p>a);)r.pop()}return c+=h,{hits:l,start:o,end:n,searchTextCount:h}}function s(t,e){var o="",n=e.start;return e.hits.forEach(function(e){o+=t.substring(n,e.position);var r=e.position+e.length;o+='<b class="search-keyword">'+t.substring(e.position,r)+"</b>",n=r}),o+=t.substring(n,e.end)}var a=!1,i=0,c=0,l=n.title.trim(),h=l.toLowerCase(),p=n.content.trim().replace(/<[^>]+>/g,""),u=p.toLowerCase(),f=decodeURIComponent(n.url),d=[],g=[];if(""!=l&&(e.forEach(function(t){function e(t,e,o){var n=t.length;if(0===n)return[];var r=0,s=[],a=[];for(o||(e=e.toLowerCase(),t=t.toLowerCase());(s=e.indexOf(t,r))>-1;)a.push({position:s,word:t}),r=s+n;return a}d=d.concat(e(t,h,!1)),g=g.concat(e(t,u,!1))}),(d.length>0||g.length>0)&&(a=!0,i=d.length+g.length)),a){[d,g].forEach(function(t){t.sort(function(t,e){return e.position!==t.position?e.position-t.position:t.word.length-e.word.length})});var v=[];0!=d.length&&v.push(r(l,0,l.length,d));for(var $=[];0!=g.length;){var C=g[g.length-1],m=C.position,x=C.word,w=m-20,y=m+80;0>w&&(w=0),y<m+x.length&&(y=m+x.length),y>p.length&&(y=p.length),$.push(r(p,w,y,g))}$.sort(function(t,e){return t.searchTextCount!==e.searchTextCount?e.searchTextCount-t.searchTextCount:t.hits.length!==e.hits.length?e.hits.length-t.hits.length:t.start-e.start});var T=parseInt("1");T>=0&&($=$.slice(0,T));var b="";b+=0!=v.length?"<li><a href='"+f+"' class='search-result-title'>"+s(l,v[0])+"</a>":"<li><a href='"+f+"' class='search-result-title'>"+l+"</a>",$.forEach(function(t){b+="<a href='"+f+'\'><p class="search-result">'+s(p,t)+"...</p></a>"}),b+="</li>",o.push({item:b,searchTextCount:c,hitCount:i,id:o.length})}}),1===e.length&&""===e[0])s.innerHTML='<div id="no-result"><i class="fa fa-search fa-5x" /></div>';else if(0===o.length)s.innerHTML='<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>';else{o.sort(function(t,e){return t.searchTextCount!==e.searchTextCount?e.searchTextCount-t.searchTextCount:t.hitCount!==e.hitCount?e.hitCount-t.hitCount:e.id-t.id});var a='<ul class="search-result-list">';o.forEach(function(t){a+=t.item}),a+="</ul>",s.innerHTML=a}};r.addEventListener("input",a),$(".local-search-pop-overlay").remove(),$("body").css("overflow",""),proceedsearch()}})};$(".popup-trigger").click(function(t){t.stopPropagation(),isfetched===!1?searchFunc(path,"local-search-input","local-search-result"):proceedsearch()}),$(".popup-btn-close").click(onPopupClose),$(".popup").click(function(t){t.stopPropagation()}),$(document).on("keyup",function(t){var e=27===t.which&&$(".search-popup").is(":visible");e&&onPopupClose()})</script><script>!function(){var t=document.createElement("script"),s=window.location.protocol.split(":")[0];"https"===s?t.src="https://zz.bdstatic.com/linksubmit/push.js":t.src="http://push.zhanzhang.baidu.com/push.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()</script></body></html><script type="text/javascript" src="/js/src/love.js"></script><!-- rebuild by neat -->