<!-- build time:Sat Nov 10 2018 17:40:13 GMT+0800 (中国标准时间) --><!DOCTYPE html><html class="theme-next gemini use-motion" lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="google-site-verification" content="true"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=6.4.0" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple.png?v=6.4.0"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon32.png?v=6.4.0"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon16.png?v=6.4.0"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Gemini",version:"6.4.0",sidebar:{position:"right",display:"post",offset:12,b2t:!1,scrollpercent:!1,onmobile:!1},fancybox:!1,fastclick:!1,lazyload:!1,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><meta name="description" content="网络是几乎可以实时相互发送和接收数据的计算机和其他设备的集合节点网络中的每台机器称为一个节点(node),主机具有玩呗功能的计算机节点称为主机(host)用节点指代网络的所有设备，主机指代通用的计算机节点分组交换网络所有的现代计算机网络都是分组交换网络，流经网络的数据被分割成一个个的小块数据，称为包(packet,也称为分组)协议协议(protocol)是定义计算机如何通信的一组明确的规则：包括地"><meta name="keywords" content="没有关键字"><meta property="og:type" content="article"><meta property="og:title" content="java网络编程第4版 第1章 基本网络概念"><meta property="og:url" content="https://www.lansheng.net.cn/blog/40aaea03/index.html"><meta property="og:site_name" content="蓝生的博客"><meta property="og:description" content="网络是几乎可以实时相互发送和接收数据的计算机和其他设备的集合节点网络中的每台机器称为一个节点(node),主机具有玩呗功能的计算机节点称为主机(host)用节点指代网络的所有设备，主机指代通用的计算机节点分组交换网络所有的现代计算机网络都是分组交换网络，流经网络的数据被分割成一个个的小块数据，称为包(packet,也称为分组)协议协议(protocol)是定义计算机如何通信的一组明确的规则：包括地"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://i.imgur.com/nNoT9rR.png"><meta property="og:image" content="https://i.imgur.com/sjwPvWI.png"><meta property="og:image" content="https://i.imgur.com/4WPEwkR.png"><meta property="og:image" content="https://i.imgur.com/0lDn1pg.png"><meta property="og:image" content="https://i.imgur.com/UaS3Rtg.png"><meta property="og:updated_time" content="2018-11-05T09:17:10.975Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="java网络编程第4版 第1章 基本网络概念"><meta name="twitter:description" content="网络是几乎可以实时相互发送和接收数据的计算机和其他设备的集合节点网络中的每台机器称为一个节点(node),主机具有玩呗功能的计算机节点称为主机(host)用节点指代网络的所有设备，主机指代通用的计算机节点分组交换网络所有的现代计算机网络都是分组交换网络，流经网络的数据被分割成一个个的小块数据，称为包(packet,也称为分组)协议协议(protocol)是定义计算机如何通信的一组明确的规则：包括地"><meta name="twitter:image" content="https://i.imgur.com/nNoT9rR.png"><link rel="alternate" href="/atom.xml" title="蓝生的博客" type="application/atom+xml"><link rel="canonical" href="https://www.lansheng.net.cn/blog/40aaea03/"><script type="text/javascript" id="page.configurations">CONFIG.page={sidebar:""}</script><title>java网络编程第4版 第1章 基本网络概念 | 蓝生的博客</title><noscript><style type="text/css">.sidebar-inner,.use-motion .brand,.use-motion .collection-title,.use-motion .comments,.use-motion .menu-item,.use-motion .motion-element,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .logo,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN"><div class="container sidebar-position-right page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">蓝生的博客</span> <span class="logo-line-after"><i></i></span></a></div></div><div class="site-nav-toggle"><button aria-label="切换导航栏"><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i> </span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"><input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://www.lansheng.net.cn/blog/40aaea03/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="蓝生"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="蓝生的博客"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">java网络编程第4版 第1章 基本网络概念</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-08-20 14:35:12" itemprop="dateCreated datePublished" datetime="2018-08-20T14:35:12+08:00">2018-08-20</time> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2018-11-05 17:17:10" itemprop="dateModified" datetime="2018-11-05T17:17:10+08:00">2018-11-05</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/读书笔记/" itemprop="url" rel="index"><span itemprop="name">读书笔记</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/读书笔记/java网络编程第四版/" itemprop="url" rel="index"><span itemprop="name">java网络编程第四版</span></a></span> </span><span class="post-comments-count"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><a href="/blog/40aaea03/#comments" itemprop="discussionUrl"><span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/blog/40aaea03/" itemprop="commentCount"></span> </a></span><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-eye"></i> 阅读次数： <span class="busuanzi-value" id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body" itemprop="articleBody"><p>网络是几乎可以实时相互发送和接收数据的计算机和其他设备的集合</p><h2 id="节点"><a href="#节点" class="headerlink" title="节点"></a>节点</h2><p>网络中的每台机器称为一个节点(node),</p><h2 id="主机"><a href="#主机" class="headerlink" title="主机"></a>主机</h2><p>具有玩呗功能的计算机节点称为主机(host)<br>用节点指代网络的所有设备，主机指代通用的计算机节点</p><h2 id="分组交换网络"><a href="#分组交换网络" class="headerlink" title="分组交换网络"></a>分组交换网络</h2><p>所有的现代计算机网络都是分组交换网络，流经网络的数据被分割成一个个的小块数据，称为包(packet,也称为分组)</p><h2 id="协议"><a href="#协议" class="headerlink" title="协议"></a>协议</h2><p>协议(protocol)是定义计算机如何通信的一组明确的规则：包括</p><ul><li>地址格式，</li><li>数据如何分包等</li></ul><p>例如超文本传输协议(Hypertext Transfer Protocol,HTTP)定义了Web浏览器如何与服务器通信</p><h2 id="网络的分层"><a href="#网络的分层" class="headerlink" title="网络的分层"></a>网络的分层</h2><p>在理论生，每一层只与紧挨其上和其下的层对话。<br>将网络分层，这样就可以修改甚至替换某一层的软件，只要层与层之间的接口保持不变，就不会影响到其他层。<br><img src="https://i.imgur.com/nNoT9rR.png" alt=""></p><h2 id="TCP-IP四层模型"><a href="#TCP-IP四层模型" class="headerlink" title="TCP/IP四层模型"></a>TCP/IP四层模型</h2><p><img src="https://i.imgur.com/sjwPvWI.png" alt=""></p><h3 id="Web浏览器发送请求过程"><a href="#Web浏览器发送请求过程" class="headerlink" title="Web浏览器发送请求过程"></a>Web浏览器发送请求过程</h3><p>例如，当Web浏览器向Web服务器发送获取网页的请求是，浏览器实际上只与本地客户机上的传输层对话。</p><ul><li>传输层将请求分解为TCP片，向数据添加序列号和校验和，让后将请求(处理后的TCP片)传递给本地网际层。</li><li>网际层根据本地网络所需的大小将各个TCP片分成IP数据报。并传递到主机物理网络层，以便通过线缆传输数据。</li><li>主机物理网络层将数字编码为合适特定物理介质的模拟信号，将请求发送到线缆，目的地址的远程系统的主机网络层可以由此读取请求。</li></ul><p>远程系统的主机物理网络层将模拟信号解码为数字数据，将生成的IP数据包传递给服务器的网际层。<br>网网际层简单的检查IP数据报是否被破坏，如果已经分片则重组数据，然后传递给服务器的传输层。<br>服务器的传输层检查所有的数据是否都已经到达，对于丢失或破坏的部分，则要去重传(这个请求实际上将向下通过服务器的网际层，再通过服务器的主机网络层,回到客户端系统，然后再在客户端系统向上返回客户端的传输层，传输层在通过本地网际层和主机网络层重传前面丢失的数据。所有这些对于应用层是完全透明的)，一旦服务器的传输层接收到足够多的连续顺序数据报，就将这些连续的数据报重组写入一个流，由服务器应用层上运行的Web服务器读取。<br>服务器响应这个请求，再通过服务器系统的各个分层发回响应。通过Internet进行传输并分发给Web客户端。</p><p>可以猜到，实际的过程更为错综复杂。主机网络层是最为复杂的，特意地隐藏了很多细节。例如Internet发送的数据在最终目的地之前，完全有可能经过几个路由器以及相应的分层。可能需要从大气中的无线电波转换为铜线缆中的电子信号，在转换到光缆中的光脉冲，然后再反过来，从光脉冲转换到电子信号再到无线电波。不过，90%的情况下Java代码都将在应用层工作，只需要与传输层对话。其他10%的时间会在传输层处理，与应用层或网际层对话。</p><p><strong>主机网络层的复杂性对你是隐藏的，这是分层模型的关键。</strong></p><h2 id="主机网络层"><a href="#主机网络层" class="headerlink" title="主机网络层"></a>主机网络层</h2><p>在基于IP的Internet(Java唯一真正理解的网络)的标准参考模型中，网络中隐藏的部分数据主机网络层(host-to-work layer,也成链路层，数据链路层或网络接口层)<br>主机网络层，定义了一个特定的网络接口(如以太网卡或WiFi天线)如何通过物理连接想本地网络或世界其他地方发送IP数据报</p><p>Java从来都看不到物理层</p><p>需要考虑网络层和物理层的主要与原因是性能</p><h2 id="网际层"><a href="#网际层" class="headerlink" title="网际层"></a>网际层</h2><p>网际层(internet layer)这个是需要你考虑的第一层，在OSI模型中，网际层使用一个更一般的名字，称为网络层(network layer)。<br>网络层协议定义了数据为和字节如何组织为更大的分组，称为<code>包</code>,还定义了寻址机制，不同计算机要按照这个寻址机制查找对方。<br>忘记协议(IP)是世界上使用最广泛的网络层协议，也是java唯一理解的网络层协议。</p><p>数据按包在网际层上传输，这些包称为数据包(datagram)。每个IPv4数据报包含一个长度为20到60个字节的首部，以及一个包含多大65515字节的有效载荷(payload)。实际上，大多数IPv4数据包都小得多，从几十个字节到大约8K字节不等。<br>IPv6数据报包含一个更大的首部，数据可以多大4G字节。<br>下图展示了各个部分再IPv4数据报是如何排列的，所有为和字节都采用big-endian方式，从左至右为最高位到最低位。<br><img src="https://i.imgur.com/4WPEwkR.png" alt=""><br>除了路由和寻址，网际层的第二个作用是支持不同类型的主机网络层相互对话。Internet路由器会完成WiFi和Ethernet,Ethernet和DSL,DSL和光纤往返等协议之间的转换。如果没有网际层或类似的分层，则每个计算机只能与同一类网络上的其他计算进对话。</p><p>网际层负责使用同构协议将异构网络相互连接。</p><h2 id="传输层"><a href="#传输层" class="headerlink" title="传输层"></a>传输层</h2><p>原始数据报有一些特点。最显著的缺点是不能保证发送可靠，即使能传送也可能在传输中遭到破坏。首部校验和只能检测首部中的破坏情况，而不能检测数据部分。最后即使数据包能到达目的地儿为被破坏，也不一定会以发送时的顺讯到达。各个数据报可能经过不同路由从源到达目的地。如果数据报A在数据报B之前发送，这并不意味着数据报A会在数据报B之前到达。<br>传输层(transport layer)负责确保各包以发送的顺序接收，并保证没有数据丢失或被破坏，如果丢包，传输层会要求发送方重传这个包。为了实现这个目标IP网络会给每个数据报添加一个附加首部，其中包含有更多信息。<br>传输层上主要有两个协议，一个是传输控制协议(Transmission Control Protocol，TCP)，这是一个开销很高的协议，支持对丢失或破坏的数据进行重传，并按照发送时的顺序进行传送。<br>第二个协议是用户数据报协议(User Dategram Protocol,UDP),它允许接收方法检测被破坏的包，但不保证这些包以正确的顺序传输(或者包有可能根本未传送)。但是UDP通常比TCP快。<br>TCP称为可靠的协议；UDP是不可靠的协议。</p><h2 id="应用层"><a href="#应用层" class="headerlink" title="应用层"></a>应用层</h2><p>向用户传送数据的层称为应用层(application layer)。它下面的三层共同定义了数据如何从一台计算机传输到另一台计算机。应用层确定了数据传输后的操作。<br>例如应用层协议如HTTP(用于国际互联网)可以确保Web浏览器将图像显示为图片，而不是一长串数字。<br>你的程序中有关网络的部分大多是在应用层花费时间。<br>除了用于Web的HTTP，还有用于电子邮件的SMTP,POP和IMAP;<br>用于文件传输的FTP,FSP,和TFTP<br>用于文件访问的NFS,<br>用于文件共享的Guntella和BitTorrent;<br>用于语言通话的会话启动协议(Session Initiation Protocol，SIP)和Skype等。<br>此外，你的程序可以在必要时，定义自己的应用层协议</p><p>IP,TCP和UDP<br>IP(网际协议)</p><p>IP设计为允许任意两点之间有多个路由，可以绕过被破坏的路由器实现数据包的路由<br>IP必须是开放的，与平台无关</p><p>TCP置于IP之上，使得连接的两端能够确认接收到的IP包，以及请求重传丢失或被破坏的包。此外TCP允许接收端的包按发送时的顺序重新组合在一起。<br>不过TCP会有很大开销，因此，如果数据的顺序不是特别重要，而且单个包的丢失不会完全破坏数据流，那么有时候可以使用UDP发送数据包，而不需要TCP提供的保证。</p><p>UDP是不可靠的协议，它不能保证包一定到达目的地，也不保证包会以发送时相同的顺序到达。虽然这对于文件传输等用途来说存在问题，但是有些应用程序中，即使丢失部分数据最终用户也不会注意到，对于这种应用程序而言，UDP则完全可以接收。<br>例如，丢失视屏或银屏中的一些数据为不会造成太大的质量下降。如果要等待类似TCP等协议请求重传丢失的数据，那才会是更严重的问题。<br><strong>此外，可以在应用层的UDP数据流中建立纠错码，来解决数据丢失问题</strong></p><p>可以在IP之上运行很多其他协议。最常使用的是ICMP，即网际控制消息协议(Internet Control Message Protocol),它使用原始IP数据报在主机之间传递错误消息。使用这个协议最著名的应用是ping程序。Java不支持ICMP,也不允许发送原始IP数据报(而值运行发送TCP片或UDP数据报)</p><p>Java支持的协议只有TCP和UDP,如ICMP,IGMP，ARP,RARP,RSVP和其他协议在Java程序中都只能通过链接到原生代码来实现。</p><h2 id="IP地址和域名"><a href="#IP地址和域名" class="headerlink" title="IP地址和域名"></a>IP地址和域名</h2><p>作为Java程序员，你不需要担心IP的内部工作原理，但你必须了解寻址。IPv4网络中的每台计算机都由有一个4字节的数字来标识。一般写为点分四段格式，如<code>199.1.32.90</code>,这4个数中，每个数都是一个无符号字节，范围从0到255。IPv4网络中的每台计算机都有唯一的4字节地址。当数据通过网络传输时，包的首部会包括发往的机器地址(目的地址)和发送这个包的机器地址(源地址)。</p><p>沿途的路由器通过检查目的地址来发送数据包的最佳路由。IP包中包括源地址是为了让接收方知道要向谁回复。</p><p>IP地址不够用，现在正在想IPv6慢慢的过渡<br>IPv6使用16个字节的地址，这样就能有足够的地址来表示每个人，每天计算机，甚至是地球上的每一个设备。</p><h3 id="IPv6地址格式"><a href="#IPv6地址格式" class="headerlink" title="IPv6地址格式:"></a>IPv6地址格式:</h3><p><strong>IPv6地址通常为冒号分割的8个区块</strong>，每个区块是<code>4</code>个<code>16</code>进制数字，如<code>FEDC:BA98:7654:3210:FEDC:BA98:7654:3210</code>。前导的0不需要写，两个冒号表示多个0区块。例如<code>FEDC:0000:0000:0000:00DC:0000:7076:0010</code>可以写为更紧凑的形式，如：<code>FEDC::DC:0:7076:10</code></p><p>在IPv6和IPv4的混合网络中，IPv6地址的最后4个字节有时候写为IPv4的点分四段地址。例如,<code>FEDC:BA98:7654:3210:FEDC:BA98:7654:3210</code>可以写为：<code>FEDC:BA98:7654:3210:118.84.50.16</code></p><p>IPv6只在Java1.4以及以后版本中支持。Java1.3及以前版本只支持4字节地址。</p><h3 id="域名系统"><a href="#域名系统" class="headerlink" title="域名系统"></a>域名系统</h3><p>虽然计算机可以轻松的处理数字，但是人来对记忆数字不在行。所以开发了域名系统(Domain Name System,DNS)，用来将人类易于记忆的主机名(例如：<code>github.com</code>)转换为数字Internert地址(例如<code>52.74.223.119</code>)。当Java程序访问网络时，它们需要同时处理数字地址和响应的主机名。这些方法由<code>java.net.InetAddress</code>类提供。</p><p>有些计算机(尤其是服务器)有固定的地址。也有些其他计算机(特别是局域网和无线连接上的客户端)可能每次启动时会分配到不同的地址，这通常有DHCP服务器提供。</p><p><strong>你只需要记住IP地址可能会随着时间而改变，写代码时不要假定系统有相同的IP地址。</strong></p><h3 id="不可路由的地址"><a href="#不可路由的地址" class="headerlink" title="不可路由的地址"></a>不可路由的地址</h3><p>有一些地址区块和模式很特殊，以<code>10.</code>，<code>172.16.</code>，<code>172.31.</code>，和<code>192.168.</code>开头的所有IPv4地址都未分配。这些地址可以在内部网络使用，但是使用这些地址的主机不允许加入全球<code>Internet</code>。不过这些不可路由的地址对于建立Internet上看不到的专用网会很有用。</p><h3 id="本地回送地址"><a href="#本地回送地址" class="headerlink" title="本地回送地址"></a>本地回送地址</h3><p>以127开头的IPv4地址(最常见的是<code>127.0.0.1</code>)总是表示本地回送地址(<code>local loopback address</code>)。这就是说，这些地址总是指向本地计算机，而不论你在哪个计算机上运行。这个地址的主机名通常是<code>localhost</code>。</p><h3 id="广播地址"><a href="#广播地址" class="headerlink" title="广播地址"></a>广播地址</h3><p><code>4</code>个字节都使用相同数字的IPv4地址(如<code>255.255.255.255</code>)是一个广播地址。发送到这个地址的包将由本地网络多行的所有节点接收，但不能超越这个本地网络。例如,一个临时使用的客户端(如笔记本电脑)启动时，他会想<code>255.255.255.255</code>发送一个特定的消息，查找本地<code>DHCP</code>服务器。这个网络上的所有节点都接收到这个包，不过只有<code>DHCP</code>服务器做出相应。具体地，它会想这个笔记本电脑发送本地网络配置的有关信息，包括这个笔记本电脑在余下的会话中要使用的<code>IP</code>地址以及用来解析主机名的<code>DNS</code>服务器的地址。</p><h2 id="端口"><a href="#端口" class="headerlink" title="端口"></a>端口</h2><p>如果每台计算机每次只做一件事情，那么地址可能就足够了。但是，现代计算机同时要做很多不同的事情。电子邮件需要与FTP请求分开，而FTP又要与Web业务流分开。<br>这是通过端口(port)来实现的。每台有IP地址的计算机都有几千个逻辑端口，确切的讲，每个传输层洗衣有65535个端口。这些知识计算机内存中的抽象，不表示任何物理实体，与USB端口不同。每个端口都是由1到65535之间的一个数字标识。每个端口可以分配给一个特定的服务。<br>例如，Web层协议HTTP一般使用80端口，我们说Web服务器在端口80监听(listen)入站连接(incomming connection)。<br>当数据发送到特定IP地址的某个机器上的Web服务器时,它还会发送到该机器的特定端口(通常是80端口)。<br>接收方检查接口收到的每个包，将数据发送给监听这个端口的程序。各种通信业务流就是这样区分的。<br>1到1023的端口号保留给已知的服务，如finger,FTP，HTTP和IMAP.在UNIX系统上包括Linux,这有root用户运行的程序来可以接收这些端口的数据。但是所有的程序都可以想这些端口发送数据。<br>在Windows上，所有的程序都可以使用这些端口，不需要专门的特权。</p><table><thead><tr><th style="text-align:left">协议名</th><th style="text-align:left">端口</th><th style="text-align:left">使用的传输协议</th><th style="text-align:left">用途</th></tr></thead><tbody><tr><td style="text-align:left"><code>echo</code></td><td style="text-align:left">7</td><td style="text-align:left">TCP/UDP</td><td style="text-align:left">echo是一个测试协议，通过回显另一台机器的输入来验证两台机器是否连接成功</td></tr><tr><td style="text-align:left"><code>discard</code></td><td style="text-align:left">9</td><td style="text-align:left">TCP/UDP</td><td style="text-align:left">discard是一种用处不太大的协议，它将忽略服务器收到的所有数据</td></tr><tr><td style="text-align:left"><code>daytime</code></td><td style="text-align:left">13</td><td style="text-align:left">TCP/UDP</td><td style="text-align:left">提供服务器当前时间的ASCII表示</td></tr><tr><td style="text-align:left"><code>FTP数据</code></td><td style="text-align:left">20</td><td style="text-align:left">TCP</td><td style="text-align:left">FTP使用两个已知端口，这个20端口用来传输文件</td></tr><tr><td style="text-align:left"><code>FTP</code></td><td style="text-align:left">21</td><td style="text-align:left">TCP</td><td style="text-align:left">这个端口用来发送FTP命令，如put和get</td></tr><tr><td style="text-align:left"><code>SSH</code></td><td style="text-align:left">22</td><td style="text-align:left">TCP</td><td style="text-align:left">用于加密的远程登录</td></tr><tr><td style="text-align:left"><code>Telnet</code></td><td style="text-align:left">23</td><td style="text-align:left">TCP</td><td style="text-align:left">用于交互式远程命令行会话</td></tr><tr><td style="text-align:left"><code>smtp</code></td><td style="text-align:left">25</td><td style="text-align:left">TCP</td><td style="text-align:left">简单邮件传输协议(Simple Mail Transfer Protocol)用来在机器间发送邮件</td></tr><tr><td style="text-align:left"><code>time</code></td><td style="text-align:left">37</td><td style="text-align:left">TCP/UDP</td><td style="text-align:left">时间服务器返回服务器从1990年1月1日0:0:0之后过去的秒数，这是一个4字节有符号big-endain整数</td></tr><tr><td style="text-align:left"><code>whois</code></td><td style="text-align:left">43</td><td style="text-align:left">TCP</td><td style="text-align:left">用于Internet网络管理的简单目录服务</td></tr><tr><td style="text-align:left"><code>finger</code></td><td style="text-align:left">79</td><td style="text-align:left">TCP</td><td style="text-align:left">返回本地系统中用户(或多个用户)有关信息的服务</td></tr><tr><td style="text-align:left"><code>HTTP</code></td><td style="text-align:left">80</td><td style="text-align:left">TCP</td><td style="text-align:left">国际互联网的低层协议</td></tr><tr><td style="text-align:left"><code>POP3</code></td><td style="text-align:left">110</td><td style="text-align:left">TCP</td><td style="text-align:left">邮局协议版本3(Post Office Protocol Version 3)协议可以将积累的电子邮件从主机传输到偶然连接的客户端</td></tr><tr><td style="text-align:left"><code>NNTP</code></td><td style="text-align:left">119</td><td style="text-align:left">TCP</td><td style="text-align:left">Usenet新闻传输，正式的说无法为”网络新闻传输协议”(Network News Transfer Protocol)</td></tr><tr><td style="text-align:left"><code>IMAP</code></td><td style="text-align:left">143</td><td style="text-align:left">TCP</td><td style="text-align:left">Internet消息访问协议(Internet Message Access Protocol)是访问存储在服务器上的邮件的协议</td></tr><tr><td style="text-align:left"><code>dict</code></td><td style="text-align:left">2628</td><td style="text-align:left">TCP</td><td style="text-align:left">提供单词定义的UTF-8编码的字典服务</td></tr></tbody></table><h2 id="Internet"><a href="#Internet" class="headerlink" title="Internet"></a>Internet</h2><p>Internet是世界上最大的基于IP的网络。Internet不属于任何人(不过它的各个部分有响应的所有者)。它只是约定以只用标准方式相互对话的一个非常大的计算机集合。<br><code>Internet</code>不是唯一的基于IP的网络，但却是最大的一个。其他的IP网络成为<code>internet</code>(首字母<code>i</code>小写)</p><p>为确保Internet上不同网络的主机可以相互通信，就需要遵守一些对纯粹内部<code>internet</code>不适用的规则。更重要的规则是要处理不同组织，公司和个人地址的分配。<br>如果每个人都随意地挑选Internet地址，那么有相同地址的不同计算机出现在Internet上立即就会引起冲突。</p><h2 id="Internet地址分块"><a href="#Internet地址分块" class="headerlink" title="Internet地址分块"></a>Internet地址分块</h2><p>为了避免这个问题，区域Internet注册机构为Internet服务提供商(ISP)分配IPv4地址块。当公式或组织要建立一个基于IP的网络连接到Internet时，它们的ISP会给她们分配一个地址块。每个地址块有固定的前缀。例如如果前缀是<code>216.254.85</code>，那么本地网络可以使用从216.254.85.0到216.254.85.255的地址。由于这个块固定了前24位，所以称为<code>/24</code>。<br>同理：<br><code>/23</code>指定了前<code>23</code>位,而留出9位表示总共<code>2^9=512</code>个本机IP地址。<br>“/30”子网(最小的子网)指定了子网中IP地址的前30位，留出2位表示2^2=4个本地IP地址。</p><p>不过，所有块中最低地址用于表示网络本身，最高地址是这个网络的一个广播地址。所以可用地址比分到的地址要少两个。</p><p>那么”<code>/30</code>“中的四个本地IP地址中，除去一个表示网络本身的最低地址，除去一个用于广播的最高地址，就只剩下两个可用自由分配的地址了。</p><h2 id="网络地址转换"><a href="#网络地址转换" class="headerlink" title="网络地址转换"></a>网络地址转换</h2><p>由于IP地址越来越稀缺，而对原始IP地址的需求越来越大，如今大多数网络都使用了网络地址转换(Network Address Translation,NAT)。<br>基于NAT的网络中，大多数阶段只有不可路由的本地地址，这些地址可能从<code>10.x.x.x</code>,<code>172.16.x.x</code>到<code>172.31.x.x</code>或<code>192.168.x.x</code>选择。<br>例如，我的公寓里大学有十来个IP节点，大家会公用一个外部可见的IP(<code>216.254.85.72</code>)地址。我现在用的这个计算机的IP地址是<code>192.168.1.5</code>，不过在你的网络中<code>192.168.1.5</code>这个地址可能指示的是一个完全不同的主机(如果存在这样一个主机)。<br>另外，你也无法使用<code>192.168.1.5</code>发送数据到我的计算机。</p><p>实际上你必须把数据发送到到<code>216.254.85.72</code>这个地址(即使如此，只有当为把NAT路由器配置为<code>将入站连接传递到`</code>192.168.1.5`时,数据才会真正送达我的计算机)。</p><p>路由器会监视出站和入站连接，调整IP包中地址。例如，我向外网发数据，对于这些出站的包，路由器将这个包的源地址该为路由器的外部地址(在我这个网络是:<code>2016.254.85.72</code>)。<br>而外网发来的这些入站的包，路由器将目的地址改为一个本地地址。如<code>192.168.1.12</code>。<br>那么路由器如何记录哪些连接来自或发往那台内部计算机,这对于Java程序员并不是特别重要。只要正确配置了你的机器，这个过程基本上<br>就是透明的。<strong>你只需要记住外部地址和内部地址有可能不同就行了。</strong><br>感觉作者这里没有说清楚，说了一半的感觉</p><h2 id="防火墙"><a href="#防火墙" class="headerlink" title="防火墙"></a>防火墙</h2><p>位于Internet和本地网络之间的一些硬件和软件会检查所有进出的数据，以保证其合法性。这就称为防火墙(firewall)。</p><p><strong>防火墙要负责检查传入或传出其网络结构的各个包，根据一组规则接收或拒绝这些包。</strong></p><p><strong>过滤通常是基于地址和端口的。</strong>例如，多有来自C类网络<code>193.28.25.x</code>的通信会被拒绝，因为你过去遭受过这个网站中黑客的攻击。</p><p>出站的SSH连接可能是允许的，但入站的SSH连接不允许，端口<code>80</code>(Web)的入站连接时允许的，但只限于公司的Web服务器。</p><p><strong>更智能的防火墙会查看包的内容，确定是否接收或拒绝</strong>。防火墙具体的配置(哪些数据包允许通过而哪些不允许通过)取决于网站的安全需求。Java与防火墙没有太大关系，除非防火墙总是妨碍你的事。</p><h2 id="代理服务器"><a href="#代理服务器" class="headerlink" title="代理服务器"></a>代理服务器</h2><blockquote><p>代理服务器(proxy server)与防火墙有关。如果说防火墙会阻止一个网络上的主机与外界直接建立连接，那么代理服务器就起到中间人的作用。</p><p>如果防火墙阻止一个机器连接外部网络，这个机器可以请求本地代理服务器的Web页面，而不是直接请求远程Web服务器的Web页面。<br>然后代理服务器会请求远程Web服务器的页面，将远程Web服务器的响应转发给最初发出请求的机器。</p><p>代理还可以用于FTP服务器和其他连接。</p><p>使用代理服务器的安全优势之一是外部主机只能看到代理服务器，而不会知道内部机器的主机名和IP地址，这样就是的攻击内部网络更加困难。</p></blockquote><p>个人绝对代理服务器就好比黄牛，通过访问代理服务器来访问外网，就跟我们跟黄牛买票差不多。<br>防火墙一般工作与传输层或网际层，而代理服务器通常工作与应用层。代理服务器对一些应用层协议非常了解，如HTTP和FTP(一个值得注意的例外是SOCKS代理服务器，Socks服务器工作与传输层，可以代理所有的TCP和UDP连接，而不考虑应用层协议)</p><p>可以检查通过代理服务的包，确保其中包含适当类型的数据。<br>下图展示了代理服务器在分层模型中的位置：<br><img src="https://i.imgur.com/0lDn1pg.png" alt=""></p><p>只要所有对Internet的访问都通过代理服务器转发，那么访问就可以收到严格的控制。<br>例如，公司可能选择组织访问<a href="http://www.playboy.com,但允许访问www.microsoft.com。一些公式允许入站FTP，但不允许出站FTP。这样公司的机密数据就不会容易的被非法带出公司。" target="_blank" rel="noopener">www.playboy.com,但允许访问www.microsoft.com。一些公式允许入站FTP，但不允许出站FTP。这样公司的机密数据就不会容易的被非法带出公司。</a></p><p>其他公式已经开始使用代理服务器来跟踪员工的Web使用情况，这样可以看到是谁在利用Internet获取技术支持，是谁在利用它找私人朋友。</p><h3 id="实现本地缓存"><a href="#实现本地缓存" class="headerlink" title="实现本地缓存"></a>实现本地缓存</h3><p>代理服务器还可以用来实现本地缓存(local caching)。当请求Web服务器的文件时，代理服务器首先查看此文件是否已经在缓存中。如果文件在缓存中，那么代理服务器将提供缓存中的文件，而不是Internet上的文件。如果这个文件不在缓存中，那么代理服务器将从Internet中获取此文件，然后转发给请求方，并将该文件存储在缓存中，供下次请求使用。这种机制可以显著的降低Internet连接的负载，大大提高响应时间。</p><p>例如，美国在线(America Online)<code>aol.com</code>运行着世界上最大的代理服务器<code>场</code>之一，代理服务器可以加快向用户传输数据的速度。如果你查看Web服务器的日志文件，可能会发现<code>aol.com</code>域客户的一些点击记录，但不想你想象的那么多，要知道AOL用户已经超过300万。按理说，这么多人访问，点击记录应该很多才是。<br>这是因为当用户访问时，AOL代理服务器优先从其缓存中提供了许多页面，而不是为每位用户都重新请求页面。很多其他大的ISP也是这样做的。</p><h3 id="代理服务器的缺点"><a href="#代理服务器的缺点" class="headerlink" title="代理服务器的缺点"></a>代理服务器的缺点</h3><p>代理服务器最大的问题在于它无法应对所有协议。通常已有的协议如HTTP,FTP和SMTP允许通过，而新的协议如BitTorrent则可能不允许通过。在快速改变的Internet世界，这是一个很大的缺点，对于Java程序员而言这是一个缺点，因为他限制了定制协议的有效性。</p><p>使用Java可以很容易地创建为你的应用而优化的新协议，这么做通常也很有用。但是，没有代理服务器能够理解你这些独一无二的协议。<br>因此，有些开发人员开始通过HTTP来接入他们定制的协议，最著名的是SOAP。</p><h2 id="客户-服务器模型"><a href="#客户-服务器模型" class="headerlink" title="客户/服务器模型"></a>客户/服务器模型</h2><p>大多数现代网络编程都基于<code>客户/服务器模型</code>。</p><h3 id="客户端和服务器端功能分解"><a href="#客户端和服务器端功能分解" class="headerlink" title="客户端和服务器端功能分解"></a>客户端和服务器端功能分解</h3><ul><li>客户/服务器应用程序一般讲大量数据存储在昂贵的高性能服务器或服务器云上。</li><li>而大多数程序逻辑和用户界面有客户端软件处理，这些客户端软件运行在相对便宜的个人计算机上。</li></ul><p>在多数情况下，服务器主要发送数据，而客户端主要接收数据，但是很少有一个程序只发送或只接受数据。</p><p>更有可能的是客户端发起对话，而服务器等待客户端与它开始对话。在有些情况下，同一个程序会同时作为客户端和服务器，下图展示了这两种可能性。<br><img src="https://i.imgur.com/UaS3Rtg.png" alt=""></p><blockquote><p>Internet上最流行的客户/服务器系统是Web,Web服务器(如Apache)响应Web客户端(如Firefox)的请求。数据存储在Web服务器上，会发送给请求数据的客户端。除了最初的页面请求，几乎所有数据都从服务器想客户端传输，而不是从客户端传输到服务器。</p><p>FTP是符合客户端/服务器模型的更古老的服务。FTP使用不同的应用协议和不同的软件，但依然分为<strong>发送文件的FTP服务器和接收文件的FTP客户端。</strong>人们通常使用FTP从客户端向服务器上传文件，所以很难讲数据传输是一个方向传输的。但是要说FTP客户端发起连接而FTP服务器进行响应，这仍然是正确的。</p></blockquote><h3 id="对等连接"><a href="#对等连接" class="headerlink" title="对等连接"></a>对等连接</h3><p>不是所有应用程序都简单的符合客户端/服务器模型。例如，在网络游戏中，看起来两个玩家都能大致相同的来回发送数据(公平游戏中)。这种连接称为<code>对等</code>(peer-to-peer)连接。</p><h4 id="对等网路典型例子"><a href="#对等网路典型例子" class="headerlink" title="对等网路典型例子"></a>对等网路典型例子</h4><p>电话系统就是典型的对等网络例子,每部电话都可以呼叫另外的电话，或者被另外的电话呼叫。<br>Java在其核心网络API中没有显示的对等通信。不过，引用程序可以很容易的通过集中方式提供对等通信，最常见的是同时所谓服务器和客户端。另外，对等端可以通过中间服务器程序相互通信，这个程序将程序从一端转发到其他对等端。这样就很好的解决了两个对等端如何发现对方的问题。</p><h2 id="Internet标准"><a href="#Internet标准" class="headerlink" title="Internet标准"></a>Internet标准</h2><p>世界上有很多标准组织，但是关于应用层网络编程的协议大多数标准都是由下面两个组织制定的，它们分别是IETF(Internet Engineering Task Forse,Internet工程任务组)和W3C(World Wide Web Consortium,国际互联网协会)。</p><p>IETF是不太正式的民间团体,向所有感兴趣参与的团队开放。它的标准是根据”多数人的意见和正在运行的代码”做出决定,倾向于跟踪而不是引导实现。IETF(Internet工程任务组)标准包括TCP/IP,MIME和SMTP。</p><p>与IETF不同W3C是厂商组织，由缴纳会费的成员公司控制，明确拒绝个人参与。在极大程度上，W3C会尽力在实现之前定义标准，W3C标准包括HTTP，HTML和XML。</p><p>本文链接: <a href="https://www.lansheng.net.cn/blog/40aaea03/">java网络编程第4版 第1章 基本网络概念</a></p></div><div><div style="padding:10px 0;margin:20px auto;width:90%;text-align:center"><div></div><button id="rewardButton" disable="enable" onclick='var e=document.getElementById("QR");"none"===e.style.display?e.style.display="block":e.style.display="none"'><span>打赏</span></button><div id="QR" style="display:none"><div id="wechat" style="display:inline-block"><img id="wechat_qr" src="/images/wechatpay.png" alt="蓝生 微信支付"><p>微信支付</p></div><div id="alipay" style="display:inline-block"><img id="alipay_qr" src="/images/alipay.png" alt="蓝生 支付宝"><p>支付宝</p></div></div></div></div><footer class="post-footer"><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/blog/9e1b6b70/" rel="next" title="匹配IP地址"><i class="fa fa-chevron-left"></i> 匹配IP地址</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/blog/c52cb4ad/" rel="prev" title="Java IO流 过滤器流">Java IO流 过滤器流 <i class="fa fa-chevron-right"></i></a></div></div></footer></div></article></div></div><div class="comments" id="comments"></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">文章目录</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">站点概览</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="蓝生"><p class="site-author-name" itemprop="name">蓝生</p><p class="site-description motion-element" itemprop="description"></p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">234</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/index.html"><span class="site-state-item-count">79</span> <span class="site-state-item-name">分类</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://blog.csdn.net/qq_21808961" target="_blank" title="CSDN"><i class="fa fa-fw fa-arrow-right"></i>CSDN</a> </span><span class="links-of-author-item"><a href="https://www.shixiseng.com/" target="_blank" title="实习僧"><i class="fa fa-fw fa-arrow-right"></i>实习僧</a></span></div><div class="links-of-blogroll motion-element links-of-blogroll-block"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-link"></i> 友情链接</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="https://ziyuan.baidu.com/xzh/home/index" title="百度熊掌号" target="_blank">百度熊掌号</a></li><li class="links-of-blogroll-item"><a href="https://ziyuan.baidu.com/linksubmit/index" title="百度链接提交" target="_blank">百度链接提交</a></li><li class="links-of-blogroll-item"><a href="https://reuixiy.github.io/" title="超好看的Hexo+NexT博客" target="_blank">超好看的Hexo+NexT博客</a></li><li class="links-of-blogroll-item"><a href="https://www.face2ai.com/" title="谭升" target="_blank">谭升</a></li></ul></div></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#节点"><span class="nav-number">1.</span> <span class="nav-text">节点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#主机"><span class="nav-number">2.</span> <span class="nav-text">主机</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#分组交换网络"><span class="nav-number">3.</span> <span class="nav-text">分组交换网络</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#协议"><span class="nav-number">4.</span> <span class="nav-text">协议</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#网络的分层"><span class="nav-number">5.</span> <span class="nav-text">网络的分层</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#TCP-IP四层模型"><span class="nav-number">6.</span> <span class="nav-text">TCP/IP四层模型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Web浏览器发送请求过程"><span class="nav-number">6.1.</span> <span class="nav-text">Web浏览器发送请求过程</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#主机网络层"><span class="nav-number">7.</span> <span class="nav-text">主机网络层</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#网际层"><span class="nav-number">8.</span> <span class="nav-text">网际层</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#传输层"><span class="nav-number">9.</span> <span class="nav-text">传输层</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#应用层"><span class="nav-number">10.</span> <span class="nav-text">应用层</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IP地址和域名"><span class="nav-number">11.</span> <span class="nav-text">IP地址和域名</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#IPv6地址格式"><span class="nav-number">11.1.</span> <span class="nav-text">IPv6地址格式:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#域名系统"><span class="nav-number">11.2.</span> <span class="nav-text">域名系统</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#不可路由的地址"><span class="nav-number">11.3.</span> <span class="nav-text">不可路由的地址</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#本地回送地址"><span class="nav-number">11.4.</span> <span class="nav-text">本地回送地址</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#广播地址"><span class="nav-number">11.5.</span> <span class="nav-text">广播地址</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#端口"><span class="nav-number">12.</span> <span class="nav-text">端口</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Internet"><span class="nav-number">13.</span> <span class="nav-text">Internet</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Internet地址分块"><span class="nav-number">14.</span> <span class="nav-text">Internet地址分块</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#网络地址转换"><span class="nav-number">15.</span> <span class="nav-text">网络地址转换</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#防火墙"><span class="nav-number">16.</span> <span class="nav-text">防火墙</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#代理服务器"><span class="nav-number">17.</span> <span class="nav-text">代理服务器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#实现本地缓存"><span class="nav-number">17.1.</span> <span class="nav-text">实现本地缓存</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#代理服务器的缺点"><span class="nav-number">17.2.</span> <span class="nav-text">代理服务器的缺点</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#客户-服务器模型"><span class="nav-number">18.</span> <span class="nav-text">客户/服务器模型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#客户端和服务器端功能分解"><span class="nav-number">18.1.</span> <span class="nav-text">客户端和服务器端功能分解</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#对等连接"><span class="nav-number">18.2.</span> <span class="nav-text">对等连接</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#对等网路典型例子"><span class="nav-number">18.2.1.</span> <span class="nav-text">对等网路典型例子</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Internet标准"><span class="nav-number">19.</span> <span class="nav-text">Internet标准</span></a></li></ol></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2018</span> <span class="with-love" id="animate"><i class="fa fa-user"></i> </span><span class="author" itemprop="copyrightHolder">蓝生</span></div><div class="theme-info"><div class="powered-by"></div><span class="post-count">博客全站共335.5k字</span></div><div class="busuanzi-count"><script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="site-uv" title="总访客量"><i class="fa fa-user"></i> <span class="busuanzi-value" id="busuanzi_value_site_uv"></span> </span><span class="site-pv" title="总访问量"><i class="fa fa-eye"></i> <span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/js/src/utils.js?v=6.4.0"></script><script type="text/javascript" src="/js/src/motion.js?v=6.4.0"></script><script type="text/javascript" src="/js/src/affix.js?v=6.4.0"></script><script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.4.0"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=6.4.0"></script><script type="text/javascript" src="/js/src/post-details.js?v=6.4.0"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=6.4.0"></script><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><script type="text/javascript">var GUEST=["nick","mail","link"],guest="nick,mail,link";guest=guest.split(",").filter(function(e){return GUEST.indexOf(e)>-1}),new Valine({el:"#comments",verify:!0,notify:!0,appId:"8uEACQMqUrxjo1Hqof21pkCV-gzGzoHsz",appKey:"DgRm99ypfVS7Mm9YLchO1RGG",placeholder:"在上方填入昵称，邮箱，个人博客地址即可评论",avatar:"mm",meta:guest,pageSize:"10",visitor:!1})</script><script type="text/javascript">function proceedsearch(){$("body").append('<div class="search-popup-overlay local-search-pop-overlay"></div>').css("overflow","hidden"),$(".search-popup-overlay").click(onPopupClose),$(".popup").toggle();var t=$("#local-search-input");t.attr("autocapitalize","none"),t.attr("autocorrect","off"),t.focus()}var isfetched=!1,isXml=!0,search_path="search.xml";0===search_path.length?search_path="search.xml":/json$/i.test(search_path)&&(isXml=!1);var path="/"+search_path,onPopupClose=function(t){$(".popup").hide(),$("#local-search-input").val(""),$(".search-result-list").remove(),$("#no-result").remove(),$(".local-search-pop-overlay").remove(),$("body").css("overflow","")},searchFunc=function(t,e,o){"use strict";$("body").append('<div class="search-popup-overlay local-search-pop-overlay"><div id="search-loading-icon"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div>').css("overflow","hidden"),$("#search-loading-icon").css("margin","20% auto 0 auto").css("text-align","center"),$.ajax({url:t,dataType:isXml?"xml":"json",async:!0,success:function(t){isfetched=!0,$(".popup").detach().appendTo(".header-inner");var n=isXml?$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get():t,r=document.getElementById(e),s=document.getElementById(o),a=function(){var t=r.value.trim().toLowerCase(),e=t.split(/[\s\-]+/);e.length>1&&e.push(t);var o=[];if(t.length>0&&n.forEach(function(n){function r(e,o,n,r){for(var s=r[r.length-1],a=s.position,i=s.word,l=[],h=0;a+i.length<=n&&0!=r.length;){i===t&&h++,l.push({position:a,length:i.length});var p=a+i.length;for(r.pop();0!=r.length&&(s=r[r.length-1],a=s.position,i=s.word,p>a);)r.pop()}return c+=h,{hits:l,start:o,end:n,searchTextCount:h}}function s(t,e){var o="",n=e.start;return e.hits.forEach(function(e){o+=t.substring(n,e.position);var r=e.position+e.length;o+='<b class="search-keyword">'+t.substring(e.position,r)+"</b>",n=r}),o+=t.substring(n,e.end)}var a=!1,i=0,c=0,l=n.title.trim(),h=l.toLowerCase(),p=n.content.trim().replace(/<[^>]+>/g,""),u=p.toLowerCase(),f=decodeURIComponent(n.url),d=[],g=[];if(""!=l&&(e.forEach(function(t){function e(t,e,o){var n=t.length;if(0===n)return[];var r=0,s=[],a=[];for(o||(e=e.toLowerCase(),t=t.toLowerCase());(s=e.indexOf(t,r))>-1;)a.push({position:s,word:t}),r=s+n;return a}d=d.concat(e(t,h,!1)),g=g.concat(e(t,u,!1))}),(d.length>0||g.length>0)&&(a=!0,i=d.length+g.length)),a){[d,g].forEach(function(t){t.sort(function(t,e){return e.position!==t.position?e.position-t.position:t.word.length-e.word.length})});var v=[];0!=d.length&&v.push(r(l,0,l.length,d));for(var $=[];0!=g.length;){var C=g[g.length-1],m=C.position,x=C.word,w=m-20,y=m+80;0>w&&(w=0),y<m+x.length&&(y=m+x.length),y>p.length&&(y=p.length),$.push(r(p,w,y,g))}$.sort(function(t,e){return t.searchTextCount!==e.searchTextCount?e.searchTextCount-t.searchTextCount:t.hits.length!==e.hits.length?e.hits.length-t.hits.length:t.start-e.start});var T=parseInt("1");T>=0&&($=$.slice(0,T));var b="";b+=0!=v.length?"<li><a href='"+f+"' class='search-result-title'>"+s(l,v[0])+"</a>":"<li><a href='"+f+"' class='search-result-title'>"+l+"</a>",$.forEach(function(t){b+="<a href='"+f+'\'><p class="search-result">'+s(p,t)+"...</p></a>"}),b+="</li>",o.push({item:b,searchTextCount:c,hitCount:i,id:o.length})}}),1===e.length&&""===e[0])s.innerHTML='<div id="no-result"><i class="fa fa-search fa-5x" /></div>';else if(0===o.length)s.innerHTML='<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>';else{o.sort(function(t,e){return t.searchTextCount!==e.searchTextCount?e.searchTextCount-t.searchTextCount:t.hitCount!==e.hitCount?e.hitCount-t.hitCount:e.id-t.id});var a='<ul class="search-result-list">';o.forEach(function(t){a+=t.item}),a+="</ul>",s.innerHTML=a}};r.addEventListener("input",a),$(".local-search-pop-overlay").remove(),$("body").css("overflow",""),proceedsearch()}})};$(".popup-trigger").click(function(t){t.stopPropagation(),isfetched===!1?searchFunc(path,"local-search-input","local-search-result"):proceedsearch()}),$(".popup-btn-close").click(onPopupClose),$(".popup").click(function(t){t.stopPropagation()}),$(document).on("keyup",function(t){var e=27===t.which&&$(".search-popup").is(":visible");e&&onPopupClose()})</script><script>!function(){var t=document.createElement("script"),s=window.location.protocol.split(":")[0];"https"===s?t.src="https://zz.bdstatic.com/linksubmit/push.js":t.src="http://push.zhanzhang.baidu.com/push.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()</script></body></html><script type="text/javascript" src="/js/src/love.js"></script><!-- rebuild by neat -->